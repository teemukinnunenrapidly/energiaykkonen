!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.E1Calculator=t():e.E1Calculator=t()}(this,()=>(()=>{var e={45:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(825));t.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let o=!1;const a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(e,{count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},63:(e,t,n)=>{"use strict";n.d(t,{getFormulaLookupByName:()=>i});var r=n(608);async function i(e){const{data:t,error:n}=await r.ND.from("formula_lookups").select("\n      *,\n      formula_lookup_conditions (*)\n    ").eq("name",e).eq("is_active",!0).single();if(n){if("PGRST116"===n.code)return null;throw n}return{...t,conditions:t.formula_lookup_conditions?.sort((e,t)=>e.condition_order-t.condition_order)||[]}}},221:(e,t,n)=>{"use strict";var r=n(540);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=u(t.as,t.crossOrigin);a.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},247:(e,t,n)=>{"use strict";var r=n(606),i=n(982),o=n(540),a=n(961);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(u(e)!==e)throw Error(s(188))}function f(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=f(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var j=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var P=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var O=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=O&&e[O]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function z(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case y:return"Fragment";case v:return"Profiler";case b:return"StrictMode";case x:return"Suspense";case E:return"SuspenseList";case j:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case g:return"Portal";case _:return(e.displayName||"Context")+".Provider";case k:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return z(e(t))}catch(e){}}return null}var R=Array.isArray,N=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},D=[],M=-1;function B(e){return{current:e}}function F(e){0>M||(e.current=D[M],D[M]=null,M--)}function U(e,t){M++,D[M]=e.current,e.current=t}var W=B(null),H=B(null),q=B(null),V=B(null);function K(e,t){switch(U(q,t),U(H,e),U(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?od(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=od(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(W),U(W,e)}function G(){F(W),F(H),F(q)}function J(e){null!==e.memoizedState&&U(V,e);var t=W.current,n=ad(t,e.type);t!==n&&(U(H,e),U(W,n))}function Q(e){H.current===e&&(F(W),F(H)),V.current===e&&(F(V),Jd._currentValue=$)}var Y=Object.prototype.hasOwnProperty,X=i.unstable_scheduleCallback,Z=i.unstable_cancelCallback,ee=i.unstable_shouldYield,te=i.unstable_requestPaint,ne=i.unstable_now,re=i.unstable_getCurrentPriorityLevel,ie=i.unstable_ImmediatePriority,oe=i.unstable_UserBlockingPriority,ae=i.unstable_NormalPriority,se=i.unstable_LowPriority,le=i.unstable_IdlePriority,ue=i.log,ce=i.unstable_setDisableYieldValue,de=null,fe=null;function he(e){if("function"==typeof ue&&ce(e),fe&&"function"==typeof fe.setStrictMode)try{fe.setStrictMode(de,e)}catch(e){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/ge|0)|0},me=Math.log,ge=Math.LN2;var ye=256,be=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ve(r):0!==(a&=s)?i=ve(a):n||0!==(n=s&~e)&&(i=ve(n)):0!==(s=r&~o)?i=ve(s):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&4194048&n)?t:i}function ke(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ye;return!(4194048&(ye<<=1))&&(ye=256),e}function xe(){var e=be;return!(62914560&(be<<=1))&&(be=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function je(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oe(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Le(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:df(e.type)}var Ae=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ae,Re="__reactProps$"+Ae,Ne="__reactContainer$"+Ae,Ie="__reactEvents$"+Ae,$e="__reactListeners$"+Ae,De="__reactHandles$"+Ae,Me="__reactResources$"+Ae,Be="__reactMarker$"+Ae;function Fe(e){delete e[ze],delete e[Re],delete e[Ie],delete e[$e],delete e[De]}function Ue(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ne]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[ze])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function We(e){if(e=e[ze]||e[Ne]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function qe(e){var t=e[Me];return t||(t=e[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Be]=!0}var Ke=new Set,Ge={};function Je(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Ye,Xe,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),et={},tt={};function nt(e,t,n){if(i=t,Y.call(tt,i)||!Y.call(et,i)&&(Ze.test(i)?tt[i]=!0:(et[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function rt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function it(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ot(e){if(void 0===Ye)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Xe=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Xe}var at=!1;function st(e,t){if(!e||at)return"";at=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{at=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ot(n):""}function lt(e){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return ot("Activity");default:return""}}function ut(e){try{var t="";do{t+=lt(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function gt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+ct(s):e.removeAttribute("name")}function bt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(R(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&Et(e,o,t[o])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Lt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var zt=null,Rt=null;function Nt(e){var t=We(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Re]||null;if(!i)throw Error(s(90));yt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var It=!1;function $t(e,t,n){if(It)return e(t,n);It=!0;try{return e(t)}finally{if(It=!1,(null!==zt||null!==Rt)&&(Uu(),zt&&(t=zt,e=Rt,Rt=zt=null,Nt(t),e)))for(t=0;t<e.length;t++)Nt(e[t])}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Mt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Bt=!1;if(Mt)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch(e){Bt=!1}var Ut=null,Wt=null,Ht=null;function qt(){if(Ht)return Ht;var e,t,n=Wt,r=n.length,i="value"in Ut?Ut.value:Ut.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Ht=i.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function Jt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Qt,Yt,Xt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},en=Jt(Zt),tn=h({},Zt,{view:0,detail:0}),nn=Jt(tn),rn=h({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Qt=e.screenX-Xt.screenX,Yt=e.screenY-Xt.screenY):Yt=Qt=0,Xt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),on=Jt(rn),an=Jt(h({},rn,{dataTransfer:0})),sn=Jt(h({},tn,{relatedTarget:0})),ln=Jt(h({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Jt(h({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Jt(h({},Zt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return pn}var gn=Jt(h({},tn,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Jt(h({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Jt(h({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),vn=Jt(h({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Jt(h({},rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=Jt(h({},Zt,{newState:0,oldState:0})),_n=[9,13,27,32],Sn=Mt&&"CompositionEvent"in window,xn=null;Mt&&"documentMode"in document&&(xn=document.documentMode);var En=Mt&&"TextEvent"in window&&!xn,Cn=Mt&&(!Sn||xn&&8<xn&&11>=xn),Tn=String.fromCharCode(32),jn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function Rn(e,t,n,r){zt?Rt?Rt.push(r):Rt=[r]:zt=r,0<(t=qc(t,"onChange")).length&&(n=new en("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nn=null,In=null;function $n(e){$c(e,0)}function Dn(e){if(ht(He(e)))return e}function Mn(e,t){if("change"===e)return t}var Bn=!1;if(Mt){var Fn;if(Mt){var Un="oninput"in document;if(!Un){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Un="function"==typeof Wn.oninput}Fn=Un}else Fn=!1;Bn=Fn&&(!document.documentMode||9<document.documentMode)}function Hn(){Nn&&(Nn.detachEvent("onpropertychange",qn),In=Nn=null)}function qn(e){if("value"===e.propertyName&&Dn(In)){var t=[];Rn(t,In,e,At(e)),$t($n,t)}}function Vn(e,t,n){"focusin"===e?(Hn(),In=n,(Nn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Hn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(In)}function Gn(e,t){if("click"===e)return Dn(t)}function Jn(e,t){if("input"===e||"change"===e)return Dn(t)}var Qn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Yn(e,t){if(Qn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function er(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?er(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rr=Mt&&"documentMode"in document&&11>=document.documentMode,ir=null,or=null,ar=null,sr=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==ir||ir!==pt(r)||("selectionStart"in(r=ir)&&nr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&Yn(ar,r)||(ar=r,0<(r=qc(or,"onSelect")).length&&(t=new en("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},dr={},fr={};function hr(e){if(dr[e])return dr[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return dr[e]=n[t];return e}Mt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),mr=hr("animationiteration"),gr=hr("animationstart"),yr=hr("transitionrun"),br=hr("transitionstart"),vr=hr("transitioncancel"),wr=hr("transitionend"),kr=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){kr.set(e,t),Je(t,[e])}_r.push("scrollEnd");var xr=new WeakMap;function Er(e,t){if("object"==typeof e&&null!==e){var n=xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ut(t)},xr.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var Cr=[],Tr=0,jr=0;function Pr(){for(var e=Tr,t=jr=Tr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var o=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&zr(n,i,o)}}function Or(e,t,n,r){Cr[Tr++]=e,Cr[Tr++]=t,Cr[Tr++]=n,Cr[Tr++]=r,jr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Lr(e,t,n,r){return Or(e,t,n,r),Rr(e)}function Ar(e,t){return Or(e,null,null,t),Rr(e)}function zr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-pe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Rr(e){if(50<zu)throw zu=0,Ru=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Nr={};function Ir(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(e,t,n,r){return new Ir(e,t,n,r)}function Dr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mr(e,t){var n=e.alternate;return null===n?((n=$r(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fr(e,t,n,r,i,o){var a=0;if(r=e,"function"==typeof e)Dr(e)&&(a=1);else if("string"==typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case j:return(e=$r(31,n,t,i)).elementType=j,e.lanes=o,e;case y:return Ur(n.children,i,o,t);case b:a=8,i|=24;break;case v:return(e=$r(12,n,t,2|i)).elementType=v,e.lanes=o,e;case x:return(e=$r(13,n,t,i)).elementType=x,e.lanes=o,e;case E:return(e=$r(19,n,t,i)).elementType=E,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case w:case _:a=10;break e;case k:a=9;break e;case S:a=11;break e;case C:a=14;break e;case T:a=16,r=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=$r(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ur(e,t,n,r){return(e=$r(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=$r(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=$r(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=[],Vr=0,Kr=null,Gr=0,Jr=[],Qr=0,Yr=null,Xr=1,Zr="";function ei(e,t){qr[Vr++]=Gr,qr[Vr++]=Kr,Kr=e,Gr=t}function ti(e,t,n){Jr[Qr++]=Xr,Jr[Qr++]=Zr,Jr[Qr++]=Yr,Yr=e;var r=Xr;e=Zr;var i=32-pe(r)-1;r&=~(1<<i),n+=1;var o=32-pe(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xr=1<<32-pe(t)+i|n<<i|r,Zr=o+e}else Xr=1<<o|n<<i|r,Zr=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Kr;)Kr=qr[--Vr],qr[Vr]=null,Gr=qr[--Vr],qr[Vr]=null;for(;e===Yr;)Yr=Jr[--Qr],Jr[Qr]=null,Zr=Jr[--Qr],Jr[Qr]=null,Xr=Jr[--Qr],Jr[Qr]=null}var ii=null,oi=null,ai=!1,si=null,li=!1,ui=Error(s(519));function ci(e){throw gi(Er(Error(s(418,"")),e)),ui}function di(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Re]=r,n){case"dialog":Dc("cancel",t),Dc("close",t);break;case"iframe":case"object":case"embed":Dc("load",t);break;case"video":case"audio":for(n=0;n<Nc.length;n++)Dc(Nc[n],t);break;case"source":Dc("error",t);break;case"img":case"image":case"link":Dc("error",t),Dc("load",t);break;case"details":Dc("toggle",t);break;case"input":Dc("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ft(t);break;case"select":Dc("invalid",t);break;case"textarea":Dc("invalid",t),_t(t,r.value,r.defaultValue,r.children),ft(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yc(t.textContent,n)?(null!=r.popover&&(Dc("beforetoggle",t),Dc("toggle",t)),null!=r.onScroll&&Dc("scroll",t),null!=r.onScrollEnd&&Dc("scrollend",t),null!=r.onClick&&(t.onclick=Xc),t=!0):t=!1,t||ci(e)}function fi(e){for(ii=e.return;ii;)switch(ii.tag){case 5:case 13:return void(li=!1);case 27:case 3:return void(li=!0);default:ii=ii.return}}function hi(e){if(e!==ii)return!1;if(!ai)return fi(e),ai=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sd(e.type,e.memoizedProps)),t=!t),t&&oi&&ci(e),fi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){oi=bd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}oi=null}}else 27===n?(n=oi,pd(e.type)?(e=vd,vd=null,oi=e):oi=n):oi=ii?bd(e.stateNode.nextSibling):null;return!0}function pi(){oi=ii=null,ai=!1}function mi(){var e=si;return null!==e&&(null===wu?wu=e:wu.push.apply(wu,e),si=null),e}function gi(e){null===si?si=[e]:si.push(e)}var yi=B(null),bi=null,vi=null;function wi(e,t,n){U(yi,t._currentValue),t._currentValue=n}function ki(e){e._currentValue=yi.current,F(yi)}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var a=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_i(o.return,n,e),r||(a=null);break e}o=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(s(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),_i(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function xi(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(524288&i.flags)o=!0;else if(262144&i.flags)break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===V.current){if(null===(a=i.alternate))throw Error(s(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Jd):e=[Jd])}i=i.return}null!==e&&Si(t,e,n,r),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){bi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ti(e){return Pi(bi,e)}function ji(e,t){return null===bi&&Ci(e),Pi(e,t)}function Pi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(s(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Oi="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Li=i.unstable_scheduleCallback,Ai=i.unstable_NormalPriority,zi={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ri(){return{controller:new Oi,data:new Map,refCount:0}}function Ni(e){e.refCount--,0===e.refCount&&Li(Ai,function(){e.controller.abort()})}var Ii=null,$i=0,Di=0,Mi=null;function Bi(){if(0===--$i&&null!==Ii){null!==Mi&&(Mi.status="fulfilled");var e=Ii;Ii=null,Di=0,Mi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Fi=N.S;N.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Ii){var n=Ii=[];$i=0,Di=Oc(),Mi={status:"pending",value:void 0,then:function(e){n.push(e)}}}$i++,t.then(Bi,Bi)}(0,t),null!==Fi&&Fi(e,t)};var Ui=B(null);function Wi(){var e=Ui.current;return null!==e?e:iu.pooledCache}function Hi(e,t){U(Ui,null===t?Ui.current:t.pool)}function qi(){var e=Wi();return null===e?null:{parent:zi._currentValue,pool:e}}var Vi=Error(s(460)),Ki=Error(s(474)),Gi=Error(s(542)),Ji={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function Xi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw to(e=t.reason),e;default:if("string"==typeof t.status)t.then(Yi,Yi);else{if(null!==(e=iu)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw to(e=t.reason),e}throw Zi=t,Vi}}var Zi=null;function eo(){if(null===Zi)throw Error(s(459));var e=Zi;return Zi=null,e}function to(e){if(e===Vi||e===Gi)throw Error(s(483))}var no=!1;function ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ao(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&ru){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Rr(e),zr(e,null,n),t}return Or(e,r,t,n),Rr(e)}function so(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}function lo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var uo=!1;function co(){if(uo){if(null!==Mi)throw Mi}}function fo(e,t,n,r){uo=!1;var i=e.updateQueue;no=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var f=-536870913&s.lane,p=f!==s.lane;if(p?(au&f)===f:(r&f)===f){0!==f&&f===Di&&(uo=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;f=t;var y=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(y,d,f):m))break e;d=h({},d,f);break e;case 2:no=!0}}null!==(f=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===o&&(i.shared.lanes=0),pu|=a,e.lanes=a,e.memoizedState=d}}function ho(e,t){if("function"!=typeof e)throw Error(s(191,e));e.call(t)}function po(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var mo=B(null),go=B(0);function yo(e,t){U(go,e=fu),U(mo,t),fu=e|t.baseLanes}function bo(){U(go,fu),U(mo,mo.current)}function vo(){fu=go.current,F(mo),F(go)}var wo=0,ko=null,_o=null,So=null,xo=!1,Eo=!1,Co=!1,To=0,jo=0,Po=null,Oo=0;function Lo(){throw Error(s(321))}function Ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function zo(e,t,n,r,i,o){return wo=o,ko=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?Ka:Ga,Co=!1,o=n(r,i),Co=!1,Eo&&(o=No(t,n,r,i)),Ro(e),o}function Ro(e){N.H=Va;var t=null!==_o&&null!==_o.next;if(wo=0,So=_o=ko=null,xo=!1,jo=0,Po=null,t)throw Error(s(300));null===e||js||null!==(e=e.dependencies)&&Ei(e)&&(js=!0)}function No(e,t,n,r){ko=e;var i=0;do{if(Eo&&(Po=null),jo=0,Eo=!1,25<=i)throw Error(s(301));if(i+=1,So=_o=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}N.H=Ja,o=t(n,r)}while(Eo);return o}function Io(){var e=N.H,t=e.useState()[0];return t="function"==typeof t.then?Uo(t):t,e=e.useState()[0],(null!==_o?_o.memoizedState:null)!==e&&(ko.flags|=1024),t}function $o(){var e=0!==To;return To=0,e}function Do(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Mo(e){if(xo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xo=!1}wo=0,So=_o=ko=null,Eo=!1,jo=To=0,Po=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===So?ko.memoizedState=So=e:So=So.next=e,So}function Fo(){if(null===_o){var e=ko.alternate;e=null!==e?e.memoizedState:null}else e=_o.next;var t=null===So?ko.memoizedState:So.next;if(null!==t)So=t,_o=e;else{if(null===e){if(null===ko.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(_o=e).memoizedState,baseState:_o.baseState,baseQueue:_o.baseQueue,queue:_o.queue,next:null},null===So?ko.memoizedState=So=e:So=So.next=e}return So}function Uo(e){var t=jo;return jo+=1,null===Po&&(Po=[]),e=Xi(Po,e,t),t=ko,null===(null===So?t.memoizedState:So.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?Ka:Ga),e}function Wo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Uo(e);if(e.$$typeof===_)return Ti(e)}throw Error(s(438,String(e)))}function Ho(e){var t=null,n=ko.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ko.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ko.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=P;return t.index++,n}function qo(e,t){return"function"==typeof t?t(e):t}function Vo(e){return Ko(Fo(),_o,e)}function Ko(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=a=null,u=null,c=t=i.next,d=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(au&f)===f:(wo&f)===f){var h=c.revertLane;if(0===h)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Di&&(d=!0);else{if((wo&h)===h){c=c.next,h===Di&&(d=!0);continue}f={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,a=o):u=u.next=f,ko.lanes|=h,pu|=h}f=c.action,Co&&n(o,f),o=c.hasEagerState?c.eagerState:n(o,f)}else h={lane:f,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,a=o):u=u.next=h,ko.lanes|=f,pu|=f;c=c.next}while(null!==c&&c!==t);if(null===u?a=o:u.next=l,!Qn(o,e.memoizedState)&&(js=!0,d&&null!==(n=Mi)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=u,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Go(e){var t=Fo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Qn(o,t.memoizedState)||(js=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Jo(e,t,n){var r=ko,i=Fo(),o=ai;if(o){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Qn((_o||i).memoizedState,n);if(a&&(i.memoizedState=n,js=!0),i=i.queue,ba(2048,8,Xo.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==So&&1&So.memoizedState.tag){if(r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Yo.bind(null,r,i,n,t),null),null===iu)throw Error(s(349));o||124&wo||Qo(r,t,n)}return n}function Qo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ko.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ko.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Yo(e,t,n,r){t.value=n,t.getSnapshot=r,Zo(t)&&ea(e)}function Xo(e,t,n){return n(function(){Zo(t)&&ea(e)})}function Zo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(e){return!0}}function ea(e){var t=Ar(e,2);null!==t&&$u(t,e,2)}function ta(e){var t=Bo();if("function"==typeof e){var n=e;if(e=n(),Co){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:e},t}function na(e,t,n,r){return e.baseState=n,Ko(e,_o,"function"==typeof r?r:qo)}function ra(e,t,n,r,i){if(Wa(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==N.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ia(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ia(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=N.T,a={};N.T=a;try{var s=n(i,r),l=N.S;null!==l&&l(a,s),oa(e,t,s)}catch(n){sa(e,t,n)}finally{N.T=o}}else try{oa(e,t,o=n(i,r))}catch(n){sa(e,t,n)}}function oa(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){aa(e,t,n)},function(n){return sa(e,t,n)}):aa(e,t,n)}function aa(e,t,n){t.status="fulfilled",t.value=n,la(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ia(e,n)))}function sa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,la(t),t=t.next}while(t!==r)}e.action=null}function la(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ua(e,t){return t}function ca(e,t){if(ai){var n=iu.formState;if(null!==n){e:{var r=ko;if(ai){if(oi){t:{for(var i=oi,o=li;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=bd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){oi=bd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Bo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:t},n.queue=r,n=Ba.bind(null,ko,r),r.dispatch=n,r=ta(!1),o=Ua.bind(null,ko,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Bo()).queue=i,n=ra.bind(null,ko,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function da(e){return fa(Fo(),_o,e)}function fa(e,t,n){if(t=Ko(e,t,ua)[0],e=Vo(qo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Uo(t)}catch(e){if(e===Vi)throw Gi;throw e}else r=t;var i=(t=Fo()).queue,o=i.dispatch;return n!==t.memoizedState&&(ko.flags|=2048,ma(9,{destroy:void 0,resource:void 0},ha.bind(null,i,n),null)),[r,o,e]}function ha(e,t){e.action=t}function pa(e){var t=Fo(),n=_o;if(null!==n)return fa(t,n,e);Fo(),t=t.memoizedState;var r=(n=Fo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ko.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ko.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(){return Fo().memoizedState}function ya(e,t,n,r){var i=Bo();r=void 0===r?null:r,ko.flags|=e,i.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function ba(e,t,n,r){var i=Fo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==_o&&null!==r&&Ao(r,_o.memoizedState.deps)?i.memoizedState=ma(t,o,n,r):(ko.flags|=e,i.memoizedState=ma(1|t,o,n,r))}function va(e,t){ya(8390656,8,e,t)}function wa(e,t){ba(2048,8,e,t)}function ka(e,t){return ba(4,2,e,t)}function _a(e,t){return ba(4,4,e,t)}function Sa(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function xa(e,t,n){n=null!=n?n.concat([e]):null,ba(4,4,Sa.bind(null,t,e),n)}function Ea(){}function Ca(e,t){var n=Fo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ta(e,t){var n=Fo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ao(t,r[1]))return r[0];if(r=e(),Co){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function ja(e,t,n){return void 0===n||1073741824&wo?e.memoizedState=t:(e.memoizedState=n,e=Iu(),ko.lanes|=e,pu|=e,n)}function Pa(e,t,n,r){return Qn(n,t)?n:null!==mo.current?(e=ja(e,n,r),Qn(e,t)||(js=!0),e):42&wo?(e=Iu(),ko.lanes|=e,pu|=e,t):(js=!0,e.memoizedState=n)}function Oa(e,t,n,r,i){var o=I.p;I.p=0!==o&&8>o?o:8;var a,s,l,u=N.T,c={};N.T=c,Ua(e,!1,t,n);try{var d=i(),f=N.S;if(null!==f&&f(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)Fa(e,t,(a=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l),Nu());else Fa(e,t,r,Nu())}catch(n){Fa(e,t,{then:function(){},status:"rejected",reason:n},Nu())}finally{I.p=o,N.T=u}}function La(){}function Aa(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=za(e).queue;Oa(e,i,t,$,null===n?La:function(){return Ra(e),n(r)})}function za(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:$},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ra(e){Fa(e,za(e).next.queue,{},Nu())}function Na(){return Ti(Jd)}function Ia(){return Fo().memoizedState}function $a(){return Fo().memoizedState}function Da(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Nu(),r=ao(t,e=oo(n),n);return null!==r&&($u(r,t,n),so(r,t,n)),t={cache:Ri()},void(e.payload=t)}t=t.return}}function Ma(e,t,n){var r=Nu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wa(e)?Ha(t,n):null!==(n=Lr(e,t,n,r))&&($u(n,e,r),qa(n,t,r))}function Ba(e,t,n){Fa(e,t,n,Nu())}function Fa(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wa(e))Ha(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Qn(s,a))return Or(e,t,i,0),null===iu&&Pr(),!1}catch(e){}if(null!==(n=Lr(e,t,i,r)))return $u(n,e,r),qa(n,t,r),!0}return!1}function Ua(e,t,n,r){if(r={lane:2,revertLane:Oc(),action:r,hasEagerState:!1,eagerState:null,next:null},Wa(e)){if(t)throw Error(s(479))}else null!==(t=Lr(e,n,r,2))&&$u(t,e,2)}function Wa(e){var t=e.alternate;return e===ko||null!==t&&t===ko}function Ha(e,t){Eo=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}var Va={readContext:Ti,use:Wo,useCallback:Lo,useContext:Lo,useEffect:Lo,useImperativeHandle:Lo,useLayoutEffect:Lo,useInsertionEffect:Lo,useMemo:Lo,useReducer:Lo,useRef:Lo,useState:Lo,useDebugValue:Lo,useDeferredValue:Lo,useTransition:Lo,useSyncExternalStore:Lo,useId:Lo,useHostTransitionStatus:Lo,useFormState:Lo,useActionState:Lo,useOptimistic:Lo,useMemoCache:Lo,useCacheRefresh:Lo},Ka={readContext:Ti,use:Wo,useCallback:function(e,t){return Bo().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:va,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,ya(4194308,4,Sa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4194308,4,e,t)},useInsertionEffect:function(e,t){ya(4,2,e,t)},useMemo:function(e,t){var n=Bo();t=void 0===t?null:t;var r=e();if(Co){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bo();if(void 0!==n){var i=n(t);if(Co){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ma.bind(null,ko,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Bo().memoizedState=e},useState:function(e){var t=(e=ta(e)).queue,n=Ba.bind(null,ko,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return ja(Bo(),e,t)},useTransition:function(){var e=ta(!1);return e=Oa.bind(null,ko,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ko,i=Bo();if(ai){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===iu)throw Error(s(349));124&au||Qo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,va(Xo.bind(null,r,o,e),[e]),r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Yo.bind(null,r,o,n,t),null),n},useId:function(){var e=Bo(),t=iu.identifierPrefix;if(ai){var n=Zr;t="«"+t+"R"+(n=(Xr&~(1<<32-pe(Xr)-1)).toString(32)+n),0<(n=To++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=Oo++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Na,useFormState:ca,useActionState:ca,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ua.bind(null,ko,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ho,useCacheRefresh:function(){return Bo().memoizedState=Da.bind(null,ko)}},Ga={readContext:Ti,use:Wo,useCallback:Ca,useContext:Ti,useEffect:wa,useImperativeHandle:xa,useInsertionEffect:ka,useLayoutEffect:_a,useMemo:Ta,useReducer:Vo,useRef:ga,useState:function(){return Vo(qo)},useDebugValue:Ea,useDeferredValue:function(e,t){return Pa(Fo(),_o.memoizedState,e,t)},useTransition:function(){var e=Vo(qo)[0],t=Fo().memoizedState;return["boolean"==typeof e?e:Uo(e),t]},useSyncExternalStore:Jo,useId:Ia,useHostTransitionStatus:Na,useFormState:da,useActionState:da,useOptimistic:function(e,t){return na(Fo(),0,e,t)},useMemoCache:Ho,useCacheRefresh:$a},Ja={readContext:Ti,use:Wo,useCallback:Ca,useContext:Ti,useEffect:wa,useImperativeHandle:xa,useInsertionEffect:ka,useLayoutEffect:_a,useMemo:Ta,useReducer:Go,useRef:ga,useState:function(){return Go(qo)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Fo();return null===_o?ja(n,e,t):Pa(n,_o.memoizedState,e,t)},useTransition:function(){var e=Go(qo)[0],t=Fo().memoizedState;return["boolean"==typeof e?e:Uo(e),t]},useSyncExternalStore:Jo,useId:Ia,useHostTransitionStatus:Na,useFormState:pa,useActionState:pa,useOptimistic:function(e,t){var n=Fo();return null!==_o?na(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ho,useCacheRefresh:$a},Qa=null,Ya=0;function Xa(e){var t=Ya;return Ya+=1,null===Qa&&(Qa=[]),Xi(Qa,e,t)}function Za(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function es(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ts(e){return(0,e._init)(e._payload)}function ns(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Mr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===T&&ts(o)===t.type)?(Za(t=i(t,n.props),n),t.return=e,t):(Za(t=Fr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Ur(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case m:return Za(n=Fr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Hr(t,e.mode,n)).return=e,t;case T:return f(e,t=(0,t._init)(t._payload),n)}if(R(t)||L(t))return(t=Ur(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return f(e,Xa(t),n);if(t.$$typeof===_)return f(e,ji(e,t),n);es(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?u(e,t,n,r):null;case g:return n.key===i?c(e,t,n,r):null;case T:return h(e,t,n=(i=n._init)(n._payload),r)}if(R(n)||L(n))return null!==i?null:d(e,t,n,r,null);if("function"==typeof n.then)return h(e,t,Xa(n),r);if(n.$$typeof===_)return h(e,t,ji(e,n),r);es(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return p(e,t,n,r=(0,r._init)(r._payload),i)}if(R(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return p(e,t,n,Xa(r),i);if(r.$$typeof===_)return p(e,t,n,ji(t,r),i);es(t,r)}return null}function b(l,u,c,d){if("object"==typeof c&&null!==c&&c.type===y&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case m:e:{for(var v=c.key;null!==u;){if(u.key===v){if((v=c.type)===y){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===v||"object"==typeof v&&null!==v&&v.$$typeof===T&&ts(v)===u.type){n(l,u.sibling),Za(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===y?((d=Ur(c.props.children,l.mode,d,c.key)).return=l,l=d):(Za(d=Fr(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return a(l);case g:e:{for(v=c.key;null!==u;){if(u.key===v){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=Hr(c,l.mode,d)).return=l,l=d}return a(l);case T:return b(l,u,c=(v=c._init)(c._payload),d)}if(R(c))return function(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=h(i,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===s.length)return n(i,d),ai&&ei(i,m),u;if(null===d){for(;m<s.length;m++)null!==(d=f(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return ai&&ei(i,m),u}for(d=r(d);m<s.length;m++)null!==(g=p(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),ai&&ei(i,m),u}(l,u,c,d);if(L(c)){if("function"!=typeof(v=L(c)))throw Error(s(150));return function(i,a,l,u){if(null==l)throw Error(s(151));for(var c=null,d=null,m=a,g=a=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=h(i,m,b.value,u);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(i,m),a=o(v,a,g),null===d?c=v:d.sibling=v,d=v,m=y}if(b.done)return n(i,m),ai&&ei(i,g),c;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=f(i,b.value,u))&&(a=o(b,a,g),null===d?c=b:d.sibling=b,d=b);return ai&&ei(i,g),c}for(m=r(m);!b.done;g++,b=l.next())null!==(b=p(m,i,g,b.value,u))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),a=o(b,a,g),null===d?c=b:d.sibling=b,d=b);return e&&m.forEach(function(e){return t(i,e)}),ai&&ei(i,g),c}(l,u,c=v.call(c),d)}if("function"==typeof c.then)return b(l,u,Xa(c),d);if(c.$$typeof===_)return b(l,u,ji(l,c),d);es(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=Wr(c,l.mode,d)).return=l,l=d),a(l)):n(l,u)}return function(e,t,n,r){try{Ya=0;var i=b(e,t,n,r);return Qa=null,i}catch(t){if(t===Vi||t===Gi)throw t;var o=$r(29,t,null,e.mode);return o.lanes=r,o.return=e,o}}}var rs=ns(!0),is=ns(!1),os=B(null),as=null;function ss(e){var t=e.alternate;U(ds,1&ds.current),U(os,e),null===as&&(null===t||null!==mo.current||null!==t.memoizedState)&&(as=e)}function ls(e){if(22===e.tag){if(U(ds,ds.current),U(os,e),null===as){var t=e.alternate;null!==t&&null!==t.memoizedState&&(as=e)}}else us()}function us(){U(ds,ds.current),U(os,os.current)}function cs(e){F(os),as===e&&(as=null),F(ds)}var ds=B(0);function fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ps={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nu(),i=oo(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=ao(e,i,r))&&($u(t,e,r),so(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nu(),i=oo(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ao(e,i,r))&&($u(t,e,r),so(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nu(),r=oo(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ao(e,r,n))&&($u(t,e,n),so(t,e,n))}};function ms(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(i,o))}function gs(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ps.enqueueReplaceState(t,t.state,null)}function ys(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var bs="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof r&&"function"==typeof r.emit)return void r.emit("uncaughtException",e)};function vs(e){bs(e)}function ws(e){}function ks(e){bs(e)}function _s(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Ss(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function xs(e,t,n){return(n=oo(n)).tag=3,n.payload={element:null},n.callback=function(){_s(e,t)},n}function Es(e){return(e=oo(e)).tag=3,e}function Cs(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){Ss(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Ss(t,n,r),"function"!=typeof i&&(null===Eu?Eu=new Set([this]):Eu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ts=Error(s(461)),js=!1;function Ps(e,t,n,r){t.child=null===e?is(t,null,n,r):rs(t,e.child,n,r)}function Os(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Ci(t),r=zo(e,t,n,a,o,i),s=$o(),null===e||js?(ai&&s&&ni(t),t.flags|=1,Ps(e,t,r,i),t.child):(Do(e,t,i),Qs(e,t,i))}function Ls(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Dr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Fr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,As(e,t,o,r,i))}if(o=e.child,!Ys(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(a,r)&&e.ref===t.ref)return Qs(e,t,i)}return t.flags|=1,(e=Mr(o,r)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Yn(o,r)&&e.ref===t.ref){if(js=!1,t.pendingProps=r=o,!Ys(e,i))return t.lanes=e.lanes,Qs(e,t,i);131072&e.flags&&(js=!0)}}return Is(e,t,n,r,i)}function zs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Rs(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Rs(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hi(0,null!==o?o.cachePool:null),null!==o?yo(t,o):bo(),ls(t)}else null!==o?(Hi(0,o.cachePool),yo(t,o),us(),t.memoizedState=null):(null!==e&&Hi(0,null),bo(),us());return Ps(e,t,i,n),t.child}function Rs(e,t,n,r){var i=Wi();return i=null===i?null:{parent:zi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Hi(0,null),bo(),ls(t),null!==e&&xi(e,t,r,!0),null}function Ns(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Is(e,t,n,r,i){return Ci(t),n=zo(e,t,n,r,void 0,i),r=$o(),null===e||js?(ai&&r&&ni(t),t.flags|=1,Ps(e,t,n,i),t.child):(Do(e,t,i),Qs(e,t,i))}function $s(e,t,n,r,i,o){return Ci(t),t.updateQueue=null,n=No(t,r,n,i),Ro(e),r=$o(),null===e||js?(ai&&r&&ni(t),t.flags|=1,Ps(e,t,n,o),t.child):(Do(e,t,o),Qs(e,t,o))}function Ds(e,t,n,r,i){if(Ci(t),null===t.stateNode){var o=Nr,a=n.contextType;"object"==typeof a&&null!==a&&(o=Ti(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ps,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},ro(t),a=n.contextType,o.context="object"==typeof a&&null!==a?Ti(a):Nr,o.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(hs(t,n,a,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(a=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&ps.enqueueReplaceState(o,o.state,null),fo(t,r,o,i),co(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=ys(n,s);o.props=l;var u=o.context,c=n.contextType;a=Nr,"object"==typeof c&&null!==c&&(a=Ti(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||u!==a)&&gs(t,o,r,a),no=!1;var f=t.memoizedState;o.state=f,fo(t,r,o,i),co(),u=t.memoizedState,s||f!==u||no?("function"==typeof d&&(hs(t,n,d,r),u=t.memoizedState),(l=no||ms(t,n,l,r,f,u,a))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=a,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,io(e,t),c=ys(n,a=t.memoizedProps),o.props=c,d=t.pendingProps,f=o.context,u=n.contextType,l=Nr,"object"==typeof u&&null!==u&&(l=Ti(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||f!==l)&&gs(t,o,r,l),no=!1,f=t.memoizedState,o.state=f,fo(t,r,o,i),co();var h=t.memoizedState;a!==d||f!==h||no||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"==typeof s&&(hs(t,n,s,r),h=t.memoizedState),(c=no||ms(t,n,c,r,f,h,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ns(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=rs(t,e.child,null,i),t.child=rs(t,null,n,i)):Ps(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Qs(e,t,i),e}function Ms(e,t,n,r){return pi(),t.flags|=256,Ps(e,t,n,r),t.child}var Bs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fs(e){return{baseLanes:e,cachePool:qi()}}function Us(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yu),e}function Ws(e,t,n){var r,i=t.pendingProps,o=!1,a=!!(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&!!(2&ds.current)),r&&(o=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(ai){if(o?ss(t):us(),ai){var l,u=oi;if(l=u){e:{for(l=u,u=li;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=bd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Yr?{id:Xr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},(l=$r(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ii=t,oi=null,l=!0):l=!1}l||ci(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return yd(u)?t.lanes=32:t.lanes=536870912,null;cs(t)}return u=i.children,i=i.fallback,o?(us(),u=qs({mode:"hidden",children:u},o=t.mode),i=Ur(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(o=t.child).memoizedState=Fs(n),o.childLanes=Us(e,r,n),t.memoizedState=Bs,i):(ss(t),Hs(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(a)256&t.flags?(ss(t),t.flags&=-257,t=Vs(e,t,n)):null!==t.memoizedState?(us(),t.child=e.child,t.flags|=128,t=null):(us(),o=i.fallback,u=t.mode,i=qs({mode:"visible",children:i.children},u),(o=Ur(o,u,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,rs(t,e.child,null,n),(i=t.child).memoizedState=Fs(n),i.childLanes=Us(e,r,n),t.memoizedState=Bs,t=o);else if(ss(t),yd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(s(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Vs(e,t,n)}else if(js||xi(e,t,n,!1),r=0!==(n&e.childLanes),js||r){if(null!==(r=iu)&&(0!==(i=0!==((i=42&(i=n&-n)?1:Pe(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Ar(e,i),$u(r,e,i),Ts;"$?"===u.data||Gu(),t=Vs(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,oi=bd(u.nextSibling),ii=t,ai=!0,si=null,li=!1,null!==e&&(Jr[Qr++]=Xr,Jr[Qr++]=Zr,Jr[Qr++]=Yr,Xr=e.id,Zr=e.overflow,Yr=t),(t=Hs(t,i.children)).flags|=4096);return t}return o?(us(),o=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Mr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?o=Mr(c,o):(o=Ur(o,u,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(u=e.child.memoizedState)?u=Fs(n):(null!==(l=u.cachePool)?(c=zi._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=qi(),u={baseLanes:u.baseLanes|n,cachePool:l}),o.memoizedState=u,o.childLanes=Us(e,r,n),t.memoizedState=Bs,i):(ss(t),e=(n=e.child).sibling,(n=Mr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Hs(e,t){return(t=qs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function qs(e,t){return(e=$r(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Vs(e,t,n){return rs(t,e.child,null,n),(e=Hs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ks(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function Gs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Js(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ps(e,t,r.children,n),2&(r=ds.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,n,t);else if(19===e.tag)Ks(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(ds,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Gs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Gs(t,!0,n,null,o);break;case"together":Gs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Xs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)js=!0;else{if(!(Ys(e,n)||128&t.flags))return js=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),wi(0,zi,e.memoizedState.cache),pi();break;case 27:case 5:J(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ss(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ws(e,t,n):(ss(t),null!==(e=Qs(e,t,n))?e.sibling:null);ss(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(xi(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Js(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(ds,ds.current),r)break;return null;case 22:case 23:return t.lanes=0,zs(e,t,n);case 24:wi(0,zi,e.memoizedState.cache)}return Qs(e,t,n)}(e,t,n);js=!!(131072&e.flags)}else js=!1,ai&&1048576&t.flags&&ti(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((i=r.$$typeof)===S){t.tag=11,t=Os(null,t,r,e,n);break e}if(i===C){t.tag=14,t=Ls(null,t,r,e,n);break e}}throw t=z(r)||r,Error(s(306,t,""))}Dr(r)?(e=ys(r,e),t.tag=1,t=Ds(null,t,r,e,n)):(t.tag=0,t=Is(null,t,r,e,n))}return t;case 0:return Is(e,t,t.type,t.pendingProps,n);case 1:return Ds(e,t,r=t.type,i=ys(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,io(e,t),fo(t,r,null,n);var a=t.memoizedState;if(r=a.cache,wi(0,zi,r),r!==o.cache&&Si(t,[zi],n,!0),co(),r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ms(e,t,r,n);break e}if(r!==i){gi(i=Er(Error(s(424)),t)),t=Ms(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(oi=bd(e.firstChild),ii=t,ai=!0,si=null,li=!0,n=is(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===i){t=Qs(e,t,n);break e}Ps(e,t,r,n)}t=t.child}return t;case 26:return Ns(e,t),null===e?(n=Pd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ai||(n=t.type,e=t.pendingProps,(r=id(q.current).createElement(n))[ze]=t,r[Re]=e,td(r,n,e),Ve(r),t.stateNode=r):t.memoizedState=Pd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&ai&&(r=t.stateNode=kd(t.type,t.pendingProps,q.current),ii=t,li=!0,i=oi,pd(t.type)?(vd=i,oi=bd(r.firstChild)):oi=i),Ps(e,t,t.pendingProps.children,n),Ns(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ai&&((i=r=oi)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=bd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,li))?(t.stateNode=r,ii=t,oi=bd(r.firstChild),li=!1,i=!0):i=!1),i||ci(t)),J(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,sd(i,o)?r=null:null!==a&&sd(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=zo(e,t,Io,null,null,n),Jd._currentValue=i),Ns(e,t),Ps(e,t,r,n),t.child;case 6:return null===e&&ai&&((e=n=oi)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=bd(e.nextSibling)))return null}return e}(n,t.pendingProps,li))?(t.stateNode=n,ii=t,oi=null,e=!0):e=!1),e||ci(t)),null;case 13:return Ws(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=rs(t,null,r,n):Ps(e,t,r,n),t.child;case 11:return Os(e,t,t.type,t.pendingProps,n);case 7:return Ps(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ps(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),Ps(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Ti(i)),t.flags|=1,Ps(e,t,r,n),t.child;case 14:return Ls(e,t,t.type,t.pendingProps,n);case 15:return As(e,t,t.type,t.pendingProps,n);case 19:return Js(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=qs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Mr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return zs(e,t,n);case 24:return Ci(t),r=Ti(zi),null===e?(null===(i=Wi())&&(i=iu,o=Ri(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},ro(t),wi(0,zi,i)):(0!==(e.lanes&n)&&(io(e,t),fo(t,null,null,n),co()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,zi,r)):(r=o.cache,wi(0,zi,r),r!==i.cache&&Si(t,[zi],n,!0))),Ps(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Zs(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Ud(t)){if(null!==(t=os.current)&&((4194048&au)===au?null!==as:(62914560&au)!==au&&!(536870912&au)||t!==as))throw Zi=Ji,Ki;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,bu|=t)}function nl(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ki(zi),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Zs(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,mi())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Zs(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zs(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Zs(t),rl(t),t.flags&=-16777217),null;case 27:Q(t),n=q.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zs(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return rl(t),null}e=W.current,hi(t)?di(t):(e=kd(i,r,n),t.stateNode=e,Zs(t))}return rl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zs(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return rl(t),null}if(e=W.current,hi(t))di(t);else{switch(i=id(q.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[ze]=t,e[Re]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zs(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Zs(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(e=q.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ii))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yc(e.nodeValue,n)))||ci(t)}else(e=id(e).createTextNode(r))[ze]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ze]=t}else pi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=mi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(cs(t),t):(cs(t),null)}if(cs(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return G(),null===e&&Fc(t.stateNode.containerInfo),rl(t),null;case 10:return ki(t.type),rl(t),null;case 19:if(F(ds),null===(i=t.memoizedState))return rl(t),null;if(r=!!(128&t.flags),null===(o=i.rendering))if(r)nl(i,!1);else{if(0!==hu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=fs(e))){for(t.flags|=128,nl(i,!1),e=o.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return U(ds,1&ds.current|2),t.child}e=e.sibling}null!==i.tail&&ne()>Su&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=fs(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!ai)return rl(t),null}else 2*ne()-i.renderingStartTime>Su&&536870912!==n&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ne(),t.sibling=null,e=ds.current,U(ds,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return cs(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&F(Ui),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ki(zi),rl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function ol(e,t){switch(ri(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ki(zi),G(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(cs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(ds),null;case 4:return G(),null;case 10:return ki(t.type),null;case 22:case 23:return cs(t),vo(),null!==e&&F(Ui),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ki(zi),null;default:return null}}function al(e,t){switch(ri(t),t.tag){case 3:ki(zi),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:cs(t);break;case 19:F(ds);break;case 10:ki(t.type);break;case 22:case 23:cs(t),vo(),null!==e&&F(Ui);break;case 24:ki(zi)}}function sl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(e){dc(t,t.return,e)}}function ll(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,u=s;try{u()}catch(e){dc(i,l,e)}}}r=r.next}while(r!==o)}}catch(e){dc(t,t.return,e)}}function ul(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{po(t,n)}catch(t){dc(e,e.return,t)}}}function cl(e,t,n){n.props=ys(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){dc(e,t,n)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){dc(e,t,n)}}function fl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){dc(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){dc(e,t,n)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){dc(e,e.return,t)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,a=null,l=null,u=null,c=null,d=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&null!=f)switch(p){case"checked":case"value":break;case"defaultValue":u=f;default:r.hasOwnProperty(p)||Zc(e,t,p,null,r,f)}}for(var h in r){var p=r[h];if(f=n[h],r.hasOwnProperty(h)&&(null!=p||null!=f))switch(h){case"type":o=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==f&&Zc(e,t,h,p,r,f)}}return void yt(e,a,l,u,c,d,o,i);case"select":for(o in p=a=l=h=null,n)if(u=n[o],n.hasOwnProperty(o)&&null!=u)switch(o){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(o)||Zc(e,t,o,null,r,u)}for(i in r)if(o=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=o||null!=u))switch(i){case"value":h=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==u&&Zc(e,t,i,o,r,u)}return t=l,n=a,r=p,void(null!=h?wt(e,!!n,h,!1):!!r!=!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=h=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zc(e,t,l,null,r,i)}for(a in r)if(i=r[a],o=n[a],r.hasOwnProperty(a)&&(null!=i||null!=o))switch(a){case"value":h=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==o&&Zc(e,t,a,i,r,o)}return void kt(e,h,p);case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&null!=h&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Zc(e,t,m,null,r,h);for(u in r)if(h=r[u],p=n[u],r.hasOwnProperty(u)&&h!==p&&(null!=h||null!=p))if("selected"===u)e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h;else Zc(e,t,u,h,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)h=n[g],n.hasOwnProperty(g)&&null!=h&&!r.hasOwnProperty(g)&&Zc(e,t,g,null,r,h);for(c in r)if(h=r[c],p=n[c],r.hasOwnProperty(c)&&h!==p&&(null!=h||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:Zc(e,t,c,h,r,p)}return;default:if(Tt(t)){for(var y in n)h=n[y],n.hasOwnProperty(y)&&void 0!==h&&!r.hasOwnProperty(y)&&ed(e,t,y,void 0,r,h);for(d in r)h=r[d],p=n[d],!r.hasOwnProperty(d)||h===p||void 0===h&&void 0===p||ed(e,t,d,h,r,p);return}}for(var b in n)h=n[b],n.hasOwnProperty(b)&&null!=h&&!r.hasOwnProperty(b)&&Zc(e,t,b,null,r,h);for(f in r)h=r[f],p=n[f],!r.hasOwnProperty(f)||h===p||null==h&&null==p||Zc(e,t,f,h,r,p)}(r,e.type,n,t),r[Re]=t}catch(t){dc(e,e.return,t)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Xc));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);td(t,r,n),t[ze]=e,t[Re]=n}catch(t){dc(e,e.return,t)}}var wl=!1,kl=!1,_l=!1,Sl="function"==typeof WeakSet?WeakSet:Set,xl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Dl(e,n),4&r&&sl(5,n);break;case 1:if(Dl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){dc(n,n.return,e)}else{var i=ys(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){dc(n,n.return,e)}}64&r&&ul(n),512&r&&dl(n,n.return);break;case 3:if(Dl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{po(e,t)}catch(e){dc(n,n.return,e)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Dl(e,n),null===t&&4&r&&hl(n),512&r&&dl(n,n.return);break;case 12:Dl(e,n);break;case 13:Dl(e,n),4&r&&Ll(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||kl,i=wl;var o=kl;wl=r,(kl=t)&&!o?Bl(e,n,!!(8772&n.subtreeFlags)):Dl(e,n),wl=i,kl=o}break;case 30:break;default:Dl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Fe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,jl=!1;function Pl(e,t,n){for(n=n.child;null!==n;)Ol(e,t,n),n=n.sibling}function Ol(e,t,n){if(fe&&"function"==typeof fe.onCommitFiberUnmount)try{fe.onCommitFiberUnmount(de,n)}catch(e){}switch(n.tag){case 26:kl||fl(n,t),Pl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:kl||fl(n,t);var r=Tl,i=jl;pd(n.type)&&(Tl=n.stateNode,jl=!1),Pl(e,t,n),_d(n.stateNode),Tl=r,jl=i;break;case 5:kl||fl(n,t);case 6:if(r=Tl,i=jl,Tl=null,Pl(e,t,n),jl=i,null!==(Tl=r))if(jl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(e){dc(n,t,e)}else try{Tl.removeChild(n.stateNode)}catch(e){dc(n,t,e)}break;case 18:null!==Tl&&(jl?(md(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Pf(e)):md(Tl,n.stateNode));break;case 4:r=Tl,i=jl,Tl=n.stateNode.containerInfo,jl=!0,Pl(e,t,n),Tl=r,jl=i;break;case 0:case 11:case 14:case 15:kl||ll(2,n,t),kl||ll(4,n,t),Pl(e,t,n);break;case 1:kl||(fl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Pl(e,t,n);break;case 21:Pl(e,t,n);break;case 22:kl=(r=kl)||null!==n.memoizedState,Pl(e,t,n),kl=r;break;default:Pl(e,t,n)}}function Ll(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Pf(e)}catch(e){dc(t,t.return,e)}}function Al(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var r=gc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function zl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Tl=l.stateNode,jl=!1;break e}break;case 5:Tl=l.stateNode,jl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,jl=!0;break e}l=l.return}if(null===Tl)throw Error(s(160));Ol(o,a,i),Tl=null,jl=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Nl(t,e),t=t.sibling}var Rl=null;function Nl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zl(t,e),Il(e),4&r&&(ll(3,e,e.return),sl(3,e),ll(5,e,e.return));break;case 1:zl(t,e),Il(e),512&r&&(kl||null===n||fl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Rl;if(zl(t,e),Il(e),512&r&&(kl||null===n||fl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[Be]||o[ze]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),td(o,r,n),o[ze]=e,Ve(o),r=o;break e;case"link":var a=Bd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}td(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(a=Bd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}td(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(s(468,r))}o[ze]=e,Ve(o),r=o}e.stateNode=r}else Fd(i,e.type,e.stateNode);else e.stateNode=Nd(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Fd(i,e.type,e.stateNode):Nd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:zl(t,e),Il(e),512&r&&(kl||null===n||fl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(zl(t,e),Il(e),512&r&&(kl||null===n||fl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(t){dc(e,e.return,t)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(_l=!0);break;case 6:if(zl(t,e),Il(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){dc(e,e.return,t)}}break;case 3:if(Md=null,i=Rl,Rl=Ed(t.containerInfo),zl(t,e),Rl=i,Il(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Pf(t.containerInfo)}catch(t){dc(e,e.return,t)}_l&&(_l=!1,$l(e));break;case 4:r=Rl,Rl=Ed(e.stateNode.containerInfo),zl(t,e),Il(e),Rl=r;break;case 12:default:zl(t,e),Il(e);break;case 13:zl(t,e),Il(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(_u=ne()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=wl,d=kl;if(wl=c||i,kl=d||u,zl(t,e),kl=d,wl=c,Il(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||wl||kl||Ml(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,i)"function"==typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var f=u.memoizedProps.style,h=null!=f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(e){dc(u,u.return,e)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(e){dc(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Al(e,n))));break;case 19:zl(t,e),Il(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));case 30:case 21:}}function Il(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;bl(e,gl(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(St(o,""),n.flags&=-33),bl(e,gl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(s(161))}}catch(t){dc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function $l(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;$l(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Dl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Ml(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ml(t);break;case 1:fl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&cl(t,t.return,n),Ml(t);break;case 27:_d(t.stateNode);case 26:case 5:fl(t,t.return),Ml(t);break;case 22:null===t.memoizedState&&Ml(t);break;default:Ml(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Bl(i,o,n),sl(4,o);break;case 1:if(Bl(i,o,n),"function"==typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){dc(r,r.return,e)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],s)}catch(e){dc(r,r.return,e)}}n&&64&a&&ul(o),dl(o,o.return);break;case 27:vl(o);case 26:case 5:Bl(i,o,n),n&&null===r&&4&a&&hl(o),dl(o,o.return);break;case 12:Bl(i,o,n);break;case 13:Bl(i,o,n),n&&4&a&&Ll(i,o);break;case 22:null===o.memoizedState&&Bl(i,o,n),dl(o,o.return);break;case 30:break;default:Bl(i,o,n)}t=t.sibling}}function Fl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ni(n))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e))}function Wl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Wl(e,t,n,r),2048&i&&sl(9,t);break;case 1:case 13:default:Wl(e,t,n,r);break;case 3:Wl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e)));break;case 12:if(2048&i){Wl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){dc(t,t.return,e)}}else Wl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?Wl(e,t,n,r):Vl(e,t):2&o._visibility?Wl(e,t,n,r):(o._visibility|=2,ql(e,t,n,r,!!(10256&t.subtreeFlags))),2048&i&&Fl(a,t);break;case 24:Wl(e,t,n,r),2048&i&&Ul(t.alternate,t)}}function ql(e,t,n,r,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:ql(o,a,s,l,i),sl(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?ql(o,a,s,l,i):Vl(o,a):(c._visibility|=2,ql(o,a,s,l,i)),i&&2048&u&&Fl(a.alternate,a);break;case 24:ql(o,a,s,l,i),i&&2048&u&&Ul(a.alternate,a);break;default:ql(o,a,s,l,i)}t=t.sibling}}function Vl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Vl(n,r),2048&i&&Fl(r.alternate,r);break;case 24:Vl(n,r),2048&i&&Ul(r.alternate,r);break;default:Vl(n,r)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Wd)throw Error(s(475));var r=Wd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var i=Od(n.href),o=e.querySelector(Ld(i));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=qd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ve(o);o=e.ownerDocument||e,n=Ad(n),(i=Sd.get(i))&&$d(n,i),Ve(o=o.createElement("link"));var a=o;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=qd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Rl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Rl;Rl=Ed(e.stateNode.containerInfo),Gl(e),Rl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,eu(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Yl(e)}}function Zl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,eu(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function eu(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ni(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,xl=r;else e:for(n=e;null!==xl;){var i=(r=xl).sibling,o=r.return;if(Cl(r),r===n){xl=null;break e}if(null!==i){i.return=o,xl=i;break e}xl=o}}}var tu={getCacheForType:function(e){var t=Ti(zi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nu="function"==typeof WeakMap?WeakMap:Map,ru=0,iu=null,ou=null,au=0,su=0,lu=null,uu=!1,cu=!1,du=!1,fu=0,hu=0,pu=0,mu=0,gu=0,yu=0,bu=0,vu=null,wu=null,ku=!1,_u=0,Su=1/0,xu=null,Eu=null,Cu=0,Tu=null,ju=null,Pu=0,Ou=0,Lu=null,Au=null,zu=0,Ru=null;function Nu(){if(2&ru&&0!==au)return au&-au;if(null!==N.T){return 0!==Di?Di:Oc()}return Le()}function Iu(){0===yu&&(yu=536870912&au&&!ai?536870912:Se());var e=os.current;return null!==e&&(e.flags|=32),yu}function $u(e,t,n){(e!==iu||2!==su&&9!==su)&&null===e.cancelPendingCommit||(Hu(e,0),Fu(e,au,yu,!1)),Ce(e,n),2&ru&&e===iu||(e===iu&&(!(2&ru)&&(mu|=n),4===hu&&Fu(e,au,yu,!1)),Sc(e))}function Du(e,t,n){if(6&ru)throw Error(s(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||ke(e,t),i=r?function(e,t){var n=ru;ru|=2;var r=Vu(),i=Ku();iu!==e||au!==t?(xu=null,Su=ne()+500,Hu(e,t)):cu=ke(e,t);e:for(;;)try{if(0!==su&&null!==ou){t=ou;var o=lu;t:switch(su){case 1:su=0,lu=null,ec(e,t,o,1);break;case 2:case 9:if(Qi(o)){su=0,lu=null,Zu(t);break}t=function(){2!==su&&9!==su||iu!==e||(su=7),Sc(e)},o.then(t,t);break e;case 3:su=7;break e;case 4:su=5;break e;case 7:Qi(o)?(su=0,lu=null,Zu(t)):(su=0,lu=null,ec(e,t,o,7));break;case 5:var a=null;switch(ou.tag){case 26:a=ou.memoizedState;case 5:case 27:var l=ou;if(!a||Ud(a)){su=0,lu=null;var u=l.sibling;if(null!==u)ou=u;else{var c=l.return;null!==c?(ou=c,tc(c)):ou=null}break t}}su=0,lu=null,ec(e,t,o,5);break;case 6:su=0,lu=null,ec(e,t,o,6);break;case 8:Wu(),hu=6;break e;default:throw Error(s(462))}}Yu();break}catch(t){qu(e,t)}return vi=bi=null,N.H=r,N.A=i,ru=n,null!==ou?0:(iu=null,au=0,Pr(),hu)}(e,t):Ju(e,t,!0),o=r;;){if(0===i){cu&&!r&&Fu(e,t,0,!1);break}if(n=e.current.alternate,!o||Bu(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=vu;var u=l.current.memoizedState.isDehydrated;if(u&&(Hu(l,a).flags|=256),2!==(a=Ju(l,a,!1))){if(du&&!u){l.errorRecoveryDisabledLanes|=o,mu|=o,i=4;break e}o=wu,wu=i,null!==o&&(null===wu?wu=o:wu.push.apply(wu,o))}i=a}if(o=!1,2!==i)continue}}if(1===i){Hu(e,0),Fu(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Fu(r,t,yu,!uu);break e;case 2:wu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=_u+300-ne())){if(Fu(r,t,yu,!uu),0!==we(r,0,!0))break e;r.timeoutHandle=ud(Mu.bind(null,r,n,wu,xu,ku,t,yu,mu,bu,uu,o,2,-0,0),i)}else Mu(r,n,wu,xu,ku,t,yu,mu,bu,uu,o,0,-0,0)}break}i=Ju(e,t,!1),o=!1}Sc(e)}function Mu(e,t,n,r,i,o,a,l,u,c,d,f,h,p){if(e.timeoutHandle=-1,(8192&(f=t.subtreeFlags)||!(16785408&~f))&&(Wd={stylesheets:null,count:0,unsuspend:Hd},Jl(t),null!==(f=function(){if(null===Wd)throw Error(s(475));var e=Wd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=f(rc.bind(null,e,t,o,n,r,i,a,l,u,d,1,h,p)),void Fu(e,o,a,!c);rc(e,t,o,n,r,i,a,l,u)}function Bu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Qn(o(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fu(e,t,n,r){t&=~gu,t&=~mu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-pe(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&Te(e,n,t)}function Uu(){return!!(6&ru)||(xc(0,!1),!1)}function Wu(){if(null!==ou){if(0===su)var e=ou.return;else vi=bi=null,Mo(e=ou),Qa=null,Ya=0,e=ou;for(;null!==e;)al(e.alternate,e),e=e.return;ou=null}}function Hu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Wu(),iu=e,ou=n=Mr(e.current,null),au=t,su=0,lu=null,uu=!1,cu=ke(e,t),du=!1,bu=yu=gu=mu=pu=hu=0,wu=vu=null,ku=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-pe(r),o=1<<i;t|=e[i],r&=~o}return fu=t,Pr(),n}function qu(e,t){ko=null,N.H=Va,t===Vi||t===Gi?(t=eo(),su=3):t===Ki?(t=eo(),su=4):su=t===Ts?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,lu=t,null===ou&&(hu=1,_s(e,Er(t,e.current)))}function Vu(){var e=N.H;return N.H=Va,null===e?Va:e}function Ku(){var e=N.A;return N.A=tu,e}function Gu(){hu=4,uu||(4194048&au)!==au&&null!==os.current||(cu=!0),!(134217727&pu)&&!(134217727&mu)||null===iu||Fu(iu,au,yu,!1)}function Ju(e,t,n){var r=ru;ru|=2;var i=Vu(),o=Ku();iu===e&&au===t||(xu=null,Hu(e,t)),t=!1;var a=hu;e:for(;;)try{if(0!==su&&null!==ou){var s=ou,l=lu;switch(su){case 8:Wu(),a=6;break e;case 3:case 2:case 9:case 6:null===os.current&&(t=!0);var u=su;if(su=0,lu=null,ec(e,s,l,u),n&&cu){a=0;break e}break;default:u=su,su=0,lu=null,ec(e,s,l,u)}}Qu(),a=hu;break}catch(t){qu(e,t)}return t&&e.shellSuspendCounter++,vi=bi=null,ru=r,N.H=i,N.A=o,null===ou&&(iu=null,au=0,Pr()),a}function Qu(){for(;null!==ou;)Xu(ou)}function Yu(){for(;null!==ou&&!ee();)Xu(ou)}function Xu(e){var t=Xs(e.alternate,e,fu);e.memoizedProps=e.pendingProps,null===t?tc(e):ou=t}function Zu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=$s(n,t,t.pendingProps,t.type,void 0,au);break;case 11:t=$s(n,t,t.pendingProps,t.type.render,t.ref,au);break;case 5:Mo(t);default:al(n,t),t=Xs(n,t=ou=Br(t,fu),fu)}e.memoizedProps=e.pendingProps,null===t?tc(e):ou=t}function ec(e,t,n,r){vi=bi=null,Mo(t),Qa=null,Ya=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&xi(t,n,i,!0),null!==(n=os.current)){switch(n.tag){case 13:return null===as?Gu():null===n.alternate&&0===hu&&(hu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Ji?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),fc(e,r,i)),!1;case 22:return n.flags|=65536,r===Ji?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),fc(e,r,i)),!1}throw Error(s(435,n.tag))}return fc(e,r,i),Gu(),!1}if(ai)return null!==(t=os.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==ui&&gi(Er(e=Error(s(422),{cause:r}),n))):(r!==ui&&gi(Er(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Er(r,n),lo(e,i=xs(e.stateNode,r,i)),4!==hu&&(hu=2)),!1;var o=Error(s(520),{cause:r});if(o=Er(o,n),null===vu?vu=[o]:vu.push(o),4!==hu&&(hu=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,lo(n,e=xs(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==Eu&&Eu.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Cs(i=Es(i),e,n,r),lo(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,au))return hu=1,_s(e,Er(n,e.current)),void(ou=null)}catch(t){if(null!==i)throw ou=i,t;return hu=1,_s(e,Er(n,e.current)),void(ou=null)}32768&t.flags?(ai||1===r?e=!0:cu||536870912&au?e=!1:(uu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=os.current)&&13===r.tag&&(r.flags|=16384))),nc(t,e)):tc(t)}function tc(e){var t=e;do{if(32768&t.flags)return void nc(t,uu);e=t.return;var n=il(t.alternate,t,fu);if(null!==n)return void(ou=n);if(null!==(t=t.sibling))return void(ou=t);ou=t=e}while(null!==t);0===hu&&(hu=5)}function nc(e,t){do{var n=ol(e.alternate,e);if(null!==n)return n.flags&=32767,void(ou=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ou=e);ou=e=n}while(null!==e);hu=6,ou=null}function rc(e,t,n,r,i,o,a,l,u){e.cancelPendingCommit=null;do{lc()}while(0!==Cu);if(6&ru)throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-pe(n),d=1<<c;s[c]=0,l[c]=-1;var f=u[c];if(null!==f)for(u[c]=null,c=0;c<f.length;c++){var h=f[c];null!==h&&(h.lane&=-536870913)}n&=~d}0!==r&&Te(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,o|=jr,a,l,u),e===iu&&(ou=iu=null,au=0),ju=t,Tu=e,Pu=n,Ou=o,Lu=i,Au=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,X(ae,function(){return uc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=N.T,N.T=null,i=I.p,I.p=2,a=ru,ru|=4;try{!function(e,t){if(e=e.containerInfo,nd=rf,nr(e=tr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(l=a+i),f!==o||0!==r&&3!==f.nodeType||(u=a+r),3===f.nodeType&&(a+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++c===i&&(l=a),h===o&&++d===r&&(u=a),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rf=!1,xl=t;null!==xl;)if(e=(t=xl).child,1024&t.subtreeFlags&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(o=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=ys(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){dc(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{ru=a,I.p=i,N.T=r}}Cu=1,ic(),oc(),ac()}}function ic(){if(1===Cu){Cu=0;var e=Tu,t=ju,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=N.T,N.T=null;var r=I.p;I.p=2;var i=ru;ru|=4;try{Nl(t,e);var o=rd,a=tr(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&er(s.ownerDocument.documentElement,s)){if(null!==l&&nr(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var h=f.getSelection(),p=s.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!h.extend&&m>g&&(a=g,g=m,m=a);var y=Zn(s,m),b=Zn(s,g);if(y&&b&&(1!==h.rangeCount||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==b.node||h.focusOffset!==b.offset)){var v=d.createRange();v.setStart(y.node,y.offset),h.removeAllRanges(),m>g?(h.addRange(v),h.extend(b.node,b.offset)):(v.setEnd(b.node,b.offset),h.addRange(v))}}}}for(d=[],h=s;h=h.parentNode;)1===h.nodeType&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var w=d[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rf=!!nd,rd=nd=null}finally{ru=i,I.p=r,N.T=n}}e.current=t,Cu=2}}function oc(){if(2===Cu){Cu=0;var e=Tu,t=ju,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=N.T,N.T=null;var r=I.p;I.p=2;var i=ru;ru|=4;try{El(e,t.alternate,t)}finally{ru=i,I.p=r,N.T=n}}Cu=3}}function ac(){if(4===Cu||3===Cu){Cu=0,te();var e=Tu,t=ju,n=Pu,r=Au;10256&t.subtreeFlags||10256&t.flags?Cu=5:(Cu=0,ju=Tu=null,sc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Eu=null),Oe(n),t=t.stateNode,fe&&"function"==typeof fe.onCommitFiberRoot)try{fe.onCommitFiberRoot(de,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=N.T,i=I.p,I.p=2,N.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{N.T=t,I.p=i}}3&Pu&&lc(),Sc(e),i=e.pendingLanes,4194090&n&&42&i?e===Ru?zu++:(zu=0,Ru=e):zu=0,xc(0,!1)}}function sc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ni(t)))}function lc(e){return ic(),oc(),ac(),uc()}function uc(){if(5!==Cu)return!1;var e=Tu,t=Ou;Ou=0;var n=Oe(Pu),r=N.T,i=I.p;try{I.p=32>n?32:n,N.T=null,n=Lu,Lu=null;var o=Tu,a=Pu;if(Cu=0,ju=Tu=null,Pu=0,6&ru)throw Error(s(331));var l=ru;if(ru|=4,Xl(o.current),Hl(o,o.current,a,n),ru=l,xc(0,!1),fe&&"function"==typeof fe.onPostCommitFiberRoot)try{fe.onPostCommitFiberRoot(de,o)}catch(e){}return!0}finally{I.p=i,N.T=r,sc(e,t)}}function cc(e,t,n){t=Er(n,t),null!==(e=ao(e,t=xs(e.stateNode,t,2),2))&&(Ce(e,2),Sc(e))}function dc(e,t,n){if(3===e.tag)cc(e,e,n);else for(;null!==t;){if(3===t.tag){cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Eu||!Eu.has(r))){e=Er(n,e),null!==(r=ao(t,n=Es(2),2))&&(Cs(n,r,t,e),Ce(r,2),Sc(r));break}}t=t.return}}function fc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(du=!0,i.add(n),e=hc.bind(null,e,t,n),t.then(e,e))}function hc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,iu===e&&(au&n)===n&&(4===hu||3===hu&&(62914560&au)===au&&300>ne()-_u?!(2&ru)&&Hu(e,0):gu|=n,bu===au&&(bu=0)),Sc(e)}function pc(e,t){0===t&&(t=xe()),null!==(e=Ar(e,t))&&(Ce(e,t),Sc(e))}function mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pc(e,n)}function gc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),pc(e,n)}var yc=null,bc=null,vc=!1,wc=!1,kc=!1,_c=0;function Sc(e){e!==bc&&null===e.next&&(null===bc?yc=bc=e:bc=bc.next=e),wc=!0,vc||(vc=!0,fd(function(){6&ru?X(ie,Ec):Cc()}))}function xc(e,t){if(!kc&&wc){kc=!0;do{for(var n=!1,r=yc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-pe(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Pc(r,o))}else o=au,!(3&(o=we(r,r===iu?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ke(r,o)||(n=!0,Pc(r,o));r=r.next}}while(n);kc=!1}}function Ec(){Cc()}function Cc(){wc=vc=!1;var e=0;0!==_c&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=_c),_c=0);for(var t=ne(),n=null,r=yc;null!==r;){var i=r.next,o=Tc(r,t);0===o?(r.next=null,null===n?yc=i:n.next=i,null===i&&(bc=n)):(n=r,(0!==e||3&o)&&(wc=!0)),r=i}xc(e,!1)}function Tc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-pe(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=_e(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=au,n=we(e,e===(t=iu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===su||9===su)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Z(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||ke(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Z(r),Oe(n)){case 2:case 8:n=oe;break;case 32:default:n=ae;break;case 268435456:n=le}return r=jc.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Z(r),e.callbackPriority=2,e.callbackNode=null,2}function jc(e,t){if(0!==Cu&&5!==Cu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lc()&&e.callbackNode!==n)return null;var r=au;return 0===(r=we(e,e===iu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Du(e,r,t),Tc(e,ne()),null!=e.callbackNode&&e.callbackNode===n?jc.bind(null,e):null)}function Pc(e,t){if(lc())return null;Du(e,t,!0)}function Oc(){return 0===_c&&(_c=Se()),_c}function Lc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Ot(""+e)}function Ac(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var zc=0;zc<_r.length;zc++){var Rc=_r[zc];Sr(Rc.toLowerCase(),"on"+(Rc[0].toUpperCase()+Rc.slice(1)))}Sr(pr,"onAnimationEnd"),Sr(mr,"onAnimationIteration"),Sr(gr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(yr,"onTransitionRun"),Sr(br,"onTransitionStart"),Sr(vr,"onTransitionCancel"),Sr(wr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Je("onBeforeInput",["compositionend","keypress","textInput","paste"]),Je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ic=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nc));function $c(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(e){bs(e)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(e){bs(e)}i.currentTarget=null,o=l}}}}function Dc(e,t){var n=t[Ie];void 0===n&&(n=t[Ie]=new Set);var r=e+"__bubble";n.has(r)||(Uc(t,e,2,!1),n.add(r))}function Mc(e,t,n){var r=0;t&&(r|=4),Uc(n,e,r,t)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Fc(e){if(!e[Bc]){e[Bc]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Ic.has(t)||Mc(t,!1,e),Mc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bc]||(t[Bc]=!0,Mc("selectionchange",!1,t))}}function Uc(e,t,n,r){switch(df(t)){case 2:var i=of;break;case 8:i=af;break;default:i=sf}n=i.bind(null,t,n,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wc(e,t,n,r,i){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==s;){if(null===(a=Ue(s)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=o=a;continue e}s=s.parentNode}}r=r.return}$t(function(){var r=o,i=At(n),a=[];e:{var s=kr.get(e);if(void 0!==s){var l=en,c=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":l=gn;break;case"focusin":c="focus",l=sn;break;case"focusout":c="blur",l=sn;break;case"beforeblur":case"afterblur":l=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=bn;break;case pr:case mr:case gr:l=ln;break;case wr:l=vn;break;case"scroll":case"scrollend":l=nn;break;case"wheel":l=wn;break;case"copy":case"cut":case"paste":l=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=yn;break;case"toggle":case"beforetoggle":l=kn}var d=!!(4&t),f=!d&&("scroll"===e||"scrollend"===e),h=d?null!==s?s+"Capture":null:s;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===h||null!=(g=Dt(m,h))&&d.push(Hc(m,g,p)),f)break;m=m.return}0<d.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:d}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Lt||!(c=n.relatedTarget||n.fromElement)||!Ue(c)&&!c[Ne])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ue(c):null)&&(f=u(c),d=c.tag,c!==f||5!==d&&27!==d&&6!==d)&&(c=null)):(l=null,c=r),l!==c)){if(d=on,g="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",h="onPointerEnter",m="pointer"),f=null==l?s:He(l),p=null==c?s:He(c),(s=new d(g,m+"leave",l,n,i)).target=f,s.relatedTarget=p,g=null,Ue(i)===r&&((d=new d(h,m+"enter",c,n,i)).target=p,d.relatedTarget=f,g=d),f=g,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Vc(p))m++;for(p=0,g=h;g;g=Vc(g))p++;for(;0<m-p;)d=Vc(d),m--;for(;0<p-m;)h=Vc(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Vc(d),h=Vc(h)}d=null}else d=null;null!==l&&Kc(a,s,l,d,!1),null!==c&&null!==f&&Kc(a,f,c,d,!0)}if("select"===(l=(s=r?He(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Mn;else if(zn(s))if(Bn)y=Jn;else{y=Kn;var b=Vn}else!(l=s.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Tt(r.elementType)&&(y=Mn):y=Gn;switch(y&&(y=y(e,r))?Rn(a,y,n,i):(b&&b(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),b=r?He(r):window,e){case"focusin":(zn(b)||"true"===b.contentEditable)&&(ir=b,or=r,ar=null);break;case"focusout":ar=or=ir=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,lr(a,n,i);break;case"selectionchange":if(rr)break;case"keydown":case"keyup":lr(a,n,i)}var v;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ln?Pn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==w?"onCompositionEnd"===w&&Ln&&(v=qt()):(Wt="value"in(Ut=i)?Ut.value:Ut.textContent,Ln=!0)),0<(b=qc(r,w)).length&&(w=new cn(w,e,null,n,i),a.push({event:w,listeners:b}),v?w.data=v:null!==(v=On(n))&&(w.data=v))),(v=En?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(jn=!0,Tn);case"textInput":return(e=t.data)===Tn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!Sn&&Pn(e,t)?(e=qt(),Ht=Wt=Ut=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=qc(r,"onBeforeInput")).length&&(b=new cn("onBeforeInput","beforeinput",null,n,i),a.push({event:b,listeners:w}),b.data=v)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Lc((i[Re]||null).action),a=r.submitter;a&&null!==(t=(t=a[Re]||null)?Lc(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new en("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==_c){var e=a?Ac(i,a):new FormData(i);Aa(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"==typeof o&&(s.preventDefault(),e=a?Ac(i,a):new FormData(i),Aa(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,r,n,i)}$c(a,t)})}function Hc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Dt(e,n))&&r.unshift(Hc(e,i,o)),null!=(i=Dt(e,t))&&r.push(Hc(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Vc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Kc(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=Dt(n,o))&&a.unshift(Hc(n,u,l)):i||null!=(u=Dt(n,o))&&a.push(Hc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gc=/\r\n?/g,Jc=/\u0000|\uFFFD/g;function Qc(e){return("string"==typeof e?e:""+e).replace(Gc,"\n").replace(Jc,"")}function Yc(e,t){return t=Qc(t),Qc(e)===t}function Xc(){}function Zc(e,t,n,r,i,o){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&St(e,""+r);break;case"className":rt(e,"class",r);break;case"tabIndex":rt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,n,r);break;case"style":Ct(e,r,o);break;case"data":if("object"!==t){rt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===n?("input"!==t&&Zc(e,t,"name",i.name,i,null),Zc(e,t,"formEncType",i.formEncType,i,null),Zc(e,t,"formMethod",i.formMethod,i,null),Zc(e,t,"formTarget",i.formTarget,i,null)):(Zc(e,t,"encType",i.encType,i,null),Zc(e,t,"method",i.method,i,null),Zc(e,t,"target",i.target,i,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"onScroll":null!=r&&Dc("scroll",e);break;case"onScrollEnd":null!=r&&Dc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Ot(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Dc("beforetoggle",e),Dc("toggle",e),nt(e,"popover",r);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":nt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&nt(e,n=jt.get(n)||n,r)}}function ed(e,t,n,r,i,o){switch(n){case"style":Ct(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"==typeof r?St(e,r):("number"==typeof r||"bigint"==typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Dc("scroll",e);break;case"onScrollEnd":null!=r&&Dc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(o=null!=(o=e[Re]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):nt(e,n,r):("function"!=typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dc("error",e),Dc("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Zc(e,t,r,a,n,null)}}return o&&Zc(e,t,"srcSet",n.srcSet,n,null),void(i&&Zc(e,t,"src",n.src,n,null));case"input":Dc("invalid",e);var l=r=a=o=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Zc(e,t,i,d,n,null)}}return bt(e,r,l,u,c,a,o,!1),void ft(e);case"select":for(o in Dc("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Zc(e,t,o,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Dc("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Zc(e,t,a,l,n,null)}return _t(e,i,o,r),void ft(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i;else Zc(e,t,u,i,n,null);return;case"dialog":Dc("beforetoggle",e),Dc("toggle",e),Dc("cancel",e),Dc("close",e);break;case"iframe":case"object":Dc("load",e);break;case"video":case"audio":for(i=0;i<Nc.length;i++)Dc(Nc[i],e);break;case"image":Dc("error",e),Dc("load",e);break;case"details":Dc("toggle",e);break;case"embed":case"source":case"link":Dc("error",e),Dc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Zc(e,t,c,i,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&ed(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zc(e,t,l,i,n,null))}var nd=null,rd=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function od(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var ud="function"==typeof setTimeout?setTimeout:void 0,cd="function"==typeof clearTimeout?clearTimeout:void 0,dd="function"==typeof Promise?Promise:void 0,fd="function"==typeof queueMicrotask?queueMicrotask:void 0!==dd?function(e){return dd.resolve(null).then(e).catch(hd)}:ud;function hd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&_d(a.documentElement),2&n&&_d(a.body),4&n)for(_d(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void Pf(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Pf(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Fe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function kd(e,t,n){switch(t=id(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function _d(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Fe(e)}var Sd=new Map,xd=new Set;function Ed(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=I.d;I.d={f:function(){var e=Cd.f(),t=Uu();return e||t},r:function(e){var t=We(e);null!==t&&5===t.tag&&"form"===t.type?Ra(t):Cd.r(e)},D:function(e){Cd.D(e),jd("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),jd("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=Td;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var o=i;switch(t){case"style":o=Od(e);break;case"script":o=zd(e)}Sd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Ld(o))||"script"===t&&r.querySelector(Rd(o))||(td(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=Td;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=zd(e)}if(!Sd.has(o)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rd(o)))return}td(r=n.createElement("link"),"link",e),Ve(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=Td;if(n&&e){var r=qe(n).hoistableScripts,i=zd(e),o=r.get(i);o||((o=n.querySelector(Rd(i)))||(e=h({src:e,async:!0},t),(t=Sd.get(i))&&Dd(e,t),Ve(o=n.createElement("script")),td(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Cd.S(e,t,n);var r=Td;if(r&&e){var i=qe(r).hoistableStyles,o=Od(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Ld(o)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(o))&&$d(e,n);var l=a=r.createElement("link");Ve(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Id(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Cd.M(e,t);var n=Td;if(n&&e){var r=qe(n).hoistableScripts,i=zd(e),o=r.get(i);o||((o=n.querySelector(Rd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(i))&&Dd(e,t),Ve(o=n.createElement("script")),td(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Td="undefined"==typeof document?null:document;function jd(e,t,n){var r=Td;if(r&&"string"==typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),xd.has(i)||(xd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(td(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}}function Pd(e,t,n,r){var i,o,a,l,u=(u=q.current)?Ed(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Od(n.href),(r=(n=qe(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Od(n.href);var c=qe(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Ld(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),c||(i=u,o=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),td(o,"link",a),Ve(o),i.head.appendChild(o))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=zd(n),(r=(n=qe(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Od(e){return'href="'+gt(e)+'"'}function Ld(e){return'link[rel="stylesheet"]['+e+"]"}function Ad(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function zd(e){return'[src="'+gt(e)+'"]'}function Rd(e){return"script[async]"+e}function Nd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ve(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ve(r=(e.ownerDocument||e).createElement("style")),td(r,"style",i),Id(r,n.precedence,e),t.instance=r;case"stylesheet":i=Od(n.href);var o=e.querySelector(Ld(i));if(o)return t.state.loading|=4,t.instance=o,Ve(o),o;r=Ad(n),(i=Sd.get(i))&&$d(r,i),Ve(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(o,"link",r),t.state.loading|=4,Id(o,n.precedence,e),t.instance=o;case"script":return o=zd(n.src),(i=e.querySelector(Rd(o)))?(t.instance=i,Ve(i),i):(r=n,(i=Sd.get(o))&&Dd(r=h({},n),i),Ve(i=(e=e.ownerDocument||e).createElement("script")),td(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Id(r,n.precedence,e));return t.instance}function Id(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $d(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Md=null;function Bd(e,t,n){if(null===Md){var r=new Map,i=Md=new Map;i.set(n,r)}else(r=(i=Md).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Be]||o[ze]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Fd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ud(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Wd=null;function Hd(){}function qd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vd=new Map,t.forEach(Gd,e),Vd=null,qd.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=Vd.get(e);if(n)var r=n.get(null);else{n=new Map,Vd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=qd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Jd={$$typeof:_,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function Qd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Yd(e,t,n,r,i,o,a,s,l,u,c,d){return e=new Qd(e,t,n,a,s,l,u,d),t=1,!0===o&&(t|=24),o=$r(3,null,null,t),e.current=o,o.stateNode=e,(t=Ri()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},ro(o),e}function Xd(e){return e?e=Nr:Nr}function Zd(e,t,n,r,i,o){i=Xd(i),null===r.context?r.context=i:r.pendingContext=i,(r=oo(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=ao(e,r,t))&&($u(n,0,t),so(n,e,t))}function ef(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tf(e,t){ef(e,t),(e=e.alternate)&&ef(e,t)}function nf(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&$u(t,0,67108864),tf(e,67108864)}}var rf=!0;function of(e,t,n,r){var i=N.T;N.T=null;var o=I.p;try{I.p=2,sf(e,t,n,r)}finally{I.p=o,N.T=i}}function af(e,t,n,r){var i=N.T;N.T=null;var o=I.p;try{I.p=8,sf(e,t,n,r)}finally{I.p=o,N.T=i}}function sf(e,t,n,r){if(rf){var i=lf(r);if(null===i)Wc(e,t,r,uf,n),wf(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hf=kf(hf,e,t,n,r,i),!0;case"dragenter":return pf=kf(pf,e,t,n,r,i),!0;case"mouseover":return mf=kf(mf,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return gf.set(o,kf(gf.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,yf.set(o,kf(yf.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(wf(e,r),4&t&&-1<vf.indexOf(e)){for(;null!==i;){var o=We(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ve(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-pe(a);s.entanglements[1]|=l,a&=~l}Sc(o),!(6&ru)&&(Su=ne()+500,xc(0,!1))}}break;case 13:null!==(s=Ar(o,2))&&$u(s,0,2),Uu(),tf(o,2)}if(null===(o=lf(r))&&Wc(e,t,r,uf,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wc(e,t,r,null,n)}}function lf(e){return cf(e=At(e))}var uf=null;function cf(e){if(uf=null,null!==(e=Ue(e))){var t=u(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return uf=e,null}function df(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ie:return 2;case oe:return 8;case ae:case se:return 32;case le:return 268435456;default:return 32}default:return 32}}var ff=!1,hf=null,pf=null,mf=null,gf=new Map,yf=new Map,bf=[],vf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wf(e,t){switch(e){case"focusin":case"focusout":hf=null;break;case"dragenter":case"dragleave":pf=null;break;case"mouseover":case"mouseout":mf=null;break;case"pointerover":case"pointerout":gf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yf.delete(t.pointerId)}}function kf(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=We(t))&&nf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function _f(e){var t=Ue(e.target);if(null!==t){var n=u(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}(e.priority,function(){if(13===n.tag){var e=Nu();e=Pe(e);var t=Ar(n,e);null!==t&&$u(t,0,e),tf(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=lf(e.nativeEvent);if(null!==n)return null!==(t=We(n))&&nf(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Lt=r,n.target.dispatchEvent(r),Lt=null,t.shift()}return!0}function xf(e,t,n){Sf(e)&&n.delete(t)}function Ef(){ff=!1,null!==hf&&Sf(hf)&&(hf=null),null!==pf&&Sf(pf)&&(pf=null),null!==mf&&Sf(mf)&&(mf=null),gf.forEach(xf),yf.forEach(xf)}function Cf(e,t){e.blockedOn===t&&(e.blockedOn=null,ff||(ff=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ef)))}var Tf=null;function jf(e){Tf!==e&&(Tf=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Tf===e&&(Tf=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===cf(r||n))continue;break}var o=We(n);null!==o&&(e.splice(t,3),t-=3,Aa(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Pf(e){function t(t){return Cf(t,e)}null!==hf&&Cf(hf,e),null!==pf&&Cf(pf,e),null!==mf&&Cf(mf,e),gf.forEach(t),yf.forEach(t);for(var n=0;n<bf.length;n++){var r=bf[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<bf.length&&null===(n=bf[0]).blockedOn;)_f(n),null===n.blockedOn&&bf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[Re]||null;if("function"==typeof o)a||jf(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[Re]||null)s=a.formAction;else if(null!==cf(i))continue}else s=a.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),jf(n)}}}function Of(e){this._internalRoot=e}function Lf(e){this._internalRoot=e}Lf.prototype.render=Of.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Zd(t.current,Nu(),e,t,null,null)},Lf.prototype.unmount=Of.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Uu(),t[Ne]=null}},Lf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bf.length&&0!==t&&t<bf[n].priority;n++);bf.splice(n,0,e),0===n&&_f(e)}};var Af=o.version;if("19.1.0"!==Af)throw Error(s(527,Af,"19.1.0"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=u(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return d(i),e;if(o===r)return d(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?f(e):null)?null:e.stateNode};var zf={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{de=Rf.inject(zf),fe=Rf}catch(e){}}t.createRoot=function(e,t){if(!l(e))throw Error(s(299));var n=!1,r="",i=vs,o=ws,a=ks;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(a=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,i,o,a,0,null),e[Ne]=t.current,Fc(e),new Of(t)},t.hydrateRoot=function(e,t,n){if(!l(e))throw Error(s(299));var r=!1,i="",o=vs,a=ws,u=ks,c=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(a=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Yd(e,1,!0,t,0,r,i,o,a,u,0,c)).context=Xd(null),n=t.current,(i=oo(r=Pe(r=Nu()))).callback=null,ao(n,i,r),n=r,t.current.lanes=n,Ce(t,n),Sc(t),e[Ne]=t.current,Fc(e),new Lf(t)},t.version="19.1.0"},261:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(660));class o extends i.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=void 0===r?"offset":`${r}.offset`,o=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${s};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}t.default=o},279:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(n(342));t.PostgrestClient=i.default;const o=r(n(45));t.PostgrestQueryBuilder=o.default;const a=r(n(825));t.PostgrestFilterBuilder=a.default;const s=r(n(261));t.PostgrestTransformBuilder=s.default;const l=r(n(660));t.PostgrestBuilder=l.default;const u=r(n(818));t.PostgrestError=u.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:u.default}},338:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){}}(),e.exports=n(247)},342:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(45)),o=r(n(825));class a{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){var a;let s;const l=new URL(`${this.url}/rpc/${e}`);let u;n||r?(s=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(s="POST",u=t);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new o.default({method:s,url:l,headers:c,schema:this.schemaName,body:u,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}}t.default=a},477:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,y=!1,b="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,w="undefined"!=typeof setImmediate?setImmediate:null;function k(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,k(e),!m)if(null!==r(u))m=!0,x||(x=!0,S());else{var t=r(c);null!==t&&A(_,t.startTime-e)}}var S,x=!1,E=-1,C=5,T=-1;function j(){return!!y||!(t.unstable_now()-T<C)}function P(){if(y=!1,x){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,v(E),E=-1),p=!0;var o=h;try{t:{for(k(e),f=r(u);null!==f&&!(f.expirationTime>e&&j());){var a=f.callback;if("function"==typeof a){f.callback=null,h=f.priorityLevel;var s=a(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof s){f.callback=s,k(e),n=!0;break t}f===r(u)&&i(u),k(e)}else i(u);f=r(u)}if(null!==f)n=!0;else{var l=r(c);null!==l&&A(_,l.startTime-e),n=!1}}break e}finally{f=null,h=o,p=!1}n=void 0}}finally{n?S():x=!1}}}if("function"==typeof w)S=function(){w(P)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,L=O.port2;O.port1.onmessage=P,S=function(){L.postMessage(null)}}else S=function(){b(P,0)};function A(e,n){E=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(v(E),E=-1):g=!0,A(_,o-a))):(e.sortIndex=s,n(u,e),m||p||(m=!0,x||(x=!0,S()))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},490:(e,t,n)=>{"use strict";n.d(t,{UU:()=>Zt});class r extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class i extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class o extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var s;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(s||(s={}));var l=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class u{constructor(e,{headers:t={},customFetch:r,region:i=s.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,907)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return l(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:l}=t;let u={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);let f;c&&"any"!==c&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c)),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=l):"string"==typeof l?(u["Content-Type"]="text/plain",f=l):"undefined"!=typeof FormData&&l instanceof FormData?f=l:(u["Content-Type"]="application/json",f=JSON.stringify(l)));const h=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),r),body:f}).catch(e=>{throw new i(e)}),p=h.headers.get("x-relay-error");if(p&&"true"===p)throw new o(h);if(!h.ok)throw new a(h);let m,g=(null!==(n=h.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return m="application/json"===g?yield h.json():"application/octet-stream"===g?yield h.blob():"text/event-stream"===g?h:"multipart/form-data"===g?yield h.formData():yield h.text(),{data:m,error:null,response:h}}catch(e){return{data:null,error:e,response:e instanceof a||e instanceof o?e.context:void 0}}})}}var c=n(279);const{PostgrestClient:d,PostgrestQueryBuilder:f,PostgrestFilterBuilder:h,PostgrestTransformBuilder:p,PostgrestBuilder:m,PostgrestError:g}=c;var y=n(606);const b=class{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==n.g&&void 0!==n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(void 0!==y&&y.versions&&y.versions.node){const e=parseInt(y.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},v=1e4;var w,k,_,S,x,E;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(w||(w={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(k||(k={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(_||(_={})),function(e){e.websocket="websocket"}(S||(S={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(x||(x={}));class C{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o+=r;const s=n.decode(e.slice(o,o+i));o+=i;return{ref:null,topic:a,event:s,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}class T{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(E||(E={}));const j=(e,t,n={})=>{var r;const i=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((n,r)=>(n[r]=P(r,e,t,i),n),{})},P=(e,t,n,r)=>{const i=t.find(t=>t.name===e),o=null==i?void 0:i.type,a=n[e];return o&&!r.includes(o)?O(o,a):L(a)},O=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return N(t,n)}switch(e){case E.bool:return A(t);case E.float4:case E.float8:case E.int2:case E.int4:case E.int8:case E.numeric:case E.oid:return z(t);case E.json:case E.jsonb:return R(t);case E.timestamp:return I(t);case E.abstime:case E.date:case E.daterange:case E.int4range:case E.int8range:case E.money:case E.reltime:case E.text:case E.time:case E.timestamptz:case E.timetz:case E.tsrange:case E.tstzrange:default:return L(t)}},L=e=>e,A=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},z=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},R=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},N=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(e){r=i?i.split(","):[]}return r.map(e=>O(t,e))}return e},I=e=>"string"==typeof e?e.replace(" ","T"):e,$=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class D{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var M,B,F,U;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(M||(M={}));class W{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=W.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=W.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=W.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},s={};return this.map(i,(e,t)=>{o[e]||(s[e]=t)}),this.map(o,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),o=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);o.length>0&&(a[e]=o),l.length>0&&(s[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const o=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),o.length>0){const n=e[t].map(e=>e.presence_ref),r=o.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,o,r)}),this.map(o,(t,n)=>{let i=e[t];if(!i)return;const o=n.map(e=>e.presence_ref);i=i.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(B||(B={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(F||(F={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(U||(U={}));class H{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=k.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new D(this,_.join,this.params,this.timeout),this.rejoinTimer=new T(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=k.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=k.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=k.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=k.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=k.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new W(this),this.broadcastEndpointURL=$(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==k.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,s=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[F.PRESENCE]&&this.bindings[F.PRESENCE].length>0,u={},c={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:l}),postgres_changes:s,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(U.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(U.CLOSED)),this.updateJoinPayload(Object.assign({config:c},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,i=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,o=[];for(let n=0;n<i;n++){const i=r[n],{filter:{event:a,schema:s,table:l,filter:u}}=i,c=t&&t[n];if(!c||c.event!==a||c.schema!==s||c.table!==l||c.filter!==u)return this.unsubscribe(),this.state=k.errored,void(null==e||e(U.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:c.id}))}return this.bindings.postgres_changes=o,void(e&&e(U.SUBSCRIBED))}null==e||e(U.SUBSCRIBED)}).receive("error",t=>{this.state=k.errored,null==e||e(U.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(U.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===k.joined&&e===F.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,o;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=k.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new D(this,_.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=k.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new D(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:s,leave:l,join:u}=_;if(n&&[a,s,l,u].indexOf(o)>=0&&n!==this._joinRef())return;let c=this._onMessage(o,t,n);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===o}).map(e=>e.callback(c,n)):null===(i=this.bindings[o])||void 0===i||i.filter(e=>{var n,r,i,a,s,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return o&&(null===(r=t.ids)||void 0===r?void 0:r.includes(o))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(s=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"==typeof c&&"ids"in c){const e=c.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:o}=e,a={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:o};c=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(c,n)})}_isClosed(){return this.state===k.closed}_isJoined(){return this.state===k.joined}_isJoining(){return this.state===k.joining}_isLeaving(){return this.state===k.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&H.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_.close,{},e)}_onError(e){this._on(_.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=k.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=j(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=j(e.columns,e.old_record)),t}}const q=()=>{},V=25e3,K=10,G=100,J=[1e3,2e3,5e3,1e4];class Q{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=v,this.transport=null,this.heartbeatIntervalMs=V,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q,this.ref=0,this.reconnectTimer=null,this.logger=q,this.conn=null,this.sendBuffer=[],this.serializer=new C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,907)).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${S.websocket}`,this.httpEndpoint=$(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=b.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case w.connecting:return x.Connecting;case w.open:return x.Open;case w.closing:return x.Closing;default:return x.Closed}}isConnected(){return this.connectionState()===x.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new H(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},G);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:i}=e,o=i?`(${i})`:"",a=r.status||"";this.log("receive",`${a} ${t} ${n} ${o}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(_.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(_.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new T(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},K)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,i,o,a,s,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:v,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:V,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(o=null==e?void 0:e.accessToken)&&void 0!==o?o:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null==e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>J[e-1]||1e4,this.encode=null!==(s=null==e?void 0:e.encode)&&void 0!==s?s:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Z extends Y{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ee extends Y{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var te=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ne=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,907)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=re(n)}),t};var ie=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const oe=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ae=(e,t,r)=>ie(void 0,void 0,void 0,function*(){const i=yield te(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(n.bind(n,907))).Response:Response});e instanceof i&&!(null==r?void 0:r.noResolveJson)?e.json().then(n=>{const r=e.status||500,i=(null==n?void 0:n.statusCode)||r+"";t(new Z(oe(n),r,i))}).catch(e=>{t(new ee(oe(e),e))}):t(new ee(oe(e),e))}),se=(e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n)):i};function le(e,t,n,r,i,o){return ie(this,void 0,void 0,function*(){return new Promise((a,s)=>{e(n,se(t,r,i,o)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>ae(e,s,r))})})}function ue(e,t,n,r){return ie(this,void 0,void 0,function*(){return le(e,"GET",t,n,r)})}function ce(e,t,n,r,i){return ie(this,void 0,void 0,function*(){return le(e,"POST",t,r,i,n)})}function de(e,t,n,r,i){return ie(this,void 0,void 0,function*(){return le(e,"PUT",t,r,i,n)})}function fe(e,t,n,r,i){return ie(this,void 0,void 0,function*(){return le(e,"DELETE",t,r,i,n)})}var he=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const pe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},me={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ge{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=ne(r)}uploadOrUpdate(e,t,n,r){return he(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},me),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const s=o.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),s&&i.append("metadata",this.encodeMetadata(s)),i.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),s&&i.append("metadata",this.encodeMetadata(s))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,s&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null==r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield("PUT"==e?de:ce)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},(null==o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:l,id:c.Id,fullPath:c.Key},error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}upload(e,t,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return he(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:me.upsert},r),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]=`max-age=${t.cacheControl}`,o["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield de(this.fetch,a.toString(),e,{headers:o})).Key},error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return he(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield ce(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Y("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}update(e,t,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return he(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}copy(e,t,n){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,n){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ce(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,n){return he(this,void 0,void 0,function*(){try{const r=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}download(e,t){return he(this,void 0,void 0,function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield ue(this.fetch,`${this.url}/${n}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}info(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield ue(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:re(e),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}exists(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return ie(this,void 0,void 0,function*(){return le(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(X(e)&&e instanceof ee){const t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const o=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&r.push(a);let s=r.join("&");return""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}list(e,t,n){return he(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},pe),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}listV2(e,t){return he(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ce(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ye={"X-Client-Info":"storage-js/2.11.0"};var be=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class ve{constructor(e,t={},n,r){const i=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href,this.headers=Object.assign(Object.assign({},ye),t),this.fetch=ne(n)}listBuckets(){return be(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}getBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}createBucket(e,t={public:!1}){return be(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return be(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}emptyBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}deleteBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}}class we extends ve{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new ge(this.url,this.headers,e,this.fetch)}}let ke="";ke="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const _e={headers:{"X-Client-Info":`supabase-js-${ke}/2.56.0`}},Se={schema:"public"},xe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ee={};var Ce=n(907),Te=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const je=e=>{let t;return t=e||("undefined"==typeof fetch?Ce.default:fetch),(...e)=>t(...e)},Pe=(e,t,n)=>{const r=je(n),i="undefined"==typeof Headers?Ce.Headers:Headers;return(n,o)=>Te(void 0,void 0,void 0,function*(){var a;const s=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null==o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${s}`),r(n,Object.assign(Object.assign({},o),{headers:l}))})};var Oe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Le="2.71.1",Ae=3e4,ze=9e4,Re={"X-Client-Info":`gotrue-js/${Le}`},Ne="X-Supabase-Api-Version",Ie={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},$e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class De extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Me(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Be extends De{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Fe extends De{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ue extends De{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class We extends Ue{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class He extends Ue{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qe extends Ue{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ve extends Ue{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ke extends Ue{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ge extends Ue{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Je(e){return Me(e)&&"AuthRetryableFetchError"===e.name}class Qe extends Ue{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Ye extends Ue{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ze=" \t\n\r=".split(""),et=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ze.length;t+=1)e[Ze[t].charCodeAt(0)]=-2;for(let t=0;t<Xe.length;t+=1)e[Xe[t].charCodeAt(0)]=t;return e})();function tt(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Xe[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Xe[e]),t.queuedBits-=6}}function nt(e,t,n){const r=et[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function rt(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let t=0;t<e.length;t+=1)nt(e.charCodeAt(t),i,o);return t.join("")}function it(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function ot(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}it(r,t)}}function at(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)nt(e.charCodeAt(t),n,r);return new Uint8Array(t)}function st(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>tt(e,n,r)),tt(null,n,r),t.join("")}const lt=()=>"undefined"!=typeof window&&"undefined"!=typeof document,ut={tested:!1,writable:!1},ct=()=>{if(!lt())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(ut.tested)return ut.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ut.tested=!0,ut.writable=!0}catch(e){ut.tested=!0,ut.writable=!1}return ut.writable};const dt=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,907)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},ft=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ht=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},pt=async(e,t)=>{await e.removeItem(t)};class mt{constructor(){this.promise=new mt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function gt(e){const t=e.split(".");if(3!==t.length)throw new Ye("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!$e.test(t[e]))throw new Ye("JWT not in base64url format");return{header:JSON.parse(rt(t[0])),payload:JSON.parse(rt(t[1])),signature:at(t[2]),raw:{header:t[0],payload:t[1]}}}function yt(e){return("0"+e.toString(16)).substr(-2)}async function bt(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vt(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,yt).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await ft(e,`${t}-code-verifier`,i);const o=await bt(r);return[o,r===o?"plain":"s256"]}mt.promiseConstructor=Promise;const wt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const kt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _t(e){if(!kt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function St(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xt(e){return JSON.parse(JSON.stringify(e))}var Et=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Ct=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Tt=[502,503,504];async function jt(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new Ge(Ct(e),0);if(Tt.includes(e.status))throw new Ge(Ct(e),e.status);let r,i;try{r=await e.json()}catch(e){throw new Fe(Ct(e),e)}const o=function(e){const t=e.headers.get(Ne);if(!t)return null;if(!t.match(wt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(o&&o.getTime()>=Ie.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new Qe(Ct(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new We}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Qe(Ct(r),e.status,r.weak_password.reasons);throw new Be(Ct(r),e.status||500,i)}async function Pt(e,t,n,r){var i;const o=Object.assign({},null==r?void 0:r.headers);o[Ne]||(o[Ne]=Ie.name),(null==r?void 0:r.jwt)&&(o.Authorization=`Bearer ${r.jwt}`);const a=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,i,o){const a=((e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,o);let s;try{s=await e(n,Object.assign({},a))}catch(e){throw new Ge(Ct(e),0)}s.ok||await jt(s);if(null==r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(e){await jt(e)}}(e,t,n+s,{headers:o,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Ot(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Lt(e){const t=Ot(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function At(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function zt(e){return{data:e,error:null}}function Rt(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=Et(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},user:Object.assign({},a)},error:null}}function Nt(e){return e}const It=["global","local","others"];var $t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Dt{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=dt(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=It[0]){if(It.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${It.join(", ")}`);try{return await Pt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Me(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await Pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:At})}catch(e){if(Me(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=$t(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await Pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Rt,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Me(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await Pt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:At})}catch(e){if(Me(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,r,i,o,a,s;try{const l={nextPage:null,lastPage:0,total:0},u=await Pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:Nt});if(u.error)throw u.error;const c=await u.json(),d=null!==(o=u.headers.get("x-total-count"))&&void 0!==o?o:0,f=null!==(s=null===(a=u.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==s?s:[];return f.length>0&&(f.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(e){if(Me(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){_t(e);try{return await Pt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:At})}catch(e){if(Me(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){_t(e);try{return await Pt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:At})}catch(e){if(Me(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){_t(e);try{return await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:At})}catch(e){if(Me(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){_t(e.userId);try{const{data:t,error:n}=await Pt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(Me(e))return{data:null,error:e};throw e}}async _deleteFactor(e){_t(e.userId),_t(e.id);try{return{data:await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Me(e))return{data:null,error:e};throw e}}}function Mt(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Bt=!!(globalThis&&ct()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ft extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ut extends Ft{}async function Wt(e,t,n){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw new Ut(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Bt)try{await globalThis.navigator.locks.query()}catch(e){}return await n()}try{return await n()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Ht={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Re,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qt(e,t,n){return await n()}const Vt={};class Kt{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kt.nextInstanceID,Kt.nextInstanceID+=1,this.instanceID>0&&lt();const r=Object.assign(Object.assign({},Ht),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Dt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=dt(r.fetch),this.lock=r.lock||qt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:lt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=qt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:ct()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mt(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Mt(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Vt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Vt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Le}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(e){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),lt()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Me(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Me(e)?{error:e}:{error:new Fe("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ot}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:o}=e;let a=null,s=null;"pkce"===this.flowType&&([a,s]=await vt(this.storage,this.storageKey)),i=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==o?void 0:o.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:a,code_challenge_method:s},xform:Ot})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:a}=e;i=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:o,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null==a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Ot})}}const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Lt})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Lt})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new He}}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,o,a,s,l,u,c,d,f;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:d,wallet:f,statement:m,options:g}=e;let y;if(lt())if("object"==typeof f)y=f;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!=typeof f||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=f}const b=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");h="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y&&"function"==typeof y.signMessage&&"publicKey"in y&&"object"==typeof y&&y.publicKey&&"toBase58"in y.publicKey&&"function"==typeof y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${b.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(c=null===(u=null==g?void 0:g.signInWithSolana)||void 0===u?void 0:u.resources)||void 0===c?void 0:c.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(h),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:st(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(f=e.options)||void 0===f?void 0:f.captchaToken}}:null),xform:Ot});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new He}}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async _exchangeCodeForSession(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ot});if(await pt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new He}}catch(e){if(Me(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,a=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ot}),{data:s,error:l}=a;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new He}}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:r,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await vt(this.storage,this.storageKey));const{error:s}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null==i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:s}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null==n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(o=null==n?void 0:n.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:s}}throw new qe("You must provide either an email or phone number.")}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:o,error:a}=await Pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Ot});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const s=o.session,l=o.user;return(null==s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return"pkce"===this.flowType&&([i,o]=await vt(this.storage,this.storageKey)),await Pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:zt})}catch(e){if(Me(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new We;const{error:r}=await Pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await Pt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await Pt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new qe("You must provide either an email or phone number and a type")}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<ze;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await ht(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=St()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:At}):await this._useSession(async e=>{var t,n,r;const{data:i,error:o}=e;if(o)throw o;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:At}):{data:{user:null},error:new We}})}catch(e){if(Me(e))return function(e){return Me(e)&&"AuthSessionMissingError"===e.name}(e)&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new We;const o=r.session;let a=null,s=null;"pkce"===this.flowType&&null!=e.email&&([a,s]=await vt(this.storage,this.storageKey));const{data:l,error:u}=await Pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:s}),jwt:o.access_token,xform:At});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(e){if(Me(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=gt(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(Me(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new We;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!lt())throw new Ve("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ve(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ke("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ve("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ke("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:s,token_type:l}=e;if(!(i&&a&&o&&l))throw new Ve("No session defined in URL");const u=Math.round(Date.now()/1e3),c=parseInt(a);let d=u+c;s&&(d=parseInt(s));const{data:f,error:h}=await this._getUser(i);if(h)throw h;const p={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:c,expires_at:d,refresh_token:o,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(e){if(Me(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=null===(n=r.session)||void 0===n?void 0:n.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return Me(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(t){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await vt(this.storage,this.storageKey,!0));try{return await Pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Me(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(Me(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,o,a;const{data:s,error:l}=t;if(l)throw l;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await Pt(this.fetch,"GET",u,{headers:this.headers,jwt:null!==(a=null===(o=s.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0})});if(r)throw r;return lt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(t){if(Me(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await Pt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(e){if(Me(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ot})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Je(t)&&Date.now()+n-i<Ae},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(e){if(!r(i,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),Me(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),lt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ht(this.storage,this.storageKey);if(r&&this.userStorage){let t=await ht(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await ft(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:St()}else if(r&&!r.user&&!r.user){const e=await ht(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(r.user=e.user,await pt(this.storage,this.storageKey+"-user"),await ft(this.storage,this.storageKey,r)):r.user=St()}if(this._debug(n,"session from storage",r),!this._isValidSession(r))return this._debug(n,"session is not valid"),void(null!==r&&await this._removeSession());const i=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<ze;if(this._debug(n,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(Je(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null==e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(e){this._debug(n,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(e){return void this._debug(n,"error",e)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new mt;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(e){if(this._debug(r,"error",e),Me(e)){const n={session:null,error:e};return Je(e)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(e){r.push(e)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await ft(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=xt(e);await ft(this.storage,this.storageKey,r)}else{const e=xt(t);await ft(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ae);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Ae);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Ft))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await vt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Pt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(e){if(Me(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:s,error:l}=await Pt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null==i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code=`data:image/svg+xml;utf-8,${s.totp.qr_code}`),{data:s,error:null})})}catch(e){if(Me(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await Pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(e){if(Me(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(e){if(Me(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=gt(r.access_token);let a=null;o.aal&&(a=o.aal);let s=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:i,error:o}=await Pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:s}}=gt(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:o},error:null}}const u=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,c,o,function(e){const t=[];return ot(e,e=>t.push(e)),new Uint8Array(t)}(`${a}.${s}`)))throw new Ye("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(e){if(Me(e))return{data:null,error:e};throw e}}}Kt.nextInstanceID=0;const Gt=Kt;class Jt extends Gt{constructor(e){super(e)}}var Qt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class Yt{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(s=e).endsWith("/")?s:s+"/";var s;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c=function(e,t){var n,r;const{db:i,auth:o,realtime:a,global:s}=e,{db:l,auth:u,realtime:c,global:d}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>Oe(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}(null!=n?n:{},{db:Se,realtime:Ee,auth:Object.assign(Object.assign({},xe),{storageKey:u}),global:_e});this.storageKey=null!==(r=c.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=c.global.headers)&&void 0!==i?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=c.auth)&&void 0!==o?o:{},this.headers,c.global.fetch),this.fetch=Pe(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new d(new URL("rest/v1",l).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new we(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new u(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Qt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:a,debug:s},l,u){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jt({url:this.authUrl.href,headers:Object.assign(Object.assign({},c),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:o,lock:a,debug:s,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Q(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}var Xt=n(606);const Zt=(e,t,n)=>new Yt(e,t,n);!function(){if("undefined"!=typeof window)return!1;if(void 0===Xt)return!1;const e=Xt.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}()},540:(e,t,n)=>{"use strict";e.exports=n(869)},606:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,l=[],u=!1,c=-1;function d(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},608:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>s,H6:()=>a,ND:()=>o,Sg:()=>l,X4:()=>c,dv:()=>u,sJ:()=>d});const r="https://xfqmllsvdxejloecwlaq.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhmcW1sbHN2ZHhlamxvZWN3bGFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwNTE1NjAsImV4cCI6MjA3MTYyNzU2MH0.ZE4YOoVjqs4fGQs4gA3CJoQ4nEzfRqK4K2MO_bERGvM";const o=(0,n(490).UU)(r,i);async function a(){try{const{data:e,error:t}=await o.from("card_templates").select("\n        *,\n        card_fields(*)\n      ").eq("is_active",!0).order("display_order");if(t)throw t;const n=e?.filter(e=>!e.id.startsWith("00000000-0000-0000-0000-"))||[];return await Promise.all(n.map(async e=>{const t=e.config?.linked_visual_object_id;if(t){const{data:n,error:r}=await o.from("visual_objects").select("*").eq("id",t).maybeSingle();if(n)return{...e,visual_objects:n}}return e}))}catch(e){return[]}}async function s(e,t,n,r){try{const i=null!=n&&""!==n,{data:a,error:s}=await o.from("field_completions").upsert({card_id:e,field_name:t,session_id:r,field_value:String(n||""),is_complete:i,completed_at:i?(new Date).toISOString():null,updated_at:(new Date).toISOString()},{onConflict:"card_id,field_name,session_id"}).select().single();return s?null:a}catch{return null}}async function l(e,t,n,r){try{const{data:i,error:a}=await o.from("card_completions").upsert({card_id:e,session_id:t,is_complete:n,completed_at:n?(new Date).toISOString():null,completion_trigger:r,updated_at:(new Date).toISOString()},{onConflict:"card_id,session_id"}).select().single();return a?null:i}catch{return null}}async function u(){return null}async function c(e,t){try{const{data:n,error:r}=await o.from("card_templates").select("*, card_fields(*)").eq("id",e).single();if(r||!n)return!1;const i=await async function(e,t){const{data:n,error:r}=await o.from("field_completions").select("*").eq("card_id",e).eq("session_id",t);return r?[]:n||[]}(e,t),a=i.filter(e=>e.is_complete);let s="any_field";if(n.completion_rules?.form_completion?.type)s=n.completion_rules.form_completion.type;else if(n.reveal_next_conditions?.type)switch(n.reveal_next_conditions.type){case"all_complete":s="all_fields";break;case"required_complete":s="required_fields";break;default:s="any_field"}const l=n.card_fields?.length||0,u=n.card_fields?.filter(e=>e.required||e.is_completion_required)||[];switch(s){case"all_fields":return l>0&&a.length===l;case"required_fields":return 0===u.length?a.length>0:u.every(e=>a.some(t=>t.field_name===e.field_name));default:return a.length>0}}catch(e){return!1}}async function d(e){try{await async function(e){try{const{error:t}=await o.from("field_completions").delete().eq("session_id",e);if(t)throw t}catch(e){throw e}}(e);const{error:t}=await o.from("card_completions").delete().eq("session_id",e);if(t)throw t}catch(e){throw e}}},660:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(907)),o=r(n(818));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,i;let a=null,s=null,l=null,u=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(s="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const i=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),o=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");i&&o&&o.length>1&&(l=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,u=406,c="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(s=[],a=null,u=200,c="OK")}catch(n){404===e.status&&""===t?(u=204,c="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(i=null==a?void 0:a.details)||void 0===i?void 0:i.includes("0 rows"))&&(a=null,u=200,c="OK"),a&&this.shouldThrowOnError)throw new o.default(a)}return{error:a,data:s,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},698:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},825:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(261));class o extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const o=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=o},848:(e,t,n)=>{"use strict";e.exports=n(698)},869:(e,t,n)=>{"use strict";var r=n(606),i=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function v(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}function w(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=v.prototype;var _=k.prototype=new w;_.constructor=k,y(_,v.prototype),_.isPureReactComponent=!0;var S=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function C(e,t,n,r,o,a){return n=a.ref,{$$typeof:i,type:e,key:t,ref:void 0!==n?n:null,props:a}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var j=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function O(){}function L(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case o:c=!0;break;case p:return L((c=e._init)(e._payload),t,n,r,a)}}if(c)return a=a(e),c=""===r?"."+P(e,0):r,S(a)?(n="",null!=c&&(n=c.replace(j,"$&/")+"/"),L(a,t,n,"",function(e){return e})):null!=a&&(T(a)&&(l=a,u=n+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+c,a=C(l.type,u,void 0,0,0,l.props)),t.push(a)),1;c=0;var d,f=""===r?".":r+":";if(S(e))for(var h=0;h<e.length;h++)c+=L(r=e[h],t,n,s=f+P(r,h),a);else if("function"==typeof(h=null===(d=e)||"object"!=typeof d?null:"function"==typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=h.call(e),h=0;!(r=e.next()).done;)c+=L(r=r.value,t,n,s=f+P(r,h++),a);else if("object"===s){if("function"==typeof e.then)return L(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(O,O):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,r,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",function(e){return t.call(n,e,i++)}),r}function z(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof r&&"function"==typeof r.emit)return void r.emit("uncaughtException",e)};function N(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=l,t.PureComponent=k,t.StrictMode=s,t.Suspense=f,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=y({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!E.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return C(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:u,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return C(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:z}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var r=e(),i=x.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(N,R)}catch(e){R(e)}finally{x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=x.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.1.0"},907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>s,Response:()=>l,default:()=>o,fetch:()=>i});var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,o=r.fetch.bind(r),a=r.Headers,s=r.Request,l=r.Response},961:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){}}(),e.exports=n(221)},982:(e,t,n)=>{"use strict";e.exports=n(477)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.d(r,{default:()=>X});var e=n(540),t=n(338),i=n(608),o=n(63);async function a(e,t){try{if("true"===e.trim())return{success:!0,result:!0};const{fields:n}=m(t);let r=e;const i=e.match(/\[field:([^\]]+)\]/g)||[];for(const e of i){const n=e.replace(/\[field:([^\]]+)\]/,"$1").trim();let i=h(t,n);if(void 0===i){const{fields:e}=m(t),r={valitse:["vesikiertoinen","valitse","heating_type","lämmitystyyppi"],heating_type:["vesikiertoinen","valitse","heating_type","lämmitystyyppi"],neliot:["square_meters","neliot","m2"],korkeus:["ceiling_height","huonekorkeus","korkeus"],henkilomaara:["residents","henkilomaara","henkilomaara"],rakennusvuosi:["construction_year","rakennusvuosi"]}[n.toLowerCase()]||[n];for(const t of r){const n=e[t];if(void 0!==n){i=n;break}}}if(void 0===i)return{success:!1,error:`Field '${n}' not found in session data`};const o="string"==typeof i?`"${i}"`:i;r=r.replace(e,o.toString())}const o=r.match(/\[calc:([^\]]+)\]/g)||[];for(const e of o){const n=e.replace(/\[calc:([^\]]+)\]/,"$1").trim(),i=await p(t,n);if(!i)return{success:!1,error:`Calculation '${n}' not found in session data`};r=r.replace(e,i.value.toString())}if(!/^[\p{L}\p{N}\s"'=!<>()._-]+$/u.test(r))return{success:!1,error:`Unsafe characters in condition: ${r}`};const a=new Function("return "+r)();if(r.includes("==")){r.split("==").map(e=>e.trim())}return{success:!0,result:Boolean(a)}}catch(e){return{success:!1,error:`Condition evaluation failed: ${e instanceof Error?e.message:"Unknown error"}`}}}const s=new Map,l=new Map,u=(new Map,new Map),c=new Map;function d(e){return u.has(e)||u.set(e,{sessionId:e,fields:new Map,calculations:new Map}),u.get(e)}function f(e,t,n){const r=d(e),i=t.toLowerCase(),o=r.fields.get(i),a=!o||o.value!==n;r.fields.set(i,{fieldName:t,value:n,timestamp:(new Date).toISOString()}),a&&y(e,t,"field")}function h(e,t){const n=d(e),r=t.toLowerCase(),i=n.fields.get(r);if(i)return i.value}async function p(e,t){const n=d(e),r=t.toLowerCase(),o=n.calculations.get(r);if(o)return o;try{const{data:t,error:o}=await i.ND.from("session_calculations").select("*").eq("session_id",e).eq("name",r).single();if(o||!t)return n.calculations.forEach((e,t)=>{}),null;const a={formulaName:t.name,value:parseFloat(t.value),unit:t.unit||void 0,timestamp:t.updated_at};return n.calculations.set(r,a),a}catch(e){return null}}function m(e){const t=d(e),n={};t.fields.forEach((e,t)=>{n[t]=e.value});const r={};return t.calculations.forEach((e,t)=>{r[t]=e}),{fields:n,calculations:r}}function g(e,t){const n="global";s.has(n)||s.set(n,{});s.get(n)[e]={fields:t.fields||[],calculations:t.calculations||[]}}function y(e,t,n){const r=function(e,t){const n=[],r=e.toLowerCase();return s.forEach(e=>{Object.entries(e).forEach(e=>{let[i,o]=e;("field"===t?o.fields.some(e=>e.toLowerCase()===r):o.calculations.some(e=>e.toLowerCase()===r))&&n.push(i)})}),l.forEach((e,i)=>{("field"===t?Array.from(e.fields).some(e=>e.toLowerCase()===r):Array.from(e.calculations).some(e=>e.toLowerCase()===r))&&!n.includes(i)&&n.push(i)}),n}(t,n);if(0===r.length)return;c.has(e)||c.set(e,new Set);const i=c.get(e);r.forEach(e=>i.add(e))}var b=n(848);const v=(0,e.createContext)(null);function w(t){let{children:n}=t;const[r,o]=(0,e.useState)({}),[a,s]=(0,e.useState)({}),[l,u]=(0,e.useState)([]),[c,d]=(0,e.useState)([]),[h]=(0,e.useState)((()=>{if("undefined"==typeof window)return"server-side";const e="true"===new URLSearchParams(window.location.search).get("new_session");let t=localStorage.getItem("card_session_id");return t&&!e||(t=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("card_session_id",t)),t})()),p=(0,e.useCallback)(async(e,t)=>{o(n=>{const r={...n,[e]:t};return function(e,t){for(const[n,r]of Object.entries(t))null!=r&&""!==r&&f(e,n,r)}(h,r),r});const n=l.find(t=>t.card_fields?.some(t=>t.field_name===e));if(n){await(0,i.Cr)(n.id,e,t,h);await(0,i.X4)(n.id,h)&&(await(0,i.Sg)(n.id,h,!0,e),s(e=>({...e,[n.id]:{...e[n.id],status:"complete"}})),await y(n))}},[l,h]),m=((0,e.useCallback)(e=>{s(t=>({...t,[e]:{...t[e],status:"unlocked"}}))},[]),(0,e.useCallback)(e=>{s(t=>({...t,[e]:{...t[e],status:"unlocked"}}))},[])),g=(0,e.useCallback)(e=>{l.find(t=>t.id===e);s(t=>({...t,[e]:{...t[e],isRevealed:!0}}))},[l]),y=(0,e.useCallback)(async e=>{const t=l.findIndex(t=>t.id===e.id),n=l[t+1];if(n){const t=e.reveal_timing;if(t){if("immediately"===t.timing)g(n.id);else if("after_delay"===t.timing){const e=1e3*(t.delay_seconds||3);setTimeout(()=>{g(n.id)},e)}}else g(n.id)}},[l,g]),w=(0,e.useCallback)(e=>{switch(e.type){case"info":case"visual":case"calculation":return!0;case"form":{const t=e.card_fields||[];if(0===t.length)return!0;const n=e.completion_rules;if(!n?.form_completion)return!1;{const e=n.form_completion;switch(e.type){case"any_field":return t.some(e=>{const t=r[e.field_name];return null!=t&&""!==t});case"all_fields":return t.every(e=>{const t=r[e.field_name];return null!=t&&""!==t});case"required_fields":const n=e.required_field_names||[];if(0===n.length){const e=t.filter(e=>e.required);return 0===e.length?t.some(e=>{const t=r[e.field_name];return null!=t&&""!==t}):e.every(e=>{const t=r[e.field_name];return null!=t&&""!==t})}return n.every(e=>{const t=r[e];return null!=t&&""!==t});default:return!1}}}case"submit":return"complete"===a[e.id]?.status;default:return!1}},[r,a]),k=(0,e.useCallback)(async e=>{const t={...r,submit_email_template:e};if(!(await fetch("/api/submit-lead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Failed to submit form data")},[r]),_=(0,e.useCallback)(e=>{s(t=>{const n={...t};return n[e]={...n[e],status:"complete"},n});const t=l.findIndex(t=>t.id===e),n=l[t+1];if(n){const e=l[t].reveal_timing;if(e){if("immediately"===e.timing)g(n.id);else if("after_delay"===e.timing){const t=1e3*(e.delay_seconds||3);setTimeout(()=>{g(n.id)},t)}}else g(n.id)}},[l,g]),S=(0,e.useCallback)(e=>{s(t=>{const n={...t};return Object.keys(n).forEach(e=>{"active"===n[e].status&&(n[e]={...n[e],status:"unlocked"})}),n[e]={...n[e],status:"active"},n})},[]),x=(0,e.useCallback)(async e=>{u(e);const t=e.map(e=>e.id);d(t);const n={};for(let r=0;r<t.length;r++){const o=t[r];e.find(e=>e.id===o);if(0===r)n[o]={status:"active",isRevealed:!0};else{const e=await(0,i.dv)(),t=e?.is_complete||!1;n[o]={status:t?"complete":"hidden",isRevealed:!1}}}s(n)},[h]),E=(0,e.useCallback)(e=>!e.reveal_conditions||0===e.reveal_conditions.length||e.reveal_conditions.every(e=>{if("card_complete"===e.type){return(e.target||[]).every(e=>{const t=l.find(t=>t.name===e);if(!t)return!0;if("info"===t.type)return!0;const n=t.card_fields||[];return 0===n.length||n.some(e=>{const t=r[e.field_name];return null!=t&&""!==t})})}return!0}),[r,l]),C=(0,e.useCallback)(function(e){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set).has(e.id))return!1;const t=a[e.id];if(!0===t?.isRevealed)return!0;if(!1===t?.isRevealed)return!1;return l.findIndex(t=>t.id===e.id)<=0},[a,l]);return(0,e.useEffect)(()=>{(async()=>{try{const e=await(0,i.H6)();u(e);const t=e.map(e=>e.id);d(t);const n={};for(let r=0;r<t.length;r++){const i=t[r];e.find(e=>e.id===i);n[i]=0===r?{status:"active",isRevealed:!0}:{status:"hidden",isRevealed:!1}}s(n)}catch(e){Error}})()},[]),(0,e.useEffect)(()=>{(async()=>{try{await(0,i.sJ)(h),localStorage.removeItem("session_needs_cleanup")}catch(e){}})()},[h]),(0,b.jsx)(v.Provider,{value:{formData:r,cardStates:a,cards:l,sessionId:h,updateField:p,completeCard:_,uncompleteCard:m,activateCard:S,setCardsAndInitialize:x,checkRevealConditions:E,shouldBeRevealed:C,revealCard:g,isCardComplete:w,submitData:k},children:n})}const k=()=>{const t=(0,e.useContext)(v);if(!t)throw new Error("useCardContext must be used within CardProvider");return t},_=JSON.parse('{"x":{"version":"1.0.0","theme":"minimal","lastModified":"2024-01-15","container":{"_comment":"Main wrapper for the entire card system","width":"100%","maxWidth":"1400px","minHeight":"600px","height":"auto","margin":"0 auto","padding":"0","background":"transparent","borderRadius":"12px","border":"none","boxShadow":"0 10px 40px rgba(0, 0, 0, 0.1)","overflow":"hidden"},"layout":{"_comment":"Layout proportions and spacing","visualSupportRatio":"60%","cardStreamRatio":"40%","gapBetweenPanels":"0","verticalSpacing":"default","display":"flex","flexDirection":"row","alignItems":"stretch"},"visualSupport":{"_comment":"Left panel configuration","enabled":true,"width":"45%","minWidth":"400px","background":"#ffffff","borderRight":"1px solid #e5e7eb","padding":"0","position":"sticky","top":"0","height":"100vh","maxHeight":"800px","content":{"background":"linear-gradient(135deg, #059669 0%, #34d399 100%)","padding":"40px","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center","flex":"1"},"title":{"fontSize":"28px","fontWeight":"300","color":"#ffffff","marginBottom":"12px","textAlign":"center","letterSpacing":"-0.02em"},"subtitle":{"fontSize":"16px","fontWeight":"400","color":"rgba(255, 255, 255, 0.9)","textAlign":"center","lineHeight":"1.5"},"icon":{"fontSize":"100px","marginBottom":"20px","animation":"float 3s ease-in-out infinite","opacity":"1"},"image":{"aspectRatio":"16/9","borderRadius":"0","objectFit":"cover","width":"100%","maxWidth":"320px","lazyLoading":true,"fallbackColor":"#f3f4f6","overlay":{"enabled":true,"position":"bottom","spacing":"20px","background":"rgba(0, 0, 0, 0.7)","padding":"12px 16px","borderRadius":"8px","backdropFilter":"blur(4px)","textAlign":"center","titleColor":"#ffffff"}},"infoSection":{"background":"#ffffff","padding":"24px","borderTop":"1px solid #e5e7eb","title":{"fontSize":"22px","fontWeight":"300","color":"#1f2937","marginBottom":"8px"},"description":{"fontSize":"14px","fontWeight":"400","color":"#6b7280","lineHeight":"1.5","maxLines":"4"},"tip":{"marginTop":"16px","padding":"12px","background":"#ecfdf5","borderLeft":"4px solid #10b981","borderRadius":"4px","fontSize":"13px","color":"#047857","display":"block"}},"mobile":{"behavior":"hide","breakpoint":"768px","collapseMode":"hidden","drawerBehavior":"disabled","touchGestures":false,"overlayOptions":{"enabled":false,"background":"rgba(0, 0, 0, 0.5)","closeOnClick":true}}},"cardStream":{"_comment":"Right panel containing cards","width":"55%","background":"#f7f8f9","padding":"30px","paddingBottom":"100px","overflowY":"auto","overflowX":"hidden","maxHeight":"100vh","scrollBehavior":"auto","contentWrapper":{"maxWidth":"600px","margin":"0 auto","width":"100%"},"cardSpacing":"20px","firstCardMarginTop":"0","lastCardMarginBottom":"40px"},"card":{"_comment":"Individual card styling","base":{"background":"#ffffff","borderRadius":"12px","border":"1px solid #e5e7eb","padding":"32px","marginBottom":"20px","boxShadow":"0 1px 3px rgba(0, 0, 0, 0.04)","transition":"all 200ms cubic-bezier(0.4, 0, 0.2, 1)","cursor":"default","position":"relative","overflow":"hidden"},"hover":{"boxShadow":"0 4px 12px rgba(0, 0, 0, 0.08)","transform":"translateY(-2px)"},"states":{"locked":{"opacity":"0.6","filter":"blur(8px)","pointerEvents":"none","transform":"scale(0.98)","transition":"all 500ms ease"},"active":{"border":"2px solid rgba(16, 185, 129, 0.5)","boxShadow":"0 0 0 3px rgba(16, 185, 129, 0.1)","transform":"scale(1.01)","background":"#ffffff"},"complete":{"borderLeft":"4px solid #10b981","opacity":"1","background":"#ffffff","checkmark":{"enabled":true,"position":"absolute","top":"16px","right":"16px","size":"24px","color":"#10b981","background":"rgba(16, 185, 129, 0.1)","borderRadius":"50%","padding":"4px"}},"unlocking":{"animation":"slideUp 500ms ease-out"}},"header":{"display":"flex","justifyContent":"space-between","alignItems":"center","marginBottom":"24px","gap":"16px","borderBottom":"1px solid #d9d9d9","paddingBottom":"20px"},"stepIndicator":{"fontSize":"12px","fontWeight":"600","color":"#10b981","textTransform":"uppercase","letterSpacing":"1px","padding":"0","marginBottom":"8px","display":"block"},"badge":{"display":"inline-block","padding":"4px 12px","background":"rgba(16, 185, 129, 0.1)","color":"#10b981","borderRadius":"100px","fontSize":"11px","fontWeight":"500","textTransform":"uppercase","letterSpacing":"0.5px"},"title":{"fontSize":"24px","fontWeight":"300","color":"#1f2937","lineHeight":"1.2","marginBottom":"8px","letterSpacing":"0"},"description":{"fontSize":"14px","fontWeight":"400","color":"#6b7280","lineHeight":"1.5","marginBottom":"24px","maxWidth":"100%"}},"formElements":{"_comment":"Form field styling - Minimal theme specific","formGroup":{"marginBottom":"20px","width":"100%"},"fieldRow":{"display":"grid","gridTemplateColumns":"1fr 1fr","gap":"16px","marginBottom":"20px"},"label":{"display":"block","fontSize":"11px","fontWeight":"500","color":"#9ca3af","textTransform":"uppercase","letterSpacing":"0.5px","marginBottom":"8px","transition":"color 200ms ease"},"input":{"width":"100%","padding":"8px 0","fontSize":"14px","fontWeight":"400","color":"#1f2937","background":"transparent","border":"none","borderBottomWidth":"2px","borderBottomStyle":"solid","borderBottomColor":"#e5e7eb","borderRadius":"0","outline":"none","transition":"border-color 200ms ease","appearance":"none","placeholder":{"color":"#d1d5db","fontWeight":"400"},"hover":{"borderBottomColor":"#d1d5db"},"focus":{"borderBottomColor":"#10b981","boxShadow":"none"},"error":{"borderBottomColor":"#ef4444"},"disabled":{"opacity":"0.5","cursor":"not-allowed","borderBottomColor":"#f3f4f6"}},"select":{"_extends":"input","paddingRight":"32px","backgroundImage":"url(\\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%239ca3af\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e\\")","backgroundPosition":"right 0 center","backgroundRepeat":"no-repeat","backgroundSize":"20px","cursor":"pointer"},"errorMessage":{"fontSize":"12px","color":"#ef4444","marginTop":"4px","display":"block"},"buttons":{"_comment":"Button field type - selection buttons for forms with vertical layout","container":{"display":"flex","flexDirection":"column","gap":"12px","marginTop":"0"},"button":{"padding":"16px 20px","fontSize":"14px","fontWeight":"400","color":"#4b5563","background":"#ffffff","borderWidth":"2px","borderStyle":"solid","borderColor":"#e5e7eb","borderRadius":"8px","cursor":"pointer","transition":"all 200ms ease","textAlign":"left","width":"100%","display":"flex","alignItems":"center","justifyContent":"space-between","minHeight":"56px","position":"relative"},"buttonHover":{"borderColor":"#d1d5db","background":"#f9fafb","transform":"translateY(-1px)","boxShadow":"0 2px 4px rgba(0, 0, 0, 0.05)"},"buttonSelected":{"borderColor":"#10b981","background":"linear-gradient(135deg, #ecfdf5, #ffffff)","color":"#065f46","fontWeight":"500","boxShadow":"0 0 0 3px rgba(16, 185, 129, 0.1)"},"buttonDisabled":{"opacity":"0.5","cursor":"not-allowed","borderColor":"#f3f4f6","background":"#f9fafb"},"buttonFocus":{"outline":"3px solid #10b981","outlineOffset":"2px"},"buttonContent":{"display":"flex","alignItems":"center","flex":"1"},"buttonIcon":{"marginRight":"12px","fontSize":"20px","color":"#6b7280","flexShrink":"0","transition":"color 200ms ease"},"buttonIconSelected":{"color":"#10b981"},"buttonText":{"flex":"1","textAlign":"left"},"buttonTitle":{"fontSize":"15px","fontWeight":"500","color":"#1f2937","marginBottom":"2px","lineHeight":"1.2"},"buttonSubtitle":{"fontSize":"13px","fontWeight":"400","color":"#6b7280","lineHeight":"1.3"},"buttonIndicator":{"marginLeft":"12px","fontSize":"16px","color":"#d1d5db","transition":"all 200ms ease","flexShrink":"0"},"buttonIndicatorSelected":{"color":"#10b981","transform":"scale(1.1)"},"multiSelect":{"_comment":"Multi-selection checkbox styling","checkbox":{"marginRight":"12px","width":"18px","height":"18px","accentColor":"#10b981","borderRadius":"4px","borderWidth":"2px","borderStyle":"solid","borderColor":"#d1d5db","transition":"all 200ms ease"},"checkboxChecked":{"backgroundColor":"#10b981","borderColor":"#10b981","backgroundImage":"url(\\"data:image/svg+xml,%3csvg viewBox=\'0 0 16 16\' fill=\'white\' xmlns=\'http://www.w3.org/2000/svg\'%3e%3cpath d=\'m13.854 3.646-7.5 7.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6 10.293l7.146-7.147a.5.5 0 0 1 .708.708z\'/%3e%3c/svg%3e\\")"}},"animations":{"buttonHover":{"duration":"200ms","easing":"cubic-bezier(0.4, 0, 0.2, 1)"},"selection":{"duration":"300ms","easing":"cubic-bezier(0.34, 1.56, 0.64, 1)","scaleEffect":"1.02"},"stagger":{"enabled":true,"delay":"50ms","direction":"top-to-bottom"}}}},"calculationCard":{"_comment":"Display Template in Card Builder settings","container":{"background":"linear-gradient(135deg, #ecfdf5, #ffffff)","borderRadius":"12px","padding":"32px","marginBottom":"20px","boxShadow":"0 1px 3px rgba(0, 0, 0, 0.04)","transition":"all 200ms cubic-bezier(0.4, 0, 0.2, 1)","position":"relative","overflow":"hidden"},"header":{"marginBottom":"24px","borderBottom":"1px solid #d9d9d9","paddingBottom":"20px"},"title":{"fontSize":"24px","fontWeight":"300","color":"#1f2937","lineHeight":"1.2","marginBottom":"8px","letterSpacing":"0"},"description":{"fontSize":"14px","fontWeight":"400","color":"#6b7280","lineHeight":"1.5","marginBottom":"0"},"resultSection":{"display":"flex","alignItems":"flex-end","justifyContent":"space-between","marginBottom":"24px","gap":"16px"},"resultDisplay":{"flex":"1"},"metricLabel":{"fontSize":"11px","fontWeight":"500","color":"#9ca3af","textTransform":"uppercase","letterSpacing":"0.5px","marginBottom":"12px","display":"block"},"metricValue":{"fontSize":"48px","fontWeight":"200","color":"#10b981","lineHeight":"1.1","marginBottom":"0","display":"inline-block"},"metricUnit":{"fontSize":"18px","fontWeight":"300","color":"#6b7280","marginLeft":"8px","display":"inline-block"},"editButton":{"padding":"6px 8px","fontSize":"12px","fontWeight":"400","color":"#6b7280","background":"transparent","borderWidth":"1px","borderStyle":"solid","borderColor":"#e5e7eb","borderRadius":"6px","cursor":"pointer","transition":"all 200ms ease","display":"flex","alignItems":"center","gap":"4px","flexShrink":"0","height":"28px"},"editButtonHover":{"borderColor":"#d1d5db","background":"#f9fafb","color":"#4b5563"},"editButtonFocus":{"outline":"2px solid #10b981","outlineOffset":"1px"},"editIcon":{"fontSize":"14px","color":"inherit"},"editMode":{"_comment":"Styles when in edit mode - mobile-first stacked layout","container":{"borderLeft":"4px solid #f59e0b","background":"linear-gradient(135deg, #fef3c7, #ffffff)"},"inputGroup":{"display":"flex","flexDirection":"column","gap":"16px","marginBottom":"24px","alignItems":"stretch"},"inputWrapper":{"flex":"1","width":"100%","display":"flex","alignItems":"stretch","position":"relative","borderWidth":"2px","borderStyle":"solid","borderColor":"#e5e7eb","borderRadius":"8px","background":"#ffffff","overflow":"hidden","transition":"border-color 200ms ease"},"inputWrapperFocus":{"borderColor":"#10b981","boxShadow":"0 0 0 3px rgba(16, 185, 129, 0.1)"},"input":{"width":"100%","padding":"12px 16px","paddingRight":"80px","fontSize":"24px","fontWeight":"300","color":"#1f2937","background":"transparent","border":"none","outline":"none","textAlign":"center"},"inputFocus":{"borderColor":"#10b981","boxShadow":"0 0 0 3px rgba(16, 185, 129, 0.1)"},"inputError":{"borderColor":"#ef4444","boxShadow":"0 0 0 3px rgba(239, 68, 68, 0.1)"},"unitLabel":{"position":"absolute","right":"0","top":"0","bottom":"0","padding":"12px 16px","fontSize":"18px","fontWeight":"300","color":"#6b7280","background":"#f9fafb","borderLeft":"1px solid #e5e7eb","display":"flex","alignItems":"center","pointerEvents":"none"},"actionButtons":{"display":"flex","gap":"12px","alignItems":"center","justifyContent":"center","width":"100%"},"saveButton":{"padding":"10px 24px","fontSize":"14px","fontWeight":"500","color":"#ffffff","background":"#10b981","border":"none","borderRadius":"6px","cursor":"pointer","transition":"all 200ms ease","textTransform":"uppercase","letterSpacing":"0.5px","minWidth":"100px"},"saveButtonHover":{"background":"#059669","transform":"translateY(-1px)","boxShadow":"0 2px 4px rgba(16, 185, 129, 0.2)"},"saveButtonDisabled":{"opacity":"0.5","cursor":"not-allowed","background":"#9ca3af"},"cancelButton":{"padding":"10px 24px","fontSize":"14px","fontWeight":"400","color":"#6b7280","background":"transparent","borderWidth":"1px","borderStyle":"solid","borderColor":"#e5e7eb","borderRadius":"6px","cursor":"pointer","transition":"all 200ms ease","textTransform":"uppercase","letterSpacing":"0.5px","minWidth":"100px"},"cancelButtonHover":{"borderColor":"#d1d5db","background":"#f9fafb"}},"editedIndicator":{"_comment":"Shows when value has been manually edited","badge":{"position":"absolute","top":"16px","right":"16px","padding":"4px 8px","fontSize":"10px","fontWeight":"500","color":"#f59e0b","background":"#fef3c7","borderWidth":"1px","borderStyle":"solid","borderColor":"#fde68a","borderRadius":"12px","textTransform":"uppercase","letterSpacing":"0.5px","display":"flex","alignItems":"center","gap":"4px"},"icon":{"fontSize":"12px","color":"#f59e0b"}},"errorMessage":{"marginTop":"8px","padding":"8px 12px","background":"#fef2f2","borderLeft":"3px solid #ef4444","borderRadius":"4px","fontSize":"12px","color":"#b91c1c"},"breakdown":{"_comment":"Optional calculation breakdown section","marginTop":"24px","paddingTop":"20px","borderTop":"1px solid #f3f4f6","item":{"display":"flex","justifyContent":"space-between","alignItems":"center","padding":"8px 0","borderBottom":"1px solid #f9fafb"},"itemLast":{"borderBottom":"none"},"label":{"fontSize":"13px","color":"#6b7280","fontWeight":"400"},"value":{"fontSize":"14px","fontWeight":"500","color":"#1f2937"},"highlight":{"color":"#10b981","fontWeight":"600"}},"responsive":{"mobile":{"_comment":"Mobile styles for screens ≤768px","container":{"padding":"24px"},"metricValue":{"fontSize":"36px"},"metricUnit":{"fontSize":"16px"},"resultSection":{"flexDirection":"column","alignItems":"flex-start","gap":"12px"},"editButton":{"alignSelf":"flex-end"},"editMode":{"inputGroup":{"flexDirection":"column","alignItems":"stretch","gap":"16px"},"inputWrapper":{"maxWidth":"none"},"actionButtons":{"width":"100%","justifyContent":"stretch"},"saveButton":{"flex":"1"},"cancelButton":{"flex":"1"}}}}},"infoCard":{"_comment":"Information/notification card styling","background":"#f3f4f6","borderLeftColor":"#6b7280","icon":{"fontSize":"24px","color":"#10b981","marginBottom":"12px"},"content":{"fontSize":"14px","color":"#4b5563","lineHeight":"1.6"},"list":{"gap":"16px","marginTop":"16px"},"listItem":{"display":"grid","gridTemplateColumns":"24px 1fr","gap":"12px"}},"actionCard":{"_comment":"CTA/Submit button card styling","textAlign":"center","padding":"40px 32px","button":{"width":"100%","padding":"14px 28px","fontSize":"14px","fontWeight":"500","color":"#10b981","background":"transparent","border":"none","borderBottom":"2px solid #10b981","borderRadius":"0","textTransform":"uppercase","letterSpacing":"0.5px","cursor":"pointer","transition":"all 200ms ease","hover":{"background":"#10b981","color":"#ffffff","transform":"translateY(-1px)"},"active":{"transform":"translateY(0)"},"disabled":{"opacity":"0.5","cursor":"not-allowed","pointerEvents":"none"}}},"submitButton":{"_comment":"Submit button styling for form submissions","wrapper":{"marginTop":"40px","paddingTop":"32px","borderTop":"1px solid #f3f4f6"},"button":{"width":"100%","padding":"18px 32px","fontSize":"16px","fontWeight":"500","color":"#ffffff","background":"#10b981","border":"none","borderRadius":"8px","textTransform":"uppercase","letterSpacing":"1px","cursor":"pointer","transition":"all 300ms cubic-bezier(0.4, 0, 0.2, 1)","position":"relative","overflow":"hidden"},"buttonHover":{"background":"#059669","transform":"translateY(-2px)","boxShadow":"0 8px 20px rgba(16, 185, 129, 0.3)"},"buttonActive":{"transform":"translateY(0)","boxShadow":"0 4px 12px rgba(16, 185, 129, 0.2)"},"buttonDisabled":{"opacity":"0.5","cursor":"not-allowed","background":"#9ca3af","transform":"none","pointerEvents":"none"},"buttonLoading":{"_comment":"Loading state with spinner","spinner":{"display":"inline-block","width":"14px","height":"14px","borderWidth":"2px","borderStyle":"solid","borderColor":"#ffffff","borderRadius":"50%","borderTopColor":"transparent","animation":"spin 1s linear infinite","marginLeft":"8px"}},"buttonSuccess":{"_comment":"Success state after submission","background":"#10b981","icon":"✓","text":"Onnistui!"},"rippleEffect":{"_comment":"Ripple animation on click","enabled":true,"color":"rgba(255, 255, 255, 0.2)","duration":"600ms","size":"300px"},"alternativeStyle":{"_comment":"Alternative minimal style with bottom border only","width":"100%","padding":"14px 28px","fontSize":"14px","fontWeight":"500","color":"#10b981","background":"transparent","border":"none","borderBottom":"2px solid #10b981","borderRadius":"0","textTransform":"uppercase","letterSpacing":"0.5px","cursor":"pointer","transition":"all 200ms ease","hover":{"background":"#10b981","color":"#ffffff","transform":"translateY(-1px)"},"active":{"transform":"translateY(0)"}},"responsive":{"_comment":"Mobile responsive adjustments","mobile":{"wrapper":{"marginTop":"32px","paddingTop":"24px"},"button":{"padding":"16px 24px","fontSize":"14px","letterSpacing":"0.5px"}}}},"responsive":{"_comment":"Responsive breakpoints and behavior","breakpoints":{"mobile":"768px","tablet":"1024px","desktop":"1280px"},"mobile":{"_comment":"Settings for screens ≤768px","layout":{"flexDirection":"column","gap":"0"},"visualSupport":{"display":"none","width":"100%","height":"auto","position":"relative"},"cardStream":{"width":"100%","padding":"20px","maxHeight":"none"},"card":{"padding":"24px","borderRadius":"8px","marginBottom":"16px"},"title":{"fontSize":"20px"},"metricValue":{"fontSize":"36px"},"fieldRow":{"gridTemplateColumns":"1fr","gap":"0"}},"tablet":{"_comment":"Settings for screens 768px-1024px","visualSupport":{"width":"40%"},"cardStream":{"width":"60%"}}},"animations":{"_comment":"Animation configurations","cardReveal":{"enabled":true,"duration":"500ms","easing":"cubic-bezier(0.4, 0, 0.2, 1)","keyframes":"slideUp","from":{"opacity":"0","transform":"translateY(40px)"},"to":{"opacity":"1","transform":"translateY(0)"}},"transitions":{"fast":"150ms","default":"200ms","slow":"300ms","slower":"500ms"},"hover":{"lift":"-2px","scale":"1.02","shadowIncrease":true},"float":{"enabled":true,"duration":"3s","distance":"20px"}},"colors":{"_comment":"Global color palette - Minimal theme","brand":{"primary":"#10b981","primaryHover":"#059669","primaryLight":"#ecfdf5"},"text":{"primary":"#1f2937","secondary":"#6b7280","tertiary":"#9ca3af","placeholder":"#d1d5db","inverse":"#ffffff"},"background":{"primary":"#ffffff","secondary":"#f7f8f9","tertiary":"#f3f4f6","disabled":"#f9fafb"},"border":{"default":"#e5e7eb","hover":"#d1d5db","focus":"#10b981","subtle":"#f9fafb"},"state":{"error":"#ef4444","warning":"#f59e0b","success":"#10b981","info":"#3b82f6"}},"typography":{"_comment":"Global typography settings","fontFamily":"system-ui, -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, \'Helvetica Neue\', Arial, sans-serif","fontSizeBase":"14px","lineHeightBase":"1.5","fontWeightLight":"300","fontWeightNormal":"400","fontWeightMedium":"500","fontWeightSemibold":"600"},"features":{"_comment":"Feature flags and settings","progressiveDisclosure":true,"autoScroll":false,"smoothScrolling":false,"cardClickable":true,"showStepIndicators":true,"validateOnBlur":true,"validateOnSubmit":true,"showCalculationsRealtime":false,"allowBackNavigation":false,"persistData":false,"analytics":{"enabled":true,"trackInteractions":true,"trackCompletion":true}},"accessibility":{"_comment":"Accessibility settings","focusOutline":"3px solid #10b981","focusOutlineOffset":"2px","minContrastRatio":"4.5:1","minTouchTarget":"44px","keyboardNavigation":true,"screenReaderSupport":true,"reducedMotion":{"respectPreference":true,"disableAnimations":true},"ariaLabels":{"stepIndicator":"Step {current} of {total}","requiredField":"Required field","errorMessage":"Error: {message}","successMessage":"Success: {message}"}}}}'),S=_.x;function x(){return{colors:S.colors,card:S.card,formElements:S.formElements,calculationCard:S.calculationCard,infoCard:S.infoCard,actionCard:S.actionCard,submitButton:S.submitButton,typography:S.typography,animations:S.animations,container:S.container,layout:S.layout,visualSupport:S.visualSupport,cardStream:S.cardStream,responsive:S.responsive,accessibility:S.accessibility,features:S.features}}S.colors.brand.primary,S.colors.brand.primaryHover,S.colors.state.info,S.colors.state.error,S.colors.text.secondary,S.colors.text.tertiary,S.colors.text.placeholder,S.colors.text.primary,S.colors.background.tertiary,S.colors.border.default,S.card.title.fontSize,S.typography.fontSizeBase,S.formElements.errorMessage.fontSize,S.formElements.label.fontSize,S.calculationCard.metricValue.fontSize,S.typography.fontWeightSemibold,S.typography.fontWeightMedium,S.typography.fontWeightLight,S.typography.fontWeightNormal,S.card.base.padding,S.cardStream.cardSpacing,S.card.base.borderRadius,S.animations.transitions.default,S.animations.transitions.slower;function E(t){let{card:n,onFieldFocus:r}=t;const i=x(),{formData:o,updateField:a,cardStates:s,submitData:l,completeCard:u,uncompleteCard:c}=k(),[d,f]=(0,e.useState)({}),[h,p]=(0,e.useState)(!1),[m,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(null),w=!1,_=e=>({display:i.formElements.label.display,fontSize:i.formElements.label.fontSize,fontWeight:i.formElements.label.fontWeight,color:y===e?i.colors.brand.primary:i.formElements.label.color,textTransform:i.formElements.label.textTransform,letterSpacing:i.formElements.label.letterSpacing,marginBottom:i.formElements.label.marginBottom,transition:i.formElements.label.transition}),S=(e,t)=>{a(e,t),d[e]&&f(t=>({...t,[e]:""}));const r=n.card_fields?.every(e=>"buttons"===e.field_type);if(r&&"complete"===s[n.id]?.status){const r=n.card_fields?.every(n=>{const r=n.field_name===e?t:o[n.field_name];return!r||Array.isArray(r)&&0===r.length});r&&c(n.id)}},E=e=>{v(e.field_name),r&&r(n.id,e.field_name,o[e.field_name])},C=e=>{v(null),e.required&&!o[e.field_name]&&f(t=>({...t,[e.field_name]:"This field is required"}))},T=e=>{const t=o[e.field_name]||"",n=d[e.field_name];switch(e.field_type){case"text":case"email":case"number":return(0,b.jsxs)("div",{style:{marginBottom:i.formElements.formGroup.marginBottom},children:[(0,b.jsxs)("label",{style:_(e.field_name),children:[e.label,e.required&&(0,b.jsx)("span",{style:{color:i.colors.state.error},children:"*"})]}),(0,b.jsx)("input",{type:e.field_type,value:t,onChange:t=>S(e.field_name,t.target.value),onFocus:()=>E(e),onBlur:()=>C(e),disabled:w,style:{...i.formElements.input,...y===e.field_name?i.formElements.input.focus:{},...n?i.formElements.input.error:{}}}),e.help_text&&(0,b.jsx)("p",{style:{fontSize:i.typography.fontSizeBase,color:i.colors.text.tertiary,marginTop:"4px"},children:e.help_text}),n&&(0,b.jsx)("p",{style:{fontSize:i.formElements.errorMessage.fontSize,color:i.formElements.errorMessage.color,marginTop:i.formElements.errorMessage.marginTop,display:i.formElements.errorMessage.display},children:n})]});case"select":return(0,b.jsxs)("div",{style:{marginBottom:i.formElements.formGroup.marginBottom},children:[(0,b.jsxs)("label",{style:_(e.field_name),children:[e.label,e.required&&(0,b.jsx)("span",{style:{color:i.colors.state.error},children:"*"})]}),(0,b.jsxs)("select",{value:t,onChange:t=>S(e.field_name,t.target.value),onFocus:()=>E(e),onBlur:()=>C(e),disabled:w,style:{...i.formElements.input,...i.formElements.select,...y===e.field_name?i.formElements.input.focus:{},...n?i.formElements.input.error:{}},children:[(0,b.jsx)("option",{value:"",children:"Select..."}),e.options?.map(e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value))]}),e.help_text&&(0,b.jsx)("p",{style:{fontSize:i.typography.fontSizeBase,color:i.colors.text.tertiary,marginTop:"4px"},children:e.help_text}),n&&(0,b.jsx)("p",{style:{fontSize:i.formElements.errorMessage.fontSize,color:i.formElements.errorMessage.color,marginTop:i.formElements.errorMessage.marginTop,display:i.formElements.errorMessage.display},children:n})]});case"radio":return(0,b.jsxs)("div",{style:{marginBottom:i.formElements.formGroup.marginBottom},children:[(0,b.jsx)("label",{style:_(e.field_name),children:e.label}),(0,b.jsx)("div",{style:{display:i.formElements.fieldRow.display,gridTemplateColumns:i.formElements.fieldRow.gridTemplateColumns,gap:i.formElements.fieldRow.gap,marginBottom:i.formElements.fieldRow.marginBottom,marginTop:"8px"},children:e.options?.map(n=>(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px",opacity:1},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:i.typography.fontSizeBase,color:i.colors.text.primary},children:[(0,b.jsx)("input",{type:"radio",name:e.field_name,value:n.value,checked:t===n.value,onChange:t=>S(e.field_name,t.target.value),onFocus:()=>E(e),onBlur:()=>C(e),disabled:w,style:{accentColor:i.colors.brand.primary}}),n.label]})},n.value))}),e.help_text&&(0,b.jsx)("p",{style:{fontSize:i.typography.fontSizeBase,color:i.colors.text.tertiary,marginTop:"4px"},children:e.help_text}),n&&(0,b.jsx)("p",{style:{fontSize:i.formElements.errorMessage.fontSize,color:i.formElements.errorMessage.color,marginTop:i.formElements.errorMessage.marginTop,display:i.formElements.errorMessage.display},children:n})]});case"checkbox":return(0,b.jsxs)("div",{style:{marginBottom:i.formElements.formGroup.marginBottom},children:[(0,b.jsx)("div",{style:{display:"flex",gap:"8px",opacity:1},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:i.typography.fontSizeBase,fontWeight:i.formElements.label.fontWeight,color:i.colors.text.primary},children:[(0,b.jsx)("input",{type:"checkbox",checked:Boolean(t),onChange:t=>S(e.field_name,t.target.checked),onFocus:()=>E(e),onBlur:()=>C(e),disabled:w,style:{accentColor:i.colors.brand.primary}}),e.label]})}),e.help_text&&(0,b.jsx)("p",{style:{fontSize:i.typography.fontSizeBase,color:i.colors.text.tertiary,marginTop:"4px"},children:e.help_text}),n&&(0,b.jsx)("p",{style:{fontSize:i.formElements.errorMessage.fontSize,color:i.formElements.errorMessage.color,marginTop:i.formElements.errorMessage.marginTop,display:i.formElements.errorMessage.display},children:n})]});case"textarea":return(0,b.jsxs)("div",{style:{marginBottom:i.formElements.formGroup.marginBottom},children:[(0,b.jsxs)("label",{style:_(e.field_name),children:[e.label,e.required&&(0,b.jsx)("span",{style:{color:i.colors.state.error},children:"*"})]}),(0,b.jsx)("textarea",{value:t,onChange:t=>S(e.field_name,t.target.value),onFocus:()=>E(e),onBlur:()=>C(e),disabled:w,style:{...i.formElements.input,...y===e.field_name?i.formElements.input.focus:{},...n?i.formElements.input.error:{},minHeight:"80px",resize:"vertical"}}),e.help_text&&(0,b.jsx)("p",{style:{fontSize:i.typography.fontSizeBase,color:i.colors.text.tertiary,marginTop:"4px"},children:e.help_text}),n&&(0,b.jsx)("p",{style:{fontSize:i.formElements.errorMessage.fontSize,color:i.formElements.errorMessage.color,marginTop:i.formElements.errorMessage.marginTop,display:i.formElements.errorMessage.display},children:n})]});case"buttons":const r=!1!==e.validation_rules?.selectOnlyOne,o=Array.isArray(t)?t:t?[t]:[];return(0,b.jsxs)("div",{style:{marginBottom:i.formElements.formGroup.marginBottom},children:[(0,b.jsxs)("label",{style:_(e.field_name),children:[e.label,e.required&&(0,b.jsx)("span",{style:{color:i.colors.state.error},children:"*"})]}),e.help_text&&(0,b.jsx)("p",{style:{fontSize:i.typography.fontSizeBase,color:i.colors.text.tertiary,marginTop:"4px",marginBottom:"8px"},children:e.help_text}),(0,b.jsx)("div",{style:i.formElements.buttons.container,children:e.options?.map(t=>{const n=o.includes(t.value);return(0,b.jsxs)("button",{type:"button",onClick:()=>{if(r)S(e.field_name,n?"":t.value);else{const r=n?o.filter(e=>e!==t.value):[...o,t.value];S(e.field_name,r)}},onFocus:t=>{E(e),Object.assign(t.currentTarget.style,i.formElements.buttons.buttonFocus)},onBlur:t=>{C(e),t.currentTarget.style.outline="none",t.currentTarget.style.outlineOffset="0"},disabled:w,style:{...i.formElements.buttons.button,...n?{...i.formElements.buttons.buttonSelected}:{}},onMouseEnter:e=>{n||Object.assign(e.currentTarget.style,i.formElements.buttons.buttonHover)},onMouseLeave:e=>{n||Object.assign(e.currentTarget.style,i.formElements.buttons.button)},children:[(0,b.jsxs)("span",{style:i.formElements.buttons.buttonContent,children:[!r&&(0,b.jsx)("input",{type:"checkbox",checked:n,onChange:()=>{},style:{...i.formElements.buttons.multiSelect.checkbox,...n?i.formElements.buttons.multiSelect.checkboxChecked:{}},disabled:w,onClick:e=>e.stopPropagation()}),(0,b.jsx)("span",{style:i.formElements.buttons.buttonText,children:t.label})]}),n&&r&&(0,b.jsx)("span",{style:{...i.formElements.buttons.buttonIndicator,...i.formElements.buttons.buttonIndicatorSelected},children:"✓"})]},t.value)})}),n&&(0,b.jsx)("p",{style:{fontSize:i.formElements.errorMessage.fontSize,color:i.formElements.errorMessage.color,marginTop:i.formElements.errorMessage.marginTop,display:i.formElements.errorMessage.display},children:n})]});default:return(0,b.jsxs)("p",{children:["Unsupported field type: ",e.field_type]})}};return n.card_fields&&0!==n.card_fields.length?(0,b.jsxs)("div",{style:{padding:i.card.base.padding,position:i.card.base.position,overflow:i.card.base.overflow},children:[(0,b.jsx)("div",{style:i.card.header,children:(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("h2",{style:{fontSize:i.card.title.fontSize,fontWeight:i.card.title.fontWeight,color:i.card.title.color,lineHeight:i.card.title.lineHeight,marginBottom:i.card.title.marginBottom,letterSpacing:i.card.title.letterSpacing},children:n.title||n.name}),n.config?.description&&(0,b.jsx)("p",{style:{fontSize:i.card.description.fontSize,fontWeight:i.card.description.fontWeight,color:i.card.description.color,lineHeight:i.card.description.lineHeight,marginBottom:i.card.description.marginBottom},children:n.config.description})]})}),n.card_fields.sort((e,t)=>(e.display_order||0)-(t.display_order||0)).map(e=>(0,b.jsx)("div",{children:T(e)},e.field_name)),n.config?.has_submit_button&&(0,b.jsx)("div",{style:i.submitButton.wrapper,children:m?(0,b.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:i.colors.state.success,fontSize:"16px",fontWeight:"500"},children:[(0,b.jsx)("span",{style:{fontSize:"24px",marginRight:"8px"},children:"✓"}),n.config?.submit_success_message||"Lomake lähetetty onnistuneesti!"]}):(0,b.jsx)("button",{onClick:async()=>{if(!h){p(!0);try{l&&await l(n.config?.submit_email_template),u(n.id),g(!0)}catch(e){}finally{p(!1)}}},disabled:h,style:{...i.submitButton.button,...h?i.submitButton.buttonDisabled:{}},onMouseEnter:e=>{h||Object.assign(e.currentTarget.style,i.submitButton.buttonHover)},onMouseLeave:e=>{h||Object.assign(e.currentTarget.style,i.submitButton.button,{transform:"none",boxShadow:"none"})},onMouseDown:e=>{h||Object.assign(e.currentTarget.style,i.submitButton.buttonActive)},onMouseUp:e=>{h||Object.assign(e.currentTarget.style,i.submitButton.buttonHover)},children:h?(0,b.jsxs)(b.Fragment,{children:[n.config?.submit_button_text||"Lähetä",(0,b.jsx)("span",{style:{...i.submitButton.buttonLoading.spinner,display:"inline-block",marginLeft:"8px"}})]}):n.config?.submit_button_text||"Lähetä"})})]}):(0,b.jsx)("div",{style:{padding:"20px",color:i.colors.text.tertiary,fontSize:i.typography.fontSizeBase,textAlign:"center"},children:"No fields defined for this card"})}class C{lookupCache=(()=>new Map)();rulesCache=(()=>new Map)();defaultsCache=(()=>new Map)();cacheTimestamp=0;CACHE_TTL=3e5;constructor(){}static getInstance(){return C.instance||(C.instance=new C),C.instance}async executeLookup(e,t){const n=performance.now();try{await this.ensureCacheLoaded();const r=this.lookupCache.get(e);if(!r||!r.is_active)return{success:!1,error:`Lookup '${e}' not found or inactive`,used_default:!1,execution_time_ms:performance.now()-n};const i=this.rulesCache.get(r.id)||[],o=t.enableDebug?{lookup_name:e,input_values:{...t.formData},evaluated_rules:[]}:void 0;for(const e of i){if(!e.is_active)continue;const i=this.evaluateCondition(e.condition_logic,t.formData);if(o&&o.evaluated_rules.push({rule_id:e.id,rule_name:e.name,condition_result:i,condition_details:e.condition_logic}),i){const i=await this.executeAction(e.action_type,e.action_config,t),a={success:i.success,value:i.value,error:i.error,matched_rule_id:e.id,used_default:!1,execution_time_ms:performance.now()-n,debug_info:o};return t.enableLogging&&await this.logExecution(r,a,t),a}}const a=this.defaultsCache.get(r.id);if(a){const e=await this.executeAction(a.action_type,a.action_config,t),i={success:e.success,value:e.value,error:e.error,matched_rule_id:void 0,used_default:!0,execution_time_ms:performance.now()-n,debug_info:o};return t.enableLogging&&await this.logExecution(r,i,t),i}return{success:!1,error:`No rules matched for lookup '${e}' and no default action configured`,used_default:!1,execution_time_ms:performance.now()-n,debug_info:o}}catch(e){return{success:!1,error:`Enhanced lookup execution failed: ${e instanceof Error?e.message:"Unknown error"}`,used_default:!1,execution_time_ms:performance.now()-n}}}evaluateCondition(e,t){if(!e.conditions||0===e.conditions.length)return!0;const n=e.conditions.map(e=>this.evaluateSingleCondition(e,t));return"AND"===e.type?n.every(e=>e):n.some(e=>e)}evaluateSingleCondition(e,t){const n=t[e.field],r=e.value;if(null==n)return"not_equals"===e.operator||"not_in"===e.operator;switch(e.operator){case"equals":return n===r;case"not_equals":return n!==r;case"greater_than":return Number(n)>Number(r);case"greater_than_or_equal":return Number(n)>=Number(r);case"less_than":return Number(n)<Number(r);case"less_than_or_equal":return Number(n)<=Number(r);case"contains":return String(n).toLowerCase().includes(String(r).toLowerCase());case"starts_with":return String(n).toLowerCase().startsWith(String(r).toLowerCase());case"ends_with":return String(n).toLowerCase().endsWith(String(r).toLowerCase());case"in":return Array.isArray(r)&&r.includes(n);case"not_in":return Array.isArray(r)&&!r.includes(n);default:return!1}}async executeAction(e,t,n){switch(e){case"formula":return await this.executeFormulaAction(t,n);case"value":return this.executeValueAction(t);case"lookup":return await this.executeLookupTableAction(t,n);case"error":return{success:!1,error:t.message||"Lookup resulted in configured error"};default:return{success:!1,error:`Unknown action type: ${e}`}}}async executeFormulaAction(e,t){if(!e.formula_text)return{success:!1,error:"Formula action missing formula_text"};try{const n=new j(i.ND,t.sessionId,t.formData),r=await n.process(e.formula_text);if(r.success&&void 0!==r.result){let t;const n=String(r.result).replace(/\s/g,"").replace(/,/g,".").match(/^([+-]?[0-9]*\.?[0-9]+)/);n&&(t=parseFloat(n[1]));let o=r.result;if(void 0!==t){const n=e.formula_text?.match(/\[calc:([^\]]+)\]/);if(n){const e=n[1],{data:r}=await i.ND.from("formulas").select("unit").eq("name",e).single();o=r?.unit?`${t.toLocaleString("fi-FI")} ${r.unit}`:t.toLocaleString("fi-FI")}}return{success:!0,value:o}}return{success:!1,error:r.error||"Formula execution failed"}}catch(e){return{success:!1,error:`Formula execution error: ${e instanceof Error?e.message:"Unknown error"}`}}}executeValueAction(e){return void 0===e.value?{success:!1,error:"Value action missing value"}:{success:!0,value:e.value}}async executeLookupTableAction(e,t){if(!e.lookup_table||!e.key_field||!e.value_field)return{success:!1,error:"Lookup table action missing required configuration"};try{const n=t.formData[e.key_field];if(null==n)return{success:!1,error:`Key field '${e.key_field}' not found in form data`};const{data:r,error:o}=await i.ND.from(e.lookup_table).select(e.value_field).eq(e.key_field,n).single();return o?{success:!1,error:`Lookup table query failed: ${o.message}`}:r?{success:!0,value:r[e.value_field]}:{success:!1,error:`No matching record found in ${e.lookup_table} for ${e.key_field}='${n}'`}}catch(e){return{success:!1,error:`Lookup table error: ${e instanceof Error?e.message:"Unknown error"}`}}}async ensureCacheLoaded(){const e=Date.now();e-this.cacheTimestamp<this.CACHE_TTL||(await this.loadCache(),this.cacheTimestamp=e)}async loadCache(){try{const{data:e,error:t}=await i.ND.from("enhanced_lookups").select("*").eq("is_active",!0);if(t)throw t;const{data:n,error:r}=await i.ND.from("enhanced_lookup_rules").select("*").eq("is_active",!0).order("lookup_id, order_index");if(r)throw r;const{data:o,error:a}=await i.ND.from("enhanced_lookup_defaults").select("*");if(a)throw a;this.lookupCache.clear(),this.rulesCache.clear(),this.defaultsCache.clear(),e?.forEach(e=>{this.lookupCache.set(e.name,e)}),n?.forEach(e=>{this.rulesCache.has(e.lookup_id)||this.rulesCache.set(e.lookup_id,[]),this.rulesCache.get(e.lookup_id).push(e)}),o?.forEach(e=>{this.defaultsCache.set(e.lookup_id,e)})}catch(e){throw e}}async logExecution(e,t,n){try{await i.ND.from("enhanced_lookup_executions").insert({session_id:n.sessionId,lookup_id:e.id,lookup_name:e.name,input_values:n.formData,matched_rule_id:t.matched_rule_id,used_default:t.used_default,result_value:t.value,result_error:t.error,execution_time_ms:Math.round(t.execution_time_ms)})}catch(e){}}clearCache(){this.lookupCache.clear(),this.rulesCache.clear(),this.defaultsCache.clear(),this.cacheTimestamp=0}getCacheStats(){const e=Date.now();return{lookups:this.lookupCache.size,rules:Array.from(this.rulesCache.values()).reduce((e,t)=>e+t.length,0),defaults:this.defaultsCache.size,cacheAge:e-this.cacheTimestamp,isStale:e-this.cacheTimestamp>=this.CACHE_TTL}}async testLookup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"test";return await this.executeLookup(e,{sessionId:n,formData:t,enableDebug:!0,enableLogging:!1})}}function T(){return C.getInstance()}class j{cache=(()=>new Map)();formulasCache=null;constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.context={sessionId:t,formData:n,maxDepth:10,batchSize:10}}clearCache(){this.cache.clear()}async process(e){const t=performance.now();try{if(!e||"string"!=typeof e)return{success:!0,result:e||"",processedCount:0,executionTime:performance.now()-t,dependencies:[]};const n=this.extractDependencies(e),r=await this.extractFieldDependencies(e);if(0===n.size)return{success:!0,result:e,processedCount:0,executionTime:performance.now()-t,dependencies:r};const i=await this.resolveDependencies(n);return{success:!0,result:this.evaluateWithDependencies(e,i),processedCount:n.size,executionTime:performance.now()-t,dependencies:r}}catch(e){return{success:!1,error:`Processing failed: ${e instanceof Error?e.message:"Unknown error"}`,processedCount:0,executionTime:performance.now()-t,dependencies:[]}}}async extractFieldDependencies(e){const t=new Set,n=new Set;return await this._extractFieldDepsRecursive(e,t,n),Array.from(t)}async _extractFieldDepsRecursive(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(r>5)return;const i=/\{([^}]+)\}/g;let o;for(;null!==(o=i.exec(e));)t.add(o[1]);const a=/\[(\w+):([^\]]+)\]/g;for(;null!==(o=a.exec(e));){const e=o[1],i=o[2],a=`${e}:${i}`;if(!n.has(a))if(n.add(a),"field"===e)t.add(i);else if("calc"===e){const e=(await this.getFormulas()).find(e=>e.name.toLowerCase()===i.toLowerCase()||e.name.toLowerCase().replace(/\s+/g,"-")===i.toLowerCase());e?.formula_text&&await this._extractFieldDepsRecursive(e.formula_text,t,n,r+1)}else"lookup"===e&&await this._extractLookupFieldDeps(i,t,n,r+1)}}async _extractLookupFieldDeps(e,t,n,r){if(!(r>5))try{const{data:o}=await i.ND.from("enhanced_lookups").select("id").eq("name",e).eq("is_active",!0).single();if(o){const{data:e}=await i.ND.from("enhanced_lookup_rules").select("condition_logic, action_config").eq("lookup_id",o.id).eq("is_active",!0);if(e)for(const i of e){if(i.condition_logic?.conditions)for(const e of i.condition_logic.conditions)e.field&&t.add(e.field);i.action_config?.formula_text&&await this._extractFieldDepsRecursive(i.action_config.formula_text,t,n,r+1)}}}catch(e){}}extractDependencies(e){const t=new Set,n=/\[(\w+):([^\]]+)\]|\{([^}]+)\}/g;let r;for(;null!==(r=n.exec(e));)r[1]&&r[2]?t.add(`${r[1]}:${r[2]}`):r[3]&&t.add(`field:${r[3]}`);return t}async resolveDependencies(e){const t=new Map,n=Array.from(e),r=new Set;let i=0;for(;n.length>0&&i<this.context.maxDepth;){const e=n.splice(0,this.context.batchSize),o=await Promise.allSettled(e.map(e=>this.resolveSingleDependency(e)));for(let i=0;i<o.length;i++){const a=o[i],s=e[i];if("fulfilled"===a.status&&a.value){const e=a.value;t.set(s,e),r.add(s);this.extractDependencies(e.processed).forEach(e=>{r.has(e)||n.includes(e)||n.push(e)}),this.cache.set(s,e),this._persistValue().catch(console.error)}}i++}return this.context.maxDepth,t}async resolveSingleDependency(e){const t=this.cache.get(e);if(t)return t;const[n,r]=e.split(":",2),i={id:`${this.context.sessionId}:${e}`,type:this.determineType(e),raw:e,processed:"",dependencies:[],timestamp:new Date};try{switch(n){case"field":i.processed=this.resolveField(r);break;case"calc":i.processed=await this.resolveCalculation(r);break;case"lookup":i.processed=await this.resolveLookup(r);break;default:i.processed=e}return i}catch(e){return i.processed=`[Error: ${e instanceof Error?e.message:"Unknown error"}]`,i}}resolveField(e){const t=this.context.formData[e];if(null==t||""===t)throw new Error(`Field '${e}' is required but has no value`);return String(t)}async resolveCalculation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[`override_${e}`,`override_${e.replace(/-/g,"_")}`,`override_${e.replace(/_/g,"-")}`];for(const e of n){const t=this.context.formData[e];if(null!=t&&""!==t)return String(t)}if(t>5)throw new Error(`Maximum formula recursion depth exceeded for '${e}'`);const r=(await this.getFormulas()).find(t=>t.name.toLowerCase()===e.toLowerCase()||t.name.toLowerCase().replace(/\s+/g,"-")===e.toLowerCase());if(!r)throw new Error(`Formula '${e}' not found`);const i=await this.processFormulaText(r.formula_text,t+1);return String(i)}async processFormulaText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;const r=e.match(/\[field:([^\]]+)\]/g)||[];for(const e of r){const t=e.match(/\[field:([^\]]+)\]/);if(t){const r=t[1],i=this.context.formData[r];if(null==i||""===i)throw new Error(`Field '${r}' not found in form data`);n=n.replace(e,String(i))}}const i=e.match(/\[calc:([^\]]+)\]/g)||[];for(const e of i){const r=e.match(/\[calc:([^\]]+)\]/);if(r){const i=r[1],o=await this.resolveCalculation(i,t);n=n.replace(e,o)}}if(this.isEvaluableExpression(n))return this.evaluateMathExpression(n);{const e=parseFloat(n);if(isNaN(e))throw new Error(`Cannot evaluate formula result: ${n}`);return e}}async resolveLookup(e){try{const t=await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=T();return await i.executeLookup(e,{sessionId:t,formData:n,enableLogging:r.enableLogging??!1,enableDebug:r.enableDebug??!1})}(e,this.context.sessionId,this.context.formData,{enableLogging:!0});if(t.success&&void 0!==t.value)return String(t.numericValue??t.value);if(t.error&&t.error.includes("not found")){const t=await async function(e,t,n){try{if(n)for(const[e,r]of Object.entries(n))null!=r&&""!==r&&f(t,e,r);const r=await(0,o.getFormulaLookupByName)(e);if(!r)return{success:!1,error:`Lookup table '${e}' not found in database. Please create it in the Calculations page.`};const{fields:i,calculations:s}=m(t);for(const e of r.conditions||[]){if(!e.is_active)continue;const n=await a(e.condition_rule,t);if(n.success){if(n.result)return{success:!0,shortcode:e.target_shortcode};n.success}}const l=m(t).fields;return{success:!1,error:`No conditions matched in lookup table '${e}'. Debug info: Available field values: ${Object.entries(l).map(e=>{let[t,n]=e;return`${t}="${n}"`}).join(", ")}`}}catch(e){return{success:!1,error:`Lookup processing failed: ${e instanceof Error?e.message:"Unknown error"}`}}}(e,this.context.sessionId,this.context.formData);if(t.success)return t.shortcode||t.error||"[Lookup result unavailable]";throw new Error(`Legacy lookup failed: ${t.error}`)}throw new Error(`Enhanced lookup failed: ${t.error}`)}catch(e){throw new Error(`Lookup failed: ${e instanceof Error?e.message:"Unknown error"}`)}}evaluateWithDependencies(e,t){let n=e;for(const[e,r]of t){const[t,i]=e.split(":",2);let o;o="field"===t?new RegExp(`\\{${this.escapeRegExp(i)}\\}`,"g"):new RegExp(`\\[${t}:${this.escapeRegExp(i)}\\]`,"g"),n=n.replace(o,r.processed)}if(this.isEvaluableExpression(n))try{return this.evaluateMathExpression(n).toString()}catch(e){}return n}isEvaluableExpression(e){return/^[\d+\-*/().\s]+$/.test(e.trim())&&/[+\-*/()]/.test(e)}evaluateMathExpression(e){let t=e.replace(/,/g,".");if(t=t.replace(/\s/g,""),!/^[0-9+\-*/().\s]+$/.test(t))throw new Error("Expression contains invalid characters");if((t.match(/\(/g)||[]).length!==(t.match(/\)/g)||[]).length)throw new Error("Unbalanced parentheses");const n=new Function("return "+t)();if("number"!=typeof n||isNaN(n)||!isFinite(n))throw new Error("Expression did not evaluate to a valid number");return n}async getFormulas(){if(this.formulasCache&&Date.now()-this.formulasCache.timestamp<this.formulasCache.ttl)return this.formulasCache.formulas;const{data:e,error:t}=await i.ND.from("formulas").select("*").eq("is_active",!0).order("name");if(t)throw new Error(`Failed to fetch formulas: ${t.message}`);return this.formulasCache={formulas:e||[],timestamp:Date.now(),ttl:3e5},e||[]}determineType(e){return e.includes("field:")?"field":e.includes("calc:")?"calculation":e.includes("lookup:")?"lookup":"static"}inferUnit(e){const t=e.toLowerCase();return t.includes("energiantarve")&&t.includes("kwh")?"kW":t.includes("öljyn menekki")?"L/vuosi":t.includes("kaasun menekki")?"MWh/vuosi":t.includes("puun menekki")?"motti/vuosi":""}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async _persistValue(){}async loadCachedValues(){try{const{data:e,error:t}=await i.ND.from("processed_values").select("*").eq("session_id",this.context.sessionId).gte("updated_at",new Date(Date.now()-864e5).toISOString());if(t)return;if(e)for(const t of e){const e={id:t.value_id,type:t.type,raw:t.raw,processed:t.processed,dependencies:t.dependencies||[],timestamp:new Date(t.updated_at)},n=t.raw;this.cache.set(n,e)}}catch(e){}}getCacheStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys())}}updateFormData(e){this.context.formData={...this.context.formData,...e}}}const P=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},O=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),L=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var A={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const z=(0,e.forwardRef)(({color:t="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:s,...l},u)=>(0,e.createElement)("svg",{ref:u,...A,width:n,height:n,stroke:t,strokeWidth:i?24*Number(r)/Number(n):r,className:O("lucide",o),...!a&&!L(l)&&{"aria-hidden":"true"},...l},[...s.map(([t,n])=>(0,e.createElement)(t,n)),...Array.isArray(a)?a:[a]])),R=(t,n)=>{const r=(0,e.forwardRef)(({className:r,...i},o)=>{return(0,e.createElement)(z,{ref:o,iconNode:n,className:O(`lucide-${a=P(t),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${t}`,r),...i});var a});return r.displayName=P(t),r},N=R("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),I=R("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$=R("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),D=R("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function M(t){let{value:n,originalValue:r,unit:i="",onUpdate:o,editButtonText:a="Korjaa lukemaa",editPrompt:s="Syötä todellinen kulutuksesi",validationMin:l,validationMax:u,isCalculating:c=!1}=t;const d=x(),[f,h]=(0,e.useState)(!1),[p,m]=(0,e.useState)(""),[g,y]=(0,e.useState)(null),[v,w]=(0,e.useState)(!1),k=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=parseFloat(n.replace(/[^\d,.-]/g,"").replace(",",".")),t=parseFloat(r.replace(/[^\d,.-]/g,"").replace(",","."));w(Math.abs(e-t)>.01)},[n,r]),(0,e.useEffect)(()=>{f&&k.current&&(k.current.focus(),k.current.select())},[f]);const _=e=>e.toLocaleString("fi-FI"),S=()=>{const e=(e=>{const t=e.replace(/\s/g,"").replace(",","."),n=parseFloat(t);return isNaN(n)?null:n})(p);null!==e?void 0!==l&&e<l?y(`Arvon tulee olla vähintään ${_(l)}`):void 0!==u&&e>u?y(`Arvon tulee olla enintään ${_(u)}`):(o(e),h(!1),y(null)):y("Syötä kelvollinen numero")},E=()=>{h(!1),m(""),y(null)},C=e=>{"Enter"===e.key?S():"Escape"===e.key&&E()};return c?(0,b.jsxs)("div",{style:{color:d.colors.state.info,display:"flex",alignItems:"center",gap:"12px"},children:[(0,b.jsx)("div",{style:{animation:"spin 1s linear infinite",borderRadius:"50%",height:"32px",width:"32px",border:"2px solid transparent",borderBottom:`2px solid ${d.colors.state.info}`}}),"Lasketaan..."]}):f?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:d.calculationCard.editMode.inputGroup,children:[(0,b.jsxs)("div",{style:{...d.calculationCard.editMode.inputWrapper,...g?{borderColor:d.calculationCard.editMode.inputError.borderColor}:{}},children:[(0,b.jsx)("input",{ref:k,type:"text",value:p,onChange:e=>m(e.target.value),onKeyDown:C,style:{...d.calculationCard.editMode.input,paddingRight:i?"60px":"12px"},onFocus:e=>{const t=e.currentTarget.parentElement;t&&Object.assign(t.style,d.calculationCard.editMode.inputWrapperFocus)},onBlur:e=>{const t=e.currentTarget.parentElement;t&&!g&&(t.style.borderColor=d.calculationCard.editMode.inputWrapper.borderColor,t.style.boxShadow="none")}}),i&&(0,b.jsx)("span",{style:{...d.calculationCard.editMode.unitLabel,position:"absolute",right:"1px",top:"50%",transform:"translateY(-50%)",padding:"6px 12px",background:"#f3f4f6",borderLeft:"1px solid #e5e7eb",borderRadius:"0 6px 6px 0",color:"#6b7280",fontSize:"14px",pointerEvents:"none"},children:i})]}),(0,b.jsxs)("div",{style:d.calculationCard.editMode.actionButtons,children:[(0,b.jsxs)("button",{onClick:S,style:d.calculationCard.editMode.saveButton,onMouseEnter:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editMode.saveButtonHover)},onMouseLeave:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editMode.saveButton)},children:[(0,b.jsx)(N,{style:{width:"14px",height:"14px",marginRight:"4px",display:"inline"}}),"Tallenna"]}),(0,b.jsxs)("button",{onClick:E,style:d.calculationCard.editMode.cancelButton,onMouseEnter:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editMode.cancelButtonHover)},onMouseLeave:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editMode.cancelButton)},children:[(0,b.jsx)(I,{style:{width:"14px",height:"14px",marginRight:"4px",display:"inline"}}),"Peruuta"]})]})]}),s&&(0,b.jsx)("p",{style:{fontSize:d.typography.fontSizeBase,color:d.colors.text.secondary,marginTop:"8px"},children:s}),g&&(0,b.jsx)("div",{style:d.calculationCard.errorMessage,children:g})]}):(0,b.jsxs)("div",{style:{position:"relative"},children:[v&&(0,b.jsxs)("div",{style:d.calculationCard.editedIndicator.badge,children:[(0,b.jsx)("span",{style:d.calculationCard.editedIndicator.icon,children:"✏️"}),"Muokattu"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:d.calculationCard.resultSection,children:(0,b.jsx)("div",{style:d.calculationCard.resultDisplay,children:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{style:d.calculationCard.metricValue,children:n.split(" ")[0]}),n.includes(" ")&&(0,b.jsx)("span",{style:d.calculationCard.metricUnit,children:n.split(" ").slice(1).join(" ")})]})})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[v&&(0,b.jsxs)("button",{onClick:()=>{const e=parseFloat(r.replace(/[^\d,.-]/g,"").replace(",","."));o(e)},style:d.calculationCard.editButton,onMouseEnter:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editButtonHover)},onMouseLeave:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editButton)},title:`Palauta alkuperäinen arvo: ${r}`,children:[(0,b.jsx)($,{style:{...d.calculationCard.editIcon,width:"14px",height:"14px"}}),"Palauta"]}),(0,b.jsxs)("button",{onClick:()=>{const e=n.replace(/[^\d,.-]/g,"").replace(",",".");m(e),y(null),h(!0)},style:d.calculationCard.editButton,onMouseEnter:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editButtonHover)},onMouseLeave:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editButton)},onFocus:e=>{Object.assign(e.currentTarget.style,d.calculationCard.editButtonFocus)},onBlur:e=>{e.currentTarget.style.outline="none",e.currentTarget.style.outlineOffset="0"},title:a,children:[(0,b.jsx)(D,{style:{...d.calculationCard.editIcon,width:"14px",height:"14px"}}),a]})]})]})]})}function B(t){let{card:n}=t;const r=x(),{formData:o,completeCard:a,uncompleteCard:s,cardStates:l,sessionId:u,updateField:c,submitData:d}=k(),[f,h]=(0,e.useState)(null),[p,m]=(0,e.useState)(null),[g,y]=(0,e.useState)(""),[v,w]=(0,e.useState)(!1),[_,S]=(0,e.useState)(null),[E,C]=(0,e.useState)([]),[T,P]=(0,e.useState)(null),[O,L]=(0,e.useState)(!1),[A,z]=(0,e.useState)(!1),R=(0,e.useRef)(!1);(0,e.useEffect)(()=>{(async()=>{const e=l[n.id],t=!0===e?.isRevealed,r="complete"===e?.status;if(t){if(r&&E.length>0);else if(r)return;if(R.current&&(R.current=!1),n.config?.main_result){R.current=!0,w(!0),S(null);try{const e=new j(i.ND,u,o);e.clearCache();const t=await e.process(n.config.main_result);if(t.success){if(h(t.result||null),y(""),P(null),n.config?.field_name&&t.result){const e=parseFloat(String(t.result).replace(/\s/g,"").replace(",","."));isNaN(e)||c(n.config.field_name,e)}n.config?.auto_complete_on_success&&a(n.id)}else S(t.error||"Calculation failed");t.dependencies&&C(t.dependencies);const r=n.config.main_result?.match(/^\[(\w+):([^\]]+)\]$/);let s=null;r&&(s=r[2],P(s));let l=String(t.result),d="";const f=l.match(/^([\d\s,.-]+)\s+(.+)$/);if(f){const e=f[1].trim();d=f[2].trim();const t=parseFloat(e.replace(/\s/g,"").replace(",","."));isNaN(t)||(l=`${t.toLocaleString("fi-FI",{minimumFractionDigits:0,maximumFractionDigits:0})} ${d}`)}else{const e=Number(t.result);if(!isNaN(e)){l=e.toLocaleString("fi-FI",{minimumFractionDigits:0,maximumFractionDigits:0});const t=n.config.main_result?.match(/^\[calc:([^\]]+)\]$/);if(t&&s)try{const{data:t}=await i.ND.from("formulas").select("unit").eq("name",s).single();t?.unit&&(d=t.unit,l=`${e.toLocaleString("fi-FI",{minimumFractionDigits:0,maximumFractionDigits:0})} ${t.unit}`)}catch(e){}}}const p=o[`override_${s||T||"calc"}`];if(y(d),null!=p&&""!==p){const e=Number(p).toLocaleString("fi-FI");h(d?`${e} ${d}`:e),m(l)}else h(l),m(l);a(n.id),w(!1)}catch(e){const t=e instanceof Error?e.message:"Unknown calculation error";S(t),s(n.id),R.current=!1,w(!1)}}}else R.current=!1})()},[n.config?.main_result,u,l[n.id]?.isRevealed??!1,E.length>0?E.map(e=>o[e]).join("|"):"",E.join(",")]);return n.config?.main_result?(0,b.jsxs)("div",{style:{padding:r.calculationCard.container.padding,background:r.calculationCard.container.background},children:[(n.title||n.config?.description)&&(0,b.jsxs)("div",{style:r.calculationCard.header,children:[(0,b.jsx)("h3",{style:r.calculationCard.title,children:n.title||n.name}),n.config?.description&&(0,b.jsx)("p",{style:r.calculationCard.description,children:n.config.description})]}),(0,b.jsx)("div",{style:r.calculationCard.resultSection,children:(0,b.jsx)("div",{style:r.calculationCard.resultDisplay,children:_?(0,b.jsx)("div",{style:r.calculationCard.errorMessage,children:_}):f&&n.config?.enable_edit_mode?(0,b.jsx)(M,{value:f,originalValue:p||f,unit:g,onUpdate:e=>{n.config?.field_name&&c(n.config.field_name,e);c(`override_${T||"calc"}`,e);const t=e.toLocaleString("fi-FI");let r=g;if(!r&&f){const e=f.match(/^([\d\s,.-]+)\s+(.+)$/);e&&(r=e[2].trim())}h(r?`${t} ${r}`:t)},editButtonText:n.config?.edit_button_text||"Korjaa lukemaa",editPrompt:n.config?.edit_prompt,validationMin:n.config?.validation_min?Number(n.config.validation_min):void 0,validationMax:n.config?.validation_max?Number(n.config.validation_max):void 0,isCalculating:v}):v?(0,b.jsx)("div",{style:{color:r.colors.state.info,display:"flex",alignItems:"center",gap:"12px"},children:(0,b.jsx)("div",{children:"Lasketaan..."})}):f?(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{style:r.calculationCard.metricValue,children:f.split(" ")[0]}),f.includes(" ")&&(0,b.jsx)("span",{style:r.calculationCard.metricUnit,children:f.split(" ").slice(1).join(" ")})]}):(0,b.jsx)("div",{children:n.config?.main_result})})}),n.config?.show_breakdown&&f&&(0,b.jsx)("div",{style:r.calculationCard.breakdown}),n.config?.has_submit_button&&(0,b.jsx)("div",{children:A?(0,b.jsx)("div",{style:{color:r.colors.state.success,textAlign:"center",padding:"20px"},children:(0,b.jsx)("p",{children:n.config?.submit_success_message||"Thank you! Your submission has been received."})}):(0,b.jsx)("div",{style:{textAlign:r.actionCard.textAlign,padding:r.actionCard.padding},children:(0,b.jsx)("button",{onClick:async()=>{if(!O){L(!0);try{d&&await d(n.config?.submit_email_template),a(n.id),z(!0)}catch(e){}finally{L(!1)}}},disabled:O||v,style:{...r.actionCard.button,...O||v?r.actionCard.button.disabled:{}},onMouseEnter:e=>{O||v||Object.assign(e.currentTarget.style,r.actionCard.button.hover)},onMouseLeave:e=>{O||v||Object.assign(e.currentTarget.style,r.actionCard.button)},children:O?(0,b.jsx)(b.Fragment,{children:"Submitting..."}):n.config?.submit_button_text||"Submit"})})})]}):(0,b.jsxs)("div",{style:{padding:r.calculationCard.container.padding,background:r.calculationCard.container.background},children:[(0,b.jsxs)("div",{style:r.calculationCard.header,children:[(0,b.jsx)("h3",{style:r.calculationCard.title,children:n.title||n.name}),(0,b.jsx)("p",{style:r.calculationCard.description,children:n.config?.description||""})]}),(0,b.jsxs)("div",{style:r.calculationCard.errorMessage,children:[(0,b.jsx)("p",{children:"No calculation shortcode configured"}),(0,b.jsx)("p",{children:"Please configure a calculation result shortcode (e.g., [calc:energy-kwh]) in the Card Builder."})]})]})}function F(t){let{card:n}=t;const r=x(),{completeCard:i,cardStates:o}=k();return(0,e.useEffect)(()=>{const e=o[n.id],t=e?.isRevealed;t&&!("complete"===e?.status)&&i(n.id)},[n.id,n.name,i,o]),(0,b.jsxs)("div",{style:{padding:r.card.base.padding,background:r.infoCard.background},children:[(n.title||n.config?.description)&&(0,b.jsx)("div",{style:r.card.header,children:(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("h3",{style:{fontSize:r.card.title.fontSize,fontWeight:r.card.title.fontWeight,color:r.card.title.color,lineHeight:r.card.title.lineHeight,marginBottom:r.card.title.marginBottom,letterSpacing:r.card.title.letterSpacing},children:n.title||n.name}),n.config?.description&&(0,b.jsx)("p",{style:{fontSize:r.card.description.fontSize,fontWeight:r.card.description.fontWeight,color:r.card.description.color,lineHeight:r.card.description.lineHeight,marginBottom:r.card.description.marginBottom},children:n.config.description})]})}),n.config?.content&&(0,b.jsx)("div",{style:{fontSize:r.infoCard.content.fontSize,color:r.infoCard.content.color,lineHeight:r.infoCard.content.lineHeight},dangerouslySetInnerHTML:{__html:n.config.content}})]})}function U(e){let{card:t,onFieldFocus:n}=e;switch(t.type){case"form":return(0,b.jsx)(E,{card:t,onFieldFocus:n});case"calculation":return(0,b.jsx)(B,{card:t,onFieldFocus:n});case"info":return(0,b.jsx)(F,{card:t});default:return null}}var W=n(606);function H(t){let{activeCard:n,visualConfig:r,compact:o=!1,objectId:a}=t;const s=x(),[l,u]=(0,e.useState)([]),[c,d]=(0,e.useState)(!1),f=r||n?.visual_objects;(0,e.useEffect)(()=>{(async()=>{if(f?.id){d(!0);try{const{data:e,error:t}=await i.ND.from("visual_object_images").select("*").eq("visual_object_id",f.id).order("display_order");u(t?[]:e||[])}catch(e){u([])}finally{d(!1)}}else u([])})()},[f?.id]);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public";const n=W.env.NEXT_PUBLIC_CLOUDFLARE_ACCOUNT_HASH;if(!n)return null;return`https://imagedelivery.net/${n}/${e}/${t}`},p=f?{title:f.title,description:f.description,hasImages:l.length>0}:n?{title:n.name,description:n.config?.description,hasImages:!1}:{title:null,description:null,hasImages:!1};return o?(0,b.jsxs)("div",{style:{background:s.visualSupport.content.background,padding:s.visualSupport.content.padding,display:"flex",alignItems:"center",gap:"16px",textAlign:"left",position:"relative",overflow:"hidden"},children:[p.hasImages&&l.length>0&&!c&&(()=>{const e=h(l[0].cloudflare_image_id);return e?(0,b.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`url(${e})`,backgroundSize:"cover",backgroundPosition:"center",opacity:.3,zIndex:0}}):null})(),(0,b.jsxs)("div",{style:{flex:1,minWidth:0,position:"relative",zIndex:1},children:[p.title&&(0,b.jsx)("h2",{style:{fontSize:"18px",fontWeight:s.visualSupport.title.fontWeight,color:s.visualSupport.title.color,marginBottom:"4px",letterSpacing:s.visualSupport.title.letterSpacing},children:p.title}),p.description&&(0,b.jsx)("p",{style:{fontSize:"14px",fontWeight:s.visualSupport.subtitle.fontWeight,color:s.visualSupport.subtitle.color,lineHeight:s.visualSupport.subtitle.lineHeight,margin:0},children:p.description})]})]}):(0,b.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,b.jsx)("div",{style:{background:s.visualSupport.content.background,padding:p.hasImages&&l.length>0?"0":s.visualSupport.content.padding,display:s.visualSupport.content.display,flexDirection:s.visualSupport.content.flexDirection,alignItems:s.visualSupport.content.alignItems,justifyContent:s.visualSupport.content.justifyContent,flex:s.visualSupport.content.flex,position:"relative",overflow:"hidden"},children:c?(0,b.jsx)("div",{style:{textAlign:"center",color:"#ffffff"},children:"Loading visual content..."}):p.hasImages&&l.length>0?(0,b.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:l.map((e,t)=>{const n=h(e.cloudflare_image_id);return n?(0,b.jsx)("img",{src:n,alt:p.title||"Visual content",style:{width:"100%",height:"100%",objectFit:s.visualSupport.image.objectFit,borderRadius:s.visualSupport.image.borderRadius},onLoad:()=>{},onError:e=>{e.currentTarget.style.display="none"}},e.id):null})}):(0,b.jsxs)("div",{style:{textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"64px",marginBottom:"16px",opacity:"0.8"},children:"📋"}),p.title&&(0,b.jsx)("h2",{style:{fontSize:s.visualSupport.title.fontSize,fontWeight:s.visualSupport.title.fontWeight,color:s.visualSupport.title.color,marginBottom:s.visualSupport.title.marginBottom,textAlign:s.visualSupport.title.textAlign,letterSpacing:s.visualSupport.title.letterSpacing},children:p.title}),(0,b.jsx)("p",{style:{fontSize:s.visualSupport.subtitle.fontSize,fontWeight:s.visualSupport.subtitle.fontWeight,color:s.visualSupport.subtitle.color,textAlign:s.visualSupport.subtitle.textAlign,lineHeight:s.visualSupport.subtitle.lineHeight},children:p.description||"No visual content available"})]})}),(0,b.jsx)("div",{style:{background:s.visualSupport.infoSection.background,padding:s.visualSupport.infoSection.padding,borderTop:s.visualSupport.infoSection.borderTop},children:(0,b.jsxs)("div",{style:{marginTop:s.visualSupport.infoSection.tip.marginTop,padding:s.visualSupport.infoSection.tip.padding,background:s.visualSupport.infoSection.tip.background,borderLeft:s.visualSupport.infoSection.tip.borderLeft,borderRadius:s.visualSupport.infoSection.tip.borderRadius,fontSize:s.visualSupport.infoSection.tip.fontSize,color:s.visualSupport.infoSection.tip.color,display:s.visualSupport.infoSection.tip.display},children:["💡"," ",f&&p.title?`${p.title}${p.description?` - ${p.description}`:""}`:n?`Vinkki: ${n.name} - Täytä kentät huolellisesti`:"Vinkki: Täytä kentät huolellisesti parhaan arvion saamiseksi"]})})]})}function q(t){let{onFieldFocus:n,activeCardId:r,forceShowInline:i,showBlurredCards:o=!1}=t;const{cards:a,shouldBeRevealed:s,cardStates:l}=k(),u=x(),c=(0,e.useRef)(null),[d,f]=(0,e.useState)({showTop:!1,showBottom:!1}),h=(0,e.useCallback)(()=>{const e=c.current;if(!e)return;const{scrollTop:t,scrollHeight:n,clientHeight:r}=e,i=n>r;f(e=>{const o={showTop:i&&t>10,showBottom:i&&t<n-r-10};return e.showTop===o.showTop&&e.showBottom===o.showBottom?e:o})},[]);(0,e.useEffect)(()=>{h()},[a.length]),(0,e.useEffect)(()=>{const e=c.current;if(e)return e.addEventListener("scroll",h),()=>e.removeEventListener("scroll",h)},[h]);const p=(0,e.useMemo)(()=>a.filter(e=>s(e)).sort((e,t)=>e.display_order-t.display_order),[a,s]),m=(0,e.useMemo)(()=>a.filter(e=>!s(e)).sort((e,t)=>e.display_order-t.display_order),[a,s]),g=r?a.find(e=>e.id===r):a.find(e=>e.visual_objects);return a.length?(0,b.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,b.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,pointerEvents:"none",zIndex:10,transition:"opacity 500ms",opacity:d.showTop?1:0,height:"32px",background:"linear-gradient(180deg, rgba(255, 255, 255, 0.8) 0%, transparent 100%)"}}),(0,b.jsx)("div",{ref:c,style:{height:"100%",overflowY:"auto"},children:(0,b.jsxs)("div",{style:{padding:"30px",gap:"20px"},children:[(0,b.jsx)("div",{style:{height:"20px"}}),i&&(0,b.jsx)("div",{style:{display:i?"block":"none",marginBottom:"20px"},children:(0,b.jsx)("div",{style:{background:"#ffffff",borderRadius:"8px",overflow:"hidden"},children:(0,b.jsx)("div",{style:{height:"32px"},children:(0,b.jsx)(H,{activeCard:g,compact:!0})})})}),p.map((e,t)=>{const i=r===e.id,o="complete"===l[e.id]?.status;return(0,b.jsxs)("div",{id:`card-${e.id}`,style:{marginBottom:u.card.base.marginBottom,background:i?u.card.states.active.background:o?u.card.states.complete.background:u.card.base.background,borderRadius:u.card.base.borderRadius,overflow:u.card.base.overflow,borderTop:i?u.card.states.active.border:u.card.base.border||"1px solid #e5e7eb",borderRight:i?u.card.states.active.border:u.card.base.border||"1px solid #e5e7eb",borderBottom:i?u.card.states.active.border:u.card.base.border||"1px solid #e5e7eb",borderLeft:i?u.card.states.active.border:o?u.card.states.complete.borderLeft:u.card.base.border||"1px solid #e5e7eb",boxShadow:i?u.card.states.active.boxShadow:u.card.base.boxShadow,transform:i?u.card.states.active.transform:"scale(1)",opacity:o?u.card.states.complete.opacity:"1",transition:u.card.base.transition,position:"relative"},children:[o&&u.card.states.complete.checkmark?.enabled&&(0,b.jsx)("div",{style:{position:u.card.states.complete.checkmark.position,top:u.card.states.complete.checkmark.top,right:u.card.states.complete.checkmark.right,width:u.card.states.complete.checkmark.size,height:u.card.states.complete.checkmark.size,background:u.card.states.complete.checkmark.background,borderRadius:u.card.states.complete.checkmark.borderRadius,padding:u.card.states.complete.checkmark.padding,display:"flex",alignItems:"center",justifyContent:"center",color:u.card.states.complete.checkmark.color},children:(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M13.5 4.5L6 12L2.5 8.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,b.jsx)(U,{card:e,onFieldFocus:n})]},e.id)}),o&&m.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{height:"20px"}}),(()=>{const e=m[0];return(0,b.jsx)("div",{style:{marginBottom:u.card.base.marginBottom,background:u.card.base.background,borderRadius:u.card.base.borderRadius,overflow:u.card.base.overflow,border:u.card.base.border||"1px solid #e5e7eb",opacity:u.card.states.locked?.opacity||"0.6",filter:u.card.states.locked?.filter||"blur(8px)",pointerEvents:u.card.states.locked?.pointerEvents||"none",transform:u.card.states.locked?.transform||"scale(0.98)",transition:u.card.states.locked?.transition||"all 500ms ease",position:"relative"},children:(0,b.jsx)(U,{card:e,onFieldFocus:n})},`locked-${e.id}`)})()]})]})}),(0,b.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,pointerEvents:"none",zIndex:10,transition:"opacity 500ms",opacity:d.showBottom?1:0,height:"32px",background:"linear-gradient(0deg, rgba(255, 255, 255, 0.8) 0%, transparent 100%)"}})]}):(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,b.jsxs)("div",{style:{textAlign:"center"},children:[(0,b.jsx)("div",{style:{animation:"spin 1s linear infinite",borderRadius:"50%",height:"32px",width:"32px",border:"2px solid transparent",borderBottom:"2px solid #111827",margin:"0 auto 16px"}}),(0,b.jsx)("p",{style:{color:"#6b7280"},children:"Loading cards..."})]})})}function V(t){let{maxWidth:n,fullWidth:r=!1,className:i="",showVisualSupport:o=!0,height:a,forceMode:s,showBlurredCards:l=!1}=t;const u=x(),{cards:c}=k(),d=n||u.container.maxWidth,f=a||u.container.height,[h,p]=(0,e.useState)({}),m=r?{}:{maxWidth:"number"==typeof d?`${d}px`:d},g=o?u.layout.cardStreamRatio:"100%",y="mobile"===s,v=c.find(e=>e.id===h.cardId);return(0,e.useEffect)(()=>{if(!v&&c.length>0){const e=c.find(e=>e.visual_objects);e&&p({cardId:e.id,fieldId:"auto_selected",value:"preview"})}},[c,v]),(0,b.jsx)("div",{style:{margin:"0 auto",...m},children:(0,b.jsxs)("div",{style:{height:"auto"===f?"auto":`${f}px`,padding:0,display:"flex",flexDirection:"row",alignItems:"stretch",gap:u.layout.gapBetweenPanels,position:"relative"},children:[o&&(0,b.jsx)("div",{style:{display:y?"none":"block",width:u.layout.visualSupportRatio,height:"100%",background:u.visualSupport.background,borderRight:u.visualSupport.borderRight},children:(0,b.jsx)(H,{activeCard:v,visualConfig:v?.visual_objects,compact:y})}),(0,b.jsx)("div",{style:{width:s&&y?"100%":o?g:"100%",height:"100%",background:u.cardStream.background,flex:1,overflow:"hidden"},children:(0,b.jsx)(q,{onFieldFocus:(e,t,n)=>{p({cardId:e,fieldId:t,value:n})},activeCardId:h.cardId,forceShowInline:y,showBlurredCards:l})})]})})}function K(t){return(0,e.useEffect)(()=>{g("Laskennallinen energiantarve (kwh)",{fields:["neliot","huonekorkeus"],calculations:[]}),g("Öljyn menekki vuodessa",{fields:["valitse"],calculations:["Laskennallinen energiantarve (kwh)"]}),g("Sähkön kulutus vuodessa",{fields:["valitse"],calculations:["Laskennallinen energiantarve (kwh)"]}),g("Vuosittainen säästö",{fields:["valitse"],calculations:["Öljyn menekki vuodessa","Sähkön kulutus vuodessa"]})},[]),(0,b.jsx)(w,{children:(0,b.jsx)(V,{...t})})}var G=n(490);let J=null;const Q=t=>{let{config:n}=t;const[r,i]=(0,e.useState)(!1),[o,a]=(0,e.useState)(null);return(0,e.useEffect)(()=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.x,t=arguments.length>1?arguments[1]:void 0;const n=t?{...e,...t}:e,r=document.documentElement;n.container&&(r.style.setProperty("--e1-container-max-width",n.container.maxWidth),r.style.setProperty("--e1-container-padding",n.container.padding),r.style.setProperty("--e1-container-background",n.container.background),r.style.setProperty("--e1-container-border-radius",n.container.borderRadius),r.style.setProperty("--e1-container-box-shadow",n.container.boxShadow)),n.layout&&(r.style.setProperty("--e1-visual-support-ratio",n.layout.visualSupportRatio),r.style.setProperty("--e1-card-stream-ratio",n.layout.cardStreamRatio),r.style.setProperty("--e1-gap-between-panels",n.layout.gapBetweenPanels)),n.colors&&(n.colors.brand&&(r.style.setProperty("--e1-color-primary",n.colors.brand.primary),r.style.setProperty("--e1-color-primary-hover",n.colors.brand.primaryHover),r.style.setProperty("--e1-color-primary-light",n.colors.brand.primaryLight)),n.colors.text&&(r.style.setProperty("--e1-text-primary",n.colors.text.primary),r.style.setProperty("--e1-text-secondary",n.colors.text.secondary),r.style.setProperty("--e1-text-tertiary",n.colors.text.tertiary),r.style.setProperty("--e1-text-placeholder",n.colors.text.placeholder)),n.colors.background&&(r.style.setProperty("--e1-bg-primary",n.colors.background.primary),r.style.setProperty("--e1-bg-secondary",n.colors.background.secondary),r.style.setProperty("--e1-bg-tertiary",n.colors.background.tertiary),r.style.setProperty("--e1-bg-disabled",n.colors.background.disabled)),n.colors.border&&(r.style.setProperty("--e1-border-default",n.colors.border.default),r.style.setProperty("--e1-border-hover",n.colors.border.hover)),n.colors.state&&(r.style.setProperty("--e1-state-success",n.colors.state.success),r.style.setProperty("--e1-state-error",n.colors.state.error),r.style.setProperty("--e1-state-warning",n.colors.state.warning),r.style.setProperty("--e1-state-info",n.colors.state.info))),n.card&&(n.card.base&&(r.style.setProperty("--e1-card-bg",n.card.base.background),r.style.setProperty("--e1-card-padding",n.card.base.padding),r.style.setProperty("--e1-card-border-radius",n.card.base.borderRadius),r.style.setProperty("--e1-card-margin-bottom",n.card.base.marginBottom),r.style.setProperty("--e1-card-box-shadow",n.card.base.boxShadow),r.style.setProperty("--e1-card-transition",n.card.base.transition)),n.card.title&&(r.style.setProperty("--e1-card-title-size",n.card.title.fontSize),r.style.setProperty("--e1-card-title-weight",n.card.title.fontWeight),r.style.setProperty("--e1-card-title-color",n.card.title.color)),n.card.hover&&(r.style.setProperty("--e1-card-hover-shadow",n.card.hover.boxShadow),r.style.setProperty("--e1-card-hover-transform",n.card.hover.transform))),n.typography&&(r.style.setProperty("--e1-font-family",n.typography.fontFamily),r.style.setProperty("--e1-font-size-base",n.typography.fontSizeBase),r.style.setProperty("--e1-line-height-base",n.typography.lineHeightBase),r.style.setProperty("--e1-font-weight-light",String(n.typography.fontWeightLight)),r.style.setProperty("--e1-font-weight-normal",String(n.typography.fontWeightNormal)),r.style.setProperty("--e1-font-weight-medium",String(n.typography.fontWeightMedium)),r.style.setProperty("--e1-font-weight-semibold",String(n.typography.fontWeightSemibold))),n.formElements&&(n.formElements.input&&(r.style.setProperty("--e1-input-height",n.formElements.input.height),r.style.setProperty("--e1-input-padding",n.formElements.input.padding),r.style.setProperty("--e1-input-border-radius",n.formElements.input.borderRadius),r.style.setProperty("--e1-input-border-color",n.formElements.input.borderColor),r.style.setProperty("--e1-input-bg",n.formElements.input.background),r.style.setProperty("--e1-input-font-size",n.formElements.input.fontSize),r.style.setProperty("--e1-input-transition",n.formElements.input.transition)),n.formElements.label&&(r.style.setProperty("--e1-label-font-size",n.formElements.label.fontSize),r.style.setProperty("--e1-label-font-weight",n.formElements.label.fontWeight),r.style.setProperty("--e1-label-color",n.formElements.label.color),r.style.setProperty("--e1-label-margin-bottom",n.formElements.label.marginBottom))),n.submitButton&&(r.style.setProperty("--e1-button-height",n.submitButton.height),r.style.setProperty("--e1-button-padding",n.submitButton.padding),r.style.setProperty("--e1-button-border-radius",n.submitButton.borderRadius),r.style.setProperty("--e1-button-font-size",n.submitButton.fontSize),r.style.setProperty("--e1-button-font-weight",n.submitButton.fontWeight),r.style.setProperty("--e1-button-bg",n.submitButton.background),r.style.setProperty("--e1-button-color",n.submitButton.color),r.style.setProperty("--e1-button-transition",n.submitButton.transition),n.submitButton.hover&&(r.style.setProperty("--e1-button-hover-bg",n.submitButton.hover.background),r.style.setProperty("--e1-button-hover-transform",n.submitButton.hover.transform))),n.animations&&n.animations.transitions&&(r.style.setProperty("--e1-transition-fast",n.animations.transitions.fast),r.style.setProperty("--e1-transition-default",n.animations.transitions.default),r.style.setProperty("--e1-transition-slow",n.animations.transitions.slow))}(_.x,n.customTokens);const e=function(e){const t=e.supabaseUrl||"https://xfqmllsvdxejloecwlaq.supabase.co",n=e.supabaseAnonKey||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhmcW1sbHN2ZHhlamxvZWN3bGFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwNTE1NjAsImV4cCI6MjA3MTYyNzU2MH0.ZE4YOoVjqs4fGQs4gA3CJoQ4nEzfRqK4K2MO_bERGvM";return t&&n?(0,G.UU)(t,n):null}(n);e?(window.__E1_SUPABASE=e,n.theme&&document.documentElement.setAttribute("data-theme",n.theme),i(!0)):a("Failed to initialize database connection")},[n]),o?(0,b.jsx)("div",{className:"e1-widget-error",children:(0,b.jsxs)("p",{children:["Widget initialization failed: ",o]})}):r?(0,b.jsx)("div",{className:"e1-widget-container",children:(0,b.jsx)(K,{maxWidth:n.maxWidth,height:n.height,showVisualSupport:!1!==n.showVisualSupport,showBlurredCards:n.showBlurredCards})}):(0,b.jsxs)("div",{className:"e1-widget-loading",children:[(0,b.jsx)("div",{className:"loading-spinner"}),(0,b.jsx)("p",{children:"Loading calculator..."})]})};function Y(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=document.getElementById(n);if(!i)return null;J&&J.unmount();const o=t.createRoot(i);return o.render((0,b.jsx)(e.StrictMode,{children:(0,b.jsx)(Q,{config:r})})),J=o,{unmount:()=>{o.unmount(),J=null},updateConfig:t=>{o.render((0,b.jsx)(e.StrictMode,{children:(0,b.jsx)(Q,{config:{...r,...t}})}))}}}if("undefined"!=typeof window){window.E1Calculator={init:Y,version:"1.0.0"};const e=()=>{document.querySelectorAll("[data-e1-calculator]").forEach(e=>{const t={};e.getAttribute("data-supabase-url")&&(t.supabaseUrl=e.getAttribute("data-supabase-url")||void 0),e.getAttribute("data-supabase-key")&&(t.supabaseAnonKey=e.getAttribute("data-supabase-key")||void 0),e.getAttribute("data-theme")&&(t.theme=e.getAttribute("data-theme")||void 0),e.getAttribute("data-max-width")&&(t.maxWidth=e.getAttribute("data-max-width")||void 0),e.getAttribute("data-height")&&(t.height=parseInt(e.getAttribute("data-height")||"0")||void 0),null!==e.getAttribute("data-show-visual")&&(t.showVisualSupport="true"===e.getAttribute("data-show-visual")),Y(e.id||"e1-calculator-"+Math.random().toString(36).substr(2,9),t)})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}const X={init:Y,version:"1.0.0"}})(),r=r.default})());